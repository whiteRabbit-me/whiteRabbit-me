<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>netty</title>
    <link href="/2024/09/14/netty/"/>
    <url>/2024/09/14/netty/</url>
    
    <content type="html"><![CDATA[<h1 id="ç½‘ç»œç¼–ç¨‹"><a href="#ç½‘ç»œç¼–ç¨‹" class="headerlink" title="ç½‘ç»œç¼–ç¨‹"></a>ç½‘ç»œç¼–ç¨‹</h1><h2 id="NIOåŸºç¡€"><a href="#NIOåŸºç¡€" class="headerlink" title="NIOåŸºç¡€"></a>NIOåŸºç¡€</h2><h3 id="1-ä¸‰å¤§ç»„ä»¶"><a href="#1-ä¸‰å¤§ç»„ä»¶" class="headerlink" title="1.ä¸‰å¤§ç»„ä»¶"></a>1.ä¸‰å¤§ç»„ä»¶</h3><h4 id="1-1channel-Buffer"><a href="#1-1channel-Buffer" class="headerlink" title="1.1channel&amp;Buffer"></a>1.1channel&amp;Buffer</h4><blockquote><p>channel æœ‰ä¸€ç‚¹ç±»ä¼¼äº streamï¼Œå®ƒå°±æ˜¯è¯»å†™æ•°æ®çš„åŒå‘é€šé“ï¼Œå¯ä»¥ä» channelå°†æ•°æ®è¯»å…¥bufferï¼Œä¹Ÿå¯ä»¥å°†bufferçš„æ•°æ®å†™å…¥ channelï¼Œè€Œä¹‹å‰çš„ stream è¦ä¹ˆæ˜¯è¾“å…¥ï¼Œè¦ä¹ˆæ˜¯è¾“å‡ºï¼Œchannel æ¯” stream æ›´ä¸ºåº•å±‚</p></blockquote><p><img src="/D:/ç¬”è®°\myblog\whiteRabbit-me.github.io\source_posts\netty\image-20240917164333867.png" alt="image-20240917164333867"></p><p>1.å¸¸è§çš„Channelæœ‰</p><blockquote><p>FileChannel</p><p>DatagramChannel</p><p>SocketChannel</p><p>ServerSocketChannela</p></blockquote><p>2.bufferåˆ™ç”¨æ¥ç¼“å†²è¯»å†™æ•°æ®ï¼Œå¸¸è§çš„bufferæœ‰</p><blockquote><ul><li>ByteBuffer  è¿™ä¸ªæ˜¯æŠ½è±¡ç±»ï¼Œä¸‹é¢æ˜¯å®ç°ç±»<ul><li>MappedByteBuffer</li><li>DirectByteBuffer</li><li>HeapByteBuffer</li></ul></li><li>ShortBuffer</li><li>IntBuffer</li><li>LongBuffer</li><li>FloatBuffer</li><li>DoubleBUffer</li><li>CharBuffer</li></ul></blockquote><h4 id="1-2Selector"><a href="#1-2Selector" class="headerlink" title="1.2Selector"></a>1.2Selector</h4><blockquote><p>selector å•ä»å­—é¢æ„æ€ä¸å¥½ç†è§£ï¼Œéœ€è¦ç»“åˆæœåŠ¡å™¨çš„è®¾è®¡æ¼”åŒ–æ¥ç†è§£å®ƒçš„ç”¨é€”</p></blockquote><h5 id="å¤šçº¿ç¨‹ç‰ˆè®¾è®¡"><a href="#å¤šçº¿ç¨‹ç‰ˆè®¾è®¡" class="headerlink" title="å¤šçº¿ç¨‹ç‰ˆè®¾è®¡"></a>å¤šçº¿ç¨‹ç‰ˆè®¾è®¡</h5><pre><code class=" mermaid">graph TDsubgraph å¤šçº¿ç¨‹ç‰ˆt1(thread) --&gt; s1(socket1)t2(thread) --&gt; s2(socket2)t3(thread) --&gt; s3(socket3)end</code></pre><h5 id="âš ï¸-å¤šçº¿ç¨‹ç‰ˆç¼ºç‚¹"><a href="#âš ï¸-å¤šçº¿ç¨‹ç‰ˆç¼ºç‚¹" class="headerlink" title="âš ï¸ å¤šçº¿ç¨‹ç‰ˆç¼ºç‚¹"></a>âš ï¸ å¤šçº¿ç¨‹ç‰ˆç¼ºç‚¹</h5><ul><li>å†…å­˜å ç”¨é«˜</li><li>çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢æˆæœ¬é«˜</li><li>åªé€‚åˆè¿æ¥æ•°å°‘çš„åœºæ™¯</li></ul><h5 id="çº¿ç¨‹æ± ç‰ˆè®¾è®¡"><a href="#çº¿ç¨‹æ± ç‰ˆè®¾è®¡" class="headerlink" title="çº¿ç¨‹æ± ç‰ˆè®¾è®¡"></a>çº¿ç¨‹æ± ç‰ˆè®¾è®¡</h5><pre><code class=" mermaid">graph TDsubgraph çº¿ç¨‹æ± ç‰ˆt4(thread) --&gt; s4(socket1)t5(thread) --&gt; s5(socket2)t4(thread) -.-&gt; s6(socket3)t5(thread) -.-&gt; s7(socket4)end</code></pre><h5 id="âš ï¸-çº¿ç¨‹æ± ç‰ˆç¼ºç‚¹"><a href="#âš ï¸-çº¿ç¨‹æ± ç‰ˆç¼ºç‚¹" class="headerlink" title="âš ï¸ çº¿ç¨‹æ± ç‰ˆç¼ºç‚¹"></a>âš ï¸ çº¿ç¨‹æ± ç‰ˆç¼ºç‚¹</h5><ul><li>é˜»å¡æ¨¡å¼ä¸‹ï¼Œçº¿ç¨‹ä»…èƒ½å¤„ç†ä¸€ä¸ª socket è¿æ¥</li><li>ä»…é€‚åˆçŸ­è¿æ¥åœºæ™¯</li></ul><h5 id="selector-ç‰ˆè®¾è®¡"><a href="#selector-ç‰ˆè®¾è®¡" class="headerlink" title="selector ç‰ˆè®¾è®¡"></a>selector ç‰ˆè®¾è®¡</h5><p>selector çš„ä½œç”¨å°±æ˜¯é…åˆä¸€ä¸ªçº¿ç¨‹æ¥ç®¡ç†å¤šä¸ª channelï¼Œè·å–è¿™äº› channel ä¸Šå‘ç”Ÿçš„äº‹ä»¶ï¼Œè¿™äº› channel å·¥ä½œåœ¨éé˜»å¡æ¨¡å¼ä¸‹ï¼Œä¸ä¼šè®©çº¿ç¨‹åŠæ­»åœ¨ä¸€ä¸ª channel ä¸Šã€‚é€‚åˆè¿æ¥æ•°ç‰¹åˆ«å¤šï¼Œä½†æµé‡ä½çš„åœºæ™¯ï¼ˆlow trafficï¼‰</p><pre><code class=" mermaid">graph TDsubgraph selector ç‰ˆthread --&gt; selectorselector --&gt; c1(channel)selector --&gt; c2(channel)selector --&gt; c3(channel)end</code></pre><p>è°ƒç”¨ selector çš„ select() ä¼šé˜»å¡ç›´åˆ° channel å‘ç”Ÿäº†è¯»å†™å°±ç»ªäº‹ä»¶ï¼Œè¿™äº›äº‹ä»¶å‘ç”Ÿï¼Œselect æ–¹æ³•å°±ä¼šè¿”å›è¿™äº›äº‹ä»¶äº¤ç»™ thread æ¥å¤„ç†</p><h3 id="2-ByteBuffer"><a href="#2-ByteBuffer" class="headerlink" title="2.ByteBuffer"></a>2.ByteBuffer</h3><p>æœ‰ä¸€æ™®é€šæ–‡æœ¬æ–‡ä»¶ data.txtï¼Œå†…å®¹ä¸º</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">1234567890abcd<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ FileChannel æ¥è¯»å–æ–‡ä»¶å†…å®¹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Slf4j</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ChannelDemo1</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-keyword">try</span> (<span class="hljs-type">RandomAccessFile</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RandomAccessFile</span>(<span class="hljs-string">&quot;helloword/data.txt&quot;</span>, <span class="hljs-string">&quot;rw&quot;</span>)) &#123;<br>            <span class="hljs-type">FileChannel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> file.getChannel();<br>            <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">buffer</span> <span class="hljs-operator">=</span> ByteBuffer.allocate(<span class="hljs-number">10</span>);<br>            <span class="hljs-keyword">do</span> &#123;<br>                <span class="hljs-comment">// å‘ buffer å†™å…¥</span><br>                <span class="hljs-type">int</span> <span class="hljs-variable">len</span> <span class="hljs-operator">=</span> channel.read(buffer);<br>                log.debug(<span class="hljs-string">&quot;è¯»åˆ°å­—èŠ‚æ•°ï¼š&#123;&#125;&quot;</span>, len);<br>                <span class="hljs-keyword">if</span> (len == -<span class="hljs-number">1</span>) &#123;<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>                <span class="hljs-comment">// åˆ‡æ¢ buffer è¯»æ¨¡å¼</span><br>                buffer.flip();<br>                <span class="hljs-keyword">while</span>(buffer.hasRemaining()) &#123;<br>                    log.debug(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, (<span class="hljs-type">char</span>)buffer.get());<br>                &#125;<br>                <span class="hljs-comment">// åˆ‡æ¢ buffer å†™æ¨¡å¼</span><br>                buffer.clear();<br>            &#125; <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-number">10</span>:<span class="hljs-number">39</span>:<span class="hljs-number">03</span> <span class="hljs-selector-attr">[DEBUG]</span> <span class="hljs-selector-attr">[main]</span> c<span class="hljs-selector-class">.i</span><span class="hljs-selector-class">.n</span><span class="hljs-selector-class">.ChannelDemo1</span> - è¯»åˆ°å­—èŠ‚æ•°ï¼š<span class="hljs-number">10</span><br><span class="hljs-number">10</span>:<span class="hljs-number">39</span>:<span class="hljs-number">03</span> <span class="hljs-selector-attr">[DEBUG]</span> <span class="hljs-selector-attr">[main]</span> c<span class="hljs-selector-class">.i</span><span class="hljs-selector-class">.n</span><span class="hljs-selector-class">.ChannelDemo1</span> - <span class="hljs-number">1</span><br><span class="hljs-number">10</span>:<span class="hljs-number">39</span>:<span class="hljs-number">03</span> <span class="hljs-selector-attr">[DEBUG]</span> <span class="hljs-selector-attr">[main]</span> c<span class="hljs-selector-class">.i</span><span class="hljs-selector-class">.n</span><span class="hljs-selector-class">.ChannelDemo1</span> - <span class="hljs-number">2</span><br><span class="hljs-number">10</span>:<span class="hljs-number">39</span>:<span class="hljs-number">03</span> <span class="hljs-selector-attr">[DEBUG]</span> <span class="hljs-selector-attr">[main]</span> c<span class="hljs-selector-class">.i</span><span class="hljs-selector-class">.n</span><span class="hljs-selector-class">.ChannelDemo1</span> - <span class="hljs-number">3</span><br><span class="hljs-number">10</span>:<span class="hljs-number">39</span>:<span class="hljs-number">03</span> <span class="hljs-selector-attr">[DEBUG]</span> <span class="hljs-selector-attr">[main]</span> c<span class="hljs-selector-class">.i</span><span class="hljs-selector-class">.n</span><span class="hljs-selector-class">.ChannelDemo1</span> - <span class="hljs-number">4</span><br><span class="hljs-number">10</span>:<span class="hljs-number">39</span>:<span class="hljs-number">03</span> <span class="hljs-selector-attr">[DEBUG]</span> <span class="hljs-selector-attr">[main]</span> c<span class="hljs-selector-class">.i</span><span class="hljs-selector-class">.n</span><span class="hljs-selector-class">.ChannelDemo1</span> - <span class="hljs-number">5</span><br><span class="hljs-number">10</span>:<span class="hljs-number">39</span>:<span class="hljs-number">03</span> <span class="hljs-selector-attr">[DEBUG]</span> <span class="hljs-selector-attr">[main]</span> c<span class="hljs-selector-class">.i</span><span class="hljs-selector-class">.n</span><span class="hljs-selector-class">.ChannelDemo1</span> - <span class="hljs-number">6</span><br><span class="hljs-number">10</span>:<span class="hljs-number">39</span>:<span class="hljs-number">03</span> <span class="hljs-selector-attr">[DEBUG]</span> <span class="hljs-selector-attr">[main]</span> c<span class="hljs-selector-class">.i</span><span class="hljs-selector-class">.n</span><span class="hljs-selector-class">.ChannelDemo1</span> - <span class="hljs-number">7</span><br><span class="hljs-number">10</span>:<span class="hljs-number">39</span>:<span class="hljs-number">03</span> <span class="hljs-selector-attr">[DEBUG]</span> <span class="hljs-selector-attr">[main]</span> c<span class="hljs-selector-class">.i</span><span class="hljs-selector-class">.n</span><span class="hljs-selector-class">.ChannelDemo1</span> - <span class="hljs-number">8</span><br><span class="hljs-number">10</span>:<span class="hljs-number">39</span>:<span class="hljs-number">03</span> <span class="hljs-selector-attr">[DEBUG]</span> <span class="hljs-selector-attr">[main]</span> c<span class="hljs-selector-class">.i</span><span class="hljs-selector-class">.n</span><span class="hljs-selector-class">.ChannelDemo1</span> - <span class="hljs-number">9</span><br><span class="hljs-number">10</span>:<span class="hljs-number">39</span>:<span class="hljs-number">03</span> <span class="hljs-selector-attr">[DEBUG]</span> <span class="hljs-selector-attr">[main]</span> c<span class="hljs-selector-class">.i</span><span class="hljs-selector-class">.n</span><span class="hljs-selector-class">.ChannelDemo1</span> - <span class="hljs-number">0</span><br><span class="hljs-number">10</span>:<span class="hljs-number">39</span>:<span class="hljs-number">03</span> <span class="hljs-selector-attr">[DEBUG]</span> <span class="hljs-selector-attr">[main]</span> c<span class="hljs-selector-class">.i</span><span class="hljs-selector-class">.n</span><span class="hljs-selector-class">.ChannelDemo1</span> - è¯»åˆ°å­—èŠ‚æ•°ï¼š<span class="hljs-number">4</span><br><span class="hljs-number">10</span>:<span class="hljs-number">39</span>:<span class="hljs-number">03</span> <span class="hljs-selector-attr">[DEBUG]</span> <span class="hljs-selector-attr">[main]</span> c<span class="hljs-selector-class">.i</span><span class="hljs-selector-class">.n</span><span class="hljs-selector-class">.ChannelDemo1</span> - <span class="hljs-selector-tag">a</span><br><span class="hljs-number">10</span>:<span class="hljs-number">39</span>:<span class="hljs-number">03</span> <span class="hljs-selector-attr">[DEBUG]</span> <span class="hljs-selector-attr">[main]</span> c<span class="hljs-selector-class">.i</span><span class="hljs-selector-class">.n</span><span class="hljs-selector-class">.ChannelDemo1</span> - <span class="hljs-selector-tag">b</span><br><span class="hljs-number">10</span>:<span class="hljs-number">39</span>:<span class="hljs-number">03</span> <span class="hljs-selector-attr">[DEBUG]</span> <span class="hljs-selector-attr">[main]</span> c<span class="hljs-selector-class">.i</span><span class="hljs-selector-class">.n</span><span class="hljs-selector-class">.ChannelDemo1</span> - c<br><span class="hljs-number">10</span>:<span class="hljs-number">39</span>:<span class="hljs-number">03</span> <span class="hljs-selector-attr">[DEBUG]</span> <span class="hljs-selector-attr">[main]</span> c<span class="hljs-selector-class">.i</span><span class="hljs-selector-class">.n</span><span class="hljs-selector-class">.ChannelDemo1</span> - d<br><span class="hljs-number">10</span>:<span class="hljs-number">39</span>:<span class="hljs-number">03</span> <span class="hljs-selector-attr">[DEBUG]</span> <span class="hljs-selector-attr">[main]</span> c<span class="hljs-selector-class">.i</span><span class="hljs-selector-class">.n</span><span class="hljs-selector-class">.ChannelDemo1</span> - è¯»åˆ°å­—èŠ‚æ•°ï¼š-<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h4 id="2-1-ByteBuffer-æ­£ç¡®ä½¿ç”¨å§¿åŠ¿"><a href="#2-1-ByteBuffer-æ­£ç¡®ä½¿ç”¨å§¿åŠ¿" class="headerlink" title="2.1  ByteBuffer æ­£ç¡®ä½¿ç”¨å§¿åŠ¿"></a>2.1  ByteBuffer æ­£ç¡®ä½¿ç”¨å§¿åŠ¿</h4><ol><li>å‘ buffer å†™å…¥æ•°æ®ï¼Œä¾‹å¦‚è°ƒç”¨ channel.read(buffer)</li><li>*è°ƒç”¨ flip() åˆ‡æ¢è‡³<strong>è¯»æ¨¡å¼</strong></li><li>ä» buffer è¯»å–æ•°æ®ï¼Œä¾‹å¦‚è°ƒç”¨ buffer.get()</li><li>*è°ƒç”¨ clear() æˆ– compact() åˆ‡æ¢è‡³<strong>å†™æ¨¡å¼</strong></li><li>é‡å¤ 1~4 æ­¥éª¤</li></ol><blockquote><p>æ³¨æ„ï¼šè¿™é‡Œåªè¦è®°å¾—ç”¨flipæ˜¯è¯»æ¨¡å¼ï¼Œclear,compactæ˜¯å†™æ¨¡å¼å³å¯ï¼Œ</p><p>ä¸‹é¢å°èŠ‚æ˜¯<strong>è®²è§£</strong>ã€‚</p></blockquote><h4 id="2-2-ByteBuffer-ç»“æ„"><a href="#2-2-ByteBuffer-ç»“æ„" class="headerlink" title="2.2 ByteBuffer ç»“æ„"></a>2.2 ByteBuffer ç»“æ„</h4><p>ByteBuffer æœ‰ä»¥ä¸‹é‡è¦å±æ€§</p><ul><li>capacity</li><li>position</li><li>limit</li></ul><p>ä¸€å¼€å§‹</p><p><img src="/D:/ç¬”è®°\myblog\whiteRabbit-me.github.io\source_posts\netty\0021.png"></p><p>å†™æ¨¡å¼ä¸‹ï¼Œposition æ˜¯å†™å…¥ä½ç½®ï¼Œlimit ç­‰äºå®¹é‡ï¼Œä¸‹å›¾è¡¨ç¤ºå†™å…¥äº† 4 ä¸ªå­—èŠ‚åçš„çŠ¶æ€</p><p><img src="/D:/ç¬”è®°\myblog\whiteRabbit-me.github.io\source_posts\netty\0018.png"></p><p>flip åŠ¨ä½œå‘ç”Ÿåï¼Œposition åˆ‡æ¢ä¸ºè¯»å–ä½ç½®ï¼Œlimit åˆ‡æ¢ä¸ºè¯»å–é™åˆ¶</p><p><img src="/D:/ç¬”è®°\myblog\whiteRabbit-me.github.io\source_posts\netty\0019.png"></p><p>è¯»å– 4 ä¸ªå­—èŠ‚åï¼ŒçŠ¶æ€</p><p><img src="/D:/ç¬”è®°\myblog\whiteRabbit-me.github.io\source_posts\netty\0020.png"></p><p>clear åŠ¨ä½œå‘ç”Ÿåï¼ŒçŠ¶æ€</p><p><img src="/D:/ç¬”è®°\myblog\whiteRabbit-me.github.io\source_posts\netty\0021.png"></p><p>compact æ–¹æ³•ï¼Œæ˜¯æŠŠæœªè¯»å®Œçš„éƒ¨åˆ†å‘å‰å‹ç¼©ï¼Œç„¶ååˆ‡æ¢è‡³å†™æ¨¡å¼</p><p><img src="/D:/ç¬”è®°\myblog\whiteRabbit-me.github.io\source_posts\netty\0022.png"></p><h5 id="ğŸ’¡-è°ƒè¯•å·¥å…·ç±»"><a href="#ğŸ’¡-è°ƒè¯•å·¥å…·ç±»" class="headerlink" title="ğŸ’¡ è°ƒè¯•å·¥å…·ç±»"></a>ğŸ’¡ è°ƒè¯•å·¥å…·ç±»</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ByteBufferUtil</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">char</span>[] BYTE2CHAR = <span class="hljs-keyword">new</span> <span class="hljs-title class_">char</span>[<span class="hljs-number">256</span>];<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">char</span>[] HEXDUMP_TABLE = <span class="hljs-keyword">new</span> <span class="hljs-title class_">char</span>[<span class="hljs-number">256</span> * <span class="hljs-number">4</span>];<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String[] HEXPADDING = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[<span class="hljs-number">16</span>];<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String[] HEXDUMP_ROWPREFIXES = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[<span class="hljs-number">65536</span> &gt;&gt;&gt; <span class="hljs-number">4</span>];<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String[] BYTE2HEX = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[<span class="hljs-number">256</span>];<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String[] BYTEPADDING = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[<span class="hljs-number">16</span>];<br><br>    <span class="hljs-keyword">static</span> &#123;<br>        <span class="hljs-keyword">final</span> <span class="hljs-type">char</span>[] DIGITS = <span class="hljs-string">&quot;0123456789abcdef&quot;</span>.toCharArray();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">256</span>; i++) &#123;<br>            HEXDUMP_TABLE[i &lt;&lt; <span class="hljs-number">1</span>] = DIGITS[i &gt;&gt;&gt; <span class="hljs-number">4</span> &amp; <span class="hljs-number">0x0F</span>];<br>            HEXDUMP_TABLE[(i &lt;&lt; <span class="hljs-number">1</span>) + <span class="hljs-number">1</span>] = DIGITS[i &amp; <span class="hljs-number">0x0F</span>];<br>        &#125;<br><br>        <span class="hljs-type">int</span> i;<br><br>        <span class="hljs-comment">// Generate the lookup table for hex dump paddings</span><br>        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; HEXPADDING.length; i++) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">padding</span> <span class="hljs-operator">=</span> HEXPADDING.length - i;<br>            <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">buf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>(padding * <span class="hljs-number">3</span>);<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; padding; j++) &#123;<br>                buf.append(<span class="hljs-string">&quot;   &quot;</span>);<br>            &#125;<br>            HEXPADDING[i] = buf.toString();<br>        &#125;<br><br>        <span class="hljs-comment">// Generate the lookup table for the start-offset header in each row (up to 64KiB).</span><br>        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; HEXDUMP_ROWPREFIXES.length; i++) &#123;<br>            <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">buf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>(<span class="hljs-number">12</span>);<br>            buf.append(NEWLINE);<br>            buf.append(Long.toHexString(i &lt;&lt; <span class="hljs-number">4</span> &amp; <span class="hljs-number">0xFFFFFFFFL</span> | <span class="hljs-number">0x100000000L</span>));<br>            buf.setCharAt(buf.length() - <span class="hljs-number">9</span>, <span class="hljs-string">&#x27;|&#x27;</span>);<br>            buf.append(<span class="hljs-string">&#x27;|&#x27;</span>);<br>            HEXDUMP_ROWPREFIXES[i] = buf.toString();<br>        &#125;<br><br>        <span class="hljs-comment">// Generate the lookup table for byte-to-hex-dump conversion</span><br>        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; BYTE2HEX.length; i++) &#123;<br>            BYTE2HEX[i] = <span class="hljs-string">&#x27; &#x27;</span> + StringUtil.byteToHexStringPadded(i);<br>        &#125;<br><br>        <span class="hljs-comment">// Generate the lookup table for byte dump paddings</span><br>        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; BYTEPADDING.length; i++) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">padding</span> <span class="hljs-operator">=</span> BYTEPADDING.length - i;<br>            <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">buf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>(padding);<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; padding; j++) &#123;<br>                buf.append(<span class="hljs-string">&#x27; &#x27;</span>);<br>            &#125;<br>            BYTEPADDING[i] = buf.toString();<br>        &#125;<br><br>        <span class="hljs-comment">// Generate the lookup table for byte-to-char conversion</span><br>        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; BYTE2CHAR.length; i++) &#123;<br>            <span class="hljs-keyword">if</span> (i &lt;= <span class="hljs-number">0x1f</span> || i &gt;= <span class="hljs-number">0x7f</span>) &#123;<br>                BYTE2CHAR[i] = <span class="hljs-string">&#x27;.&#x27;</span>;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                BYTE2CHAR[i] = (<span class="hljs-type">char</span>) i;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ‰“å°æ‰€æœ‰å†…å®¹</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> buffer</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">debugAll</span><span class="hljs-params">(ByteBuffer buffer)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">oldlimit</span> <span class="hljs-operator">=</span> buffer.limit();<br>        buffer.limit(buffer.capacity());<br>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">origin</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>(<span class="hljs-number">256</span>);<br>        appendPrettyHexDump(origin, buffer, <span class="hljs-number">0</span>, buffer.capacity());<br>        System.out.println(<span class="hljs-string">&quot;+--------+-------------------- all ------------------------+----------------+&quot;</span>);<br>        System.out.printf(<span class="hljs-string">&quot;position: [%d], limit: [%d]\n&quot;</span>, buffer.position(), oldlimit);<br>        System.out.println(origin);<br>        buffer.limit(oldlimit);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ‰“å°å¯è¯»å–å†…å®¹</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> buffer</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">debugRead</span><span class="hljs-params">(ByteBuffer buffer)</span> &#123;<br>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">builder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>(<span class="hljs-number">256</span>);<br>        appendPrettyHexDump(builder, buffer, buffer.position(), buffer.limit() - buffer.position());<br>        System.out.println(<span class="hljs-string">&quot;+--------+-------------------- read -----------------------+----------------+&quot;</span>);<br>        System.out.printf(<span class="hljs-string">&quot;position: [%d], limit: [%d]\n&quot;</span>, buffer.position(), buffer.limit());<br>        System.out.println(builder);<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">appendPrettyHexDump</span><span class="hljs-params">(StringBuilder dump, ByteBuffer buf, <span class="hljs-type">int</span> offset, <span class="hljs-type">int</span> length)</span> &#123;<br>        <span class="hljs-keyword">if</span> (isOutOfBounds(offset, length, buf.capacity())) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IndexOutOfBoundsException</span>(<br>                    <span class="hljs-string">&quot;expected: &quot;</span> + <span class="hljs-string">&quot;0 &lt;= offset(&quot;</span> + offset + <span class="hljs-string">&quot;) &lt;= offset + length(&quot;</span> + length<br>                            + <span class="hljs-string">&quot;) &lt;= &quot;</span> + <span class="hljs-string">&quot;buf.capacity(&quot;</span> + buf.capacity() + <span class="hljs-string">&#x27;)&#x27;</span>);<br>        &#125;<br>        <span class="hljs-keyword">if</span> (length == <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        dump.append(<br>                <span class="hljs-string">&quot;         +-------------------------------------------------+&quot;</span> +<br>                        NEWLINE + <span class="hljs-string">&quot;         |  0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f |&quot;</span> +<br>                        NEWLINE + <span class="hljs-string">&quot;+--------+-------------------------------------------------+----------------+&quot;</span>);<br><br>        <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">startIndex</span> <span class="hljs-operator">=</span> offset;<br>        <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">fullRows</span> <span class="hljs-operator">=</span> length &gt;&gt;&gt; <span class="hljs-number">4</span>;<br>        <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">remainder</span> <span class="hljs-operator">=</span> length &amp; <span class="hljs-number">0xF</span>;<br><br>        <span class="hljs-comment">// Dump the rows which have 16 bytes.</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">row</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; row &lt; fullRows; row++) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">rowStartIndex</span> <span class="hljs-operator">=</span> (row &lt;&lt; <span class="hljs-number">4</span>) + startIndex;<br><br>            <span class="hljs-comment">// Per-row prefix.</span><br>            appendHexDumpRowPrefix(dump, row, rowStartIndex);<br><br>            <span class="hljs-comment">// Hex dump</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">rowEndIndex</span> <span class="hljs-operator">=</span> rowStartIndex + <span class="hljs-number">16</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> rowStartIndex; j &lt; rowEndIndex; j++) &#123;<br>                dump.append(BYTE2HEX[getUnsignedByte(buf, j)]);<br>            &#125;<br>            dump.append(<span class="hljs-string">&quot; |&quot;</span>);<br><br>            <span class="hljs-comment">// ASCII dump</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> rowStartIndex; j &lt; rowEndIndex; j++) &#123;<br>                dump.append(BYTE2CHAR[getUnsignedByte(buf, j)]);<br>            &#125;<br>            dump.append(<span class="hljs-string">&#x27;|&#x27;</span>);<br>        &#125;<br><br>        <span class="hljs-comment">// Dump the last row which has less than 16 bytes.</span><br>        <span class="hljs-keyword">if</span> (remainder != <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">rowStartIndex</span> <span class="hljs-operator">=</span> (fullRows &lt;&lt; <span class="hljs-number">4</span>) + startIndex;<br>            appendHexDumpRowPrefix(dump, fullRows, rowStartIndex);<br><br>            <span class="hljs-comment">// Hex dump</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">rowEndIndex</span> <span class="hljs-operator">=</span> rowStartIndex + remainder;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> rowStartIndex; j &lt; rowEndIndex; j++) &#123;<br>                dump.append(BYTE2HEX[getUnsignedByte(buf, j)]);<br>            &#125;<br>            dump.append(HEXPADDING[remainder]);<br>            dump.append(<span class="hljs-string">&quot; |&quot;</span>);<br><br>            <span class="hljs-comment">// Ascii dump</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> rowStartIndex; j &lt; rowEndIndex; j++) &#123;<br>                dump.append(BYTE2CHAR[getUnsignedByte(buf, j)]);<br>            &#125;<br>            dump.append(BYTEPADDING[remainder]);<br>            dump.append(<span class="hljs-string">&#x27;|&#x27;</span>);<br>        &#125;<br><br>        dump.append(NEWLINE +<br>                <span class="hljs-string">&quot;+--------+-------------------------------------------------+----------------+&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">appendHexDumpRowPrefix</span><span class="hljs-params">(StringBuilder dump, <span class="hljs-type">int</span> row, <span class="hljs-type">int</span> rowStartIndex)</span> &#123;<br>        <span class="hljs-keyword">if</span> (row &lt; HEXDUMP_ROWPREFIXES.length) &#123;<br>            dump.append(HEXDUMP_ROWPREFIXES[row]);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            dump.append(NEWLINE);<br>            dump.append(Long.toHexString(rowStartIndex &amp; <span class="hljs-number">0xFFFFFFFFL</span> | <span class="hljs-number">0x100000000L</span>));<br>            dump.setCharAt(dump.length() - <span class="hljs-number">9</span>, <span class="hljs-string">&#x27;|&#x27;</span>);<br>            dump.append(<span class="hljs-string">&#x27;|&#x27;</span>);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">short</span> <span class="hljs-title function_">getUnsignedByte</span><span class="hljs-params">(ByteBuffer buffer, <span class="hljs-type">int</span> index)</span> &#123;<br>        <span class="hljs-keyword">return</span> (<span class="hljs-type">short</span>) (buffer.get(index) &amp; <span class="hljs-number">0xFF</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2-3-ByteBuffer-å¸¸è§æ–¹æ³•"><a href="#2-3-ByteBuffer-å¸¸è§æ–¹æ³•" class="headerlink" title="2.3 ByteBuffer å¸¸è§æ–¹æ³•"></a>2.3 ByteBuffer å¸¸è§æ–¹æ³•</h4><h5 id="åˆ†é…ç©ºé—´"><a href="#åˆ†é…ç©ºé—´" class="headerlink" title="åˆ†é…ç©ºé—´"></a>åˆ†é…ç©ºé—´</h5><p>å¯ä»¥ä½¿ç”¨ allocate æ–¹æ³•ä¸º ByteBuffer åˆ†é…ç©ºé—´ï¼Œå…¶å®ƒ buffer ç±»ä¹Ÿæœ‰è¯¥æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Bytebuffer</span> <span class="hljs-variable">buf</span> <span class="hljs-operator">=</span> ByteBuffer.allocate(<span class="hljs-number">16</span>);  <span class="hljs-comment">//java å †å†…å­˜ï¼Œè¯»å†™æ•ˆç‡è¾ƒä½ï¼Œå—åˆ°GCçš„å½±å“</span><br><span class="hljs-type">Bytebuffer</span> <span class="hljs-variable">buf</span> <span class="hljs-operator">=</span>ByteBuffer.allocateDirect(<span class="hljs-number">16</span>) <span class="hljs-comment">//ç›´æ¥å†…å­˜ï¼Œè¯»å†™æ•ˆç‡é«˜(å°‘ä¸€æ¬¡æ‹·è´)ï¼Œä¸ä¼šå—GCå½±å“ï¼Œåˆ†é…å†…å­˜ä½ä¸‹ï¼Œä½¿ç”¨ä¸å½“oomï¼Œè¦åŠæ—¶é‡Šæ”¾å†…å­˜</span><br></code></pre></td></tr></table></figure><h5 id="å‘-buffer-å†™å…¥æ•°æ®"><a href="#å‘-buffer-å†™å…¥æ•°æ®" class="headerlink" title="å‘ buffer å†™å…¥æ•°æ®"></a>å‘ buffer å†™å…¥æ•°æ®</h5><p>æœ‰ä¸¤ç§åŠæ³•</p><ul><li>è°ƒç”¨ channel çš„ read æ–¹æ³•</li><li>è°ƒç”¨ buffer è‡ªå·±çš„ put æ–¹æ³•</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">int</span> <span class="hljs-variable">readBytes</span> <span class="hljs-operator">=</span> channel.read(buf);<br></code></pre></td></tr></table></figure><p>å’Œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">buf.put((<span class="hljs-type">byte</span>)<span class="hljs-number">127</span>);<br></code></pre></td></tr></table></figure><h5 id="ä»-buffer-è¯»å–æ•°æ®"><a href="#ä»-buffer-è¯»å–æ•°æ®" class="headerlink" title="ä» buffer è¯»å–æ•°æ®"></a>ä» buffer è¯»å–æ•°æ®</h5><p>åŒæ ·æœ‰ä¸¤ç§åŠæ³•</p><ul><li>è°ƒç”¨ channel çš„ write æ–¹æ³•</li><li>è°ƒç”¨ buffer è‡ªå·±çš„ get æ–¹æ³•</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">int</span> <span class="hljs-variable">writeBytes</span> <span class="hljs-operator">=</span> channel.write(buf);<br></code></pre></td></tr></table></figure><p>å’Œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">byte</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> buf.get();<br></code></pre></td></tr></table></figure><p>get æ–¹æ³•ä¼šè®© position è¯»æŒ‡é’ˆå‘åèµ°ï¼Œå¦‚æœæƒ³é‡å¤è¯»å–æ•°æ®</p><ul><li>å¯ä»¥è°ƒç”¨ <code>rewind </code>æ–¹æ³•å°† position é‡æ–°ç½®ä¸º 0</li><li>æˆ–è€…è°ƒç”¨<code>get(int i)</code>æ–¹æ³•è·å–ç´¢å¼• i çš„å†…å®¹ï¼Œ<strong>å®ƒä¸ä¼šç§»åŠ¨è¯»æŒ‡é’ˆ</strong></li></ul><h5 id="mark-å’Œ-reset"><a href="#mark-å’Œ-reset" class="headerlink" title="mark å’Œ reset"></a>mark å’Œ reset</h5><p>mark æ˜¯åœ¨è¯»å–æ—¶ï¼Œåšä¸€ä¸ªæ ‡è®°ï¼Œå³ä½¿ position æ”¹å˜ï¼Œåªè¦è°ƒç”¨ reset å°±èƒ½å›åˆ° mark çš„ä½ç½®</p><blockquote><p><strong>æ³¨æ„</strong></p><p><strong>rewind å’Œ flip éƒ½ä¼šæ¸…é™¤ mark ä½ç½®</strong></p></blockquote><h5 id="å­—ç¬¦ä¸²ä¸-ByteBuffer-äº’è½¬"><a href="#å­—ç¬¦ä¸²ä¸-ByteBuffer-äº’è½¬" class="headerlink" title="å­—ç¬¦ä¸²ä¸ ByteBuffer äº’è½¬"></a>å­—ç¬¦ä¸²ä¸ ByteBuffer äº’è½¬</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//1.å­—ç¬¦ä¸²è½¬byteBuffer</span><br>    ByteBuffer buffer1=ByteBuffer.allocate(<span class="hljs-number">16</span>);<br>buffer1.put(<span class="hljs-string">&quot;hello&quot;</span>.getrBytes());<br><span class="hljs-comment">//è¿™ä¸ªæ³¨æ„ï¼Œè¿™ç§æ–¹å¼ByteBufferè¿˜æ˜¯å†™æ¨¡å¼ï¼Œéœ€è¦åˆ©ç”¨flipå˜æˆè¯»æ¨¡å¼æ‰èƒ½è¯»å–æ•°æ®</span><br><span class="hljs-comment">//2.wrap åŒ…è£… è¿™ä¸ªç›´æ¥å°±æ˜¯è¯»æ¨¡å¼ï¼Œç›´æ¥è¯»å–</span><br>   BVyteBuffer buffer3=ByteBuffer.wrap(<span class="hljs-string">&quot;hello&quot;</span>.getBytes());<br><span class="hljs-comment">//3.è¿™ä¸ªç›´æ¥å°±æ˜¯è¯»æ¨¡å¼ï¼Œç›´æ¥è¯»å–</span><br>    <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">buffer1</span> <span class="hljs-operator">=</span> StandardCharsets.UTF_8.encode(<span class="hljs-string">&quot;ä½ å¥½&quot;</span>);<br><span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">buffer2</span> <span class="hljs-operator">=</span> Charset.forName(<span class="hljs-string">&quot;utf-8&quot;</span>).encode(<span class="hljs-string">&quot;ä½ å¥½&quot;</span>);<br><br>debug(buffer1);<br>debug(buffer2);<br><span class="hljs-comment">//ByteBufferè½¬String</span><br><span class="hljs-type">CharBuffer</span> <span class="hljs-variable">buffer3</span> <span class="hljs-operator">=</span> StandardCharsets.UTF_8.decode(buffer1);<br>System.out.println(buffer3.getClass());<br>System.out.println(buffer3.toString());<br></code></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-code">         +-------------------------------------------------+</span><br><span class="hljs-section">         |  0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f |</span><br><span class="hljs-section">+--------+-------------------------------------------------+----------------+</span><br><span class="hljs-section">|00000000| e4 bd a0 e5 a5 bd                               |......          |</span><br><span class="hljs-section">+--------+-------------------------------------------------+----------------+</span><br><span class="hljs-code">         +-------------------------------------------------+</span><br><span class="hljs-section">         |  0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f |</span><br><span class="hljs-section">+--------+-------------------------------------------------+----------------+</span><br><span class="hljs-section">|00000000| e4 bd a0 e5 a5 bd                               |......          |</span><br><span class="hljs-section">+--------+-------------------------------------------------+----------------+</span><br>class java.nio.HeapCharBuffer<br>ä½ å¥½<br></code></pre></td></tr></table></figure><h5 id="âš ï¸-Buffer-çš„çº¿ç¨‹å®‰å…¨"><a href="#âš ï¸-Buffer-çš„çº¿ç¨‹å®‰å…¨" class="headerlink" title="âš ï¸ Buffer çš„çº¿ç¨‹å®‰å…¨"></a>âš ï¸ Buffer çš„çº¿ç¨‹å®‰å…¨</h5><blockquote><p>Buffer æ˜¯<strong>éçº¿ç¨‹å®‰å…¨çš„</strong></p></blockquote><h4 id="2-4-Scattering-Reads"><a href="#2-4-Scattering-Reads" class="headerlink" title="2.4 Scattering Reads"></a>2.4 Scattering Reads</h4><p>åˆ†æ•£è¯»å–ï¼Œæœ‰ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ 3parts.txt</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">onetwothree</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨å¦‚ä¸‹æ–¹å¼è¯»å–ï¼Œå¯ä»¥å°†æ•°æ®å¡«å……è‡³å¤šä¸ª buffer</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">try</span> (<span class="hljs-type">RandomAccessFile</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RandomAccessFile</span>(<span class="hljs-string">&quot;helloword/3parts.txt&quot;</span>, <span class="hljs-string">&quot;rw&quot;</span>)) &#123;<br>    <span class="hljs-type">FileChannel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> file.getChannel();<br>    <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> ByteBuffer.allocate(<span class="hljs-number">3</span>);<br>    <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> ByteBuffer.allocate(<span class="hljs-number">3</span>);<br>    <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> ByteBuffer.allocate(<span class="hljs-number">5</span>);<br>    channel.read(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteBuffer</span>[]&#123;a, b, c&#125;);<br>    a.flip();<br>    b.flip();<br>    c.flip();<br>    debug(a);<br>    debug(b);<br>    debug(c);<br>&#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>    e.printStackTrace();<br>&#125;<br></code></pre></td></tr></table></figure><p>ç»“æœ</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-code">         +-------------------------------------------------+</span><br><span class="hljs-section">         |  0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f |</span><br><span class="hljs-section">+--------+-------------------------------------------------+----------------+</span><br><span class="hljs-section">|00000000| 6f 6e 65                                        |one             |</span><br><span class="hljs-section">+--------+-------------------------------------------------+----------------+</span><br><span class="hljs-code">         +-------------------------------------------------+</span><br><span class="hljs-section">         |  0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f |</span><br><span class="hljs-section">+--------+-------------------------------------------------+----------------+</span><br><span class="hljs-section">|00000000| 74 77 6f                                        |two             |</span><br><span class="hljs-section">+--------+-------------------------------------------------+----------------+</span><br><span class="hljs-code">         +-------------------------------------------------+</span><br><span class="hljs-section">         |  0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f |</span><br><span class="hljs-section">+--------+-------------------------------------------------+----------------+</span><br><span class="hljs-section">|00000000| 74 68 72 65 65                                  |three           |</span><br><span class="hljs-section">+--------+-------------------------------------------------+----------------+</span><br></code></pre></td></tr></table></figure><h4 id="2-5-Gathering-Writes"><a href="#2-5-Gathering-Writes" class="headerlink" title="2.5 Gathering Writes"></a>2.5 Gathering Writes</h4>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Linuxæ–‡ç« </title>
    <link href="/2024/09/12/Linux%E5%85%A5%E9%97%A8/"/>
    <url>/2024/09/12/Linux%E5%85%A5%E9%97%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="Liunx"><a href="#Liunx" class="headerlink" title="Liunx"></a>Liunx</h1><h2 id="1-ç½‘ç»œè¿æ¥ä¸‰ç§æ–¹å¼"><a href="#1-ç½‘ç»œè¿æ¥ä¸‰ç§æ–¹å¼" class="headerlink" title="1.ç½‘ç»œè¿æ¥ä¸‰ç§æ–¹å¼"></a>1.ç½‘ç»œè¿æ¥ä¸‰ç§æ–¹å¼</h2><p>1.æ¡¥æ¥æ¨¡å¼ï¼Œè™šæ‹Ÿç³»ç»Ÿå¯ä»¥å’Œå¤–éƒ¨ç³»ç»Ÿé€šè®¯ï¼Œä½†æ˜¯å®¹æ˜“é€ æˆIPå†²çª</p><p>2.NATæ¨¡å¼ï¼Œç½‘ç»œåœ°å€è½¬æ¢æ¨¡å¼ã€‚è™šæ‹Ÿç³»ç»Ÿå¯ä»¥å’Œå¤–éƒ¨ç³»ç»Ÿé€šè®¯ï¼Œä¸é€ æˆIPå†²çª</p><p>3.ä¸»æœºæ¨¡å¼:ç‹¬ç«‹çš„ç³»ç»Ÿ ï¼ˆä¸ä¸å¤–ç•Œç½‘ç»œè¿æ¥ï¼Œæƒ³æ€ä¹ˆé…ï¼Œæ€ä¹ˆé…ï¼‰</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240902111447613.png" class title="image-20240902111447613"><h2 id="2-è™šæ‹Ÿæœºå…‹éš†"><a href="#2-è™šæ‹Ÿæœºå…‹éš†" class="headerlink" title="2.è™šæ‹Ÿæœºå…‹éš†"></a>2.è™šæ‹Ÿæœºå…‹éš†</h2><blockquote><p>è¿ç§»è™šæ‹Ÿæœº</p></blockquote><p>æ–¹å¼ä¸€ï¼šç›´æ¥æ‰¾åˆ°ä½ å®‰è£…çš„è™šæ‹Ÿæœºï¼Œå¤åˆ¶è¿™ä¸ªç›®å½•åˆ°æ–°çš„ç¯å¢ƒï¼Œå†é€šè¿‡vmæ‰“å¼€å³å¯ï¼ˆeasyï¼‰</p><p>æ–¹å¼äºŒï¼švmå…‹éš†ï¼Œéœ€è¦å…ˆå…³é—­Linuxç³»ç»Ÿã€‚ï¼ˆå³å‡»ä½ å…‹éš†çš„è™šæ‹Ÿæœºâ€”ã€‹ç®¡ç†â€”-&gt;å…‹éš†ï¼Œæ ¹æ®æ­¥éª¤å®Œæˆï¼ˆé‡‡ç”¨å®Œå…¨å…‹éš†çš„æ–¹å¼ï¼Œä¸é‡‡ç”¨å¼•ç”¨çš„æ–¹å¼ï¼‰ï¼‰</p><h2 id="3-è™šæ‹Ÿæœºå¿«ç…§"><a href="#3-è™šæ‹Ÿæœºå¿«ç…§" class="headerlink" title="3.è™šæ‹Ÿæœºå¿«ç…§"></a>3.è™šæ‹Ÿæœºå¿«ç…§</h2><blockquote><p>å°†ç³»ç»Ÿå›åˆ°åˆå§‹çŠ¶æ€æˆ–ä½ ä¿å­˜çš„çŠ¶æ€</p></blockquote><p>å³å‡»ä½ çš„è™šæ‹Ÿæœºâ€”ã€‹å¿«ç…§â€”ã€‹æ‹æ‘„å¿«ç…§ï¼ˆå¿«ç…§ç®¡ç†å¯ä»¥æŸ¥çœ‹ä½ æ¯æ¬¡çš„å¿«ç…§ï¼‰</p><h2 id="4-è™šæ‹Ÿæœºçš„è¿ç§»"><a href="#4-è™šæ‹Ÿæœºçš„è¿ç§»" class="headerlink" title="4.è™šæ‹Ÿæœºçš„è¿ç§»"></a>4.è™šæ‹Ÿæœºçš„è¿ç§»</h2><blockquote><p>è¿ç§»å’Œå…‹éš†æ˜¯ä¸€æ ·çš„ï¼ˆæ‰¾å¯¹å®‰è£…ç›®å½•å³å¯ï¼‰</p></blockquote><h2 id="5-vmtoolsçš„å®‰è£…"><a href="#5-vmtoolsçš„å®‰è£…" class="headerlink" title="5.vmtoolsçš„å®‰è£…"></a>5.vmtoolsçš„å®‰è£…</h2><p><strong>åœ¨linuxä¸­å®‰è£…</strong></p><blockquote><p>å®‰è£…vmtoolsçš„æ­¥éª¤</p><p>1.è¿›å…¥centosç‚¹å‡»vmèœå•çš„-&gt;install vmware toolscentos</p><p>2.ä¼šå‡ºç°ä¸€ä¸ªvmçš„å®‰è£…åŒ…ï¼Œxx.tar.gz</p><p>3.æ‹·è´åˆ° &#x2F;opt</p><p>4.ä½¿ç”¨è§£å‹å‘½ä»¤ tar, å¾—åˆ°ä¸€ä¸ªå®‰è£…æ–‡ä»¶</p><p>5.è¿›å…¥è¯¥vmè§£å‹çš„ç›®å½•ï¼Œ&#x2F;opt ç›®å½•ä¸‹</p><p>6.å®‰è£….&#x2F;vmware-install.pl</p><p>7.å…¨éƒ¨ä½¿ç”¨é»˜è®¤è®¾ç½®å³å¯ï¼Œå°±å¯ä»¥å®‰è£…æˆåŠŸ</p><p>æ³¨æ„:å®‰è£…vmtoolséœ€è¦æœ‰gcc.</p></blockquote><p><strong>åœ¨vmä¸­è®¾ç½®</strong></p><blockquote><p>åŸºæœ¬ä»‹ç»</p><p>â€‹ä¸ºäº†æ–¹ä¾¿ï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªå…±äº«æ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚d:&#x2F;myshare</p><p>å…·ä½“æ­¥éª¤<br>    1.å·¥èœå•-&gt;vm-&gt;setting,å¦‚å›¾è®¾ç½®å³å¯æ³¨æ„:è®¾ç½®é€‰é¡¹ä¸ºalways enableè¿™æ ·å¯ä»¥è¯»å†™äº†</p><p>â€‹2.windowså’Œcentoså¯å…±äº« d:&#x2F;myshareç›®å½•å¯ä»¥è¯»å†™æ–‡ä»¶äº†</p><p>â€‹3.å…±äº«æ–‡ä»¶å¤¹åœ¨centosçš„&#x2F;mnt&#x2F;hgfs&#x2F;ä¸‹</p><p><strong>æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚è¯´æ˜</strong></p><p>â€‹windows å’Œ contos å°±å¯ä»¥å…±äº«æ–‡ä»¶äº†ï¼Œä½†æ˜¯åœ¨å®é™…å¼€å‘ä¸­ï¼Œæ–‡ä»¶çš„ä¸Šä¼ ä¸‹è½½æ˜¯éœ€è¦ä½¿ç”¨ è¿œç¨‹æ–¹å¼å®Œæˆçš„</p><p>è¿œç¨‹æ–¹å¼ç™»å½•ï¼Œå€ŸåŠ©ç¬¬ä¸‰æ–¹å·¥å…·xfrpç­‰</p></blockquote><h2 id="6-Linuxç›®å½•ç»“æ„"><a href="#6-Linuxç›®å½•ç»“æ„" class="headerlink" title="6.**Linuxç›®å½•ç»“æ„"></a>6.**Linuxç›®å½•ç»“æ„</h2><p>&#x2F;bin</p><p>&#x2F;sbin</p><p>&#x2F;home</p><p>&#x2F;root</p><p>&#x2F;lib</p><p>&#x2F;lost&#x2F;found</p><p>&#x2F;etc</p><p>&#x2F;usr</p><p>&#x2F;boot</p><p>&#x2F;proc   <strong>ä¸èƒ½åŠ¨</strong></p><p>&#x2F;srv  <strong>ä¸èƒ½åŠ¨</strong></p><p>&#x2F;sys  <strong>ä¸èƒ½åŠ¨</strong></p><p>&#x2F;tmp</p><p>&#x2F;dev   æ‰€æœ‰çš„ç¡¬ä»¶éƒ½åœ¨è¿™ä¸ªæ–‡ä»¶ä¸‹ ï¼ˆä¾‹å¦‚ï¼šç¡¬ç›˜ï¼‰</p><p>&#x2F;media</p><p>&#x2F;mnt</p><p>&#x2F;opt</p><p>&#x2F;usr&#x2F;local</p><p>&#x2F;var</p><p>&#x2F;selinux</p><h2 id="7-Linuxè¿œç¨‹ç™»å½•å’Œæ–‡ä»¶ä¼ è¾“"><a href="#7-Linuxè¿œç¨‹ç™»å½•å’Œæ–‡ä»¶ä¼ è¾“" class="headerlink" title="7.Linuxè¿œç¨‹ç™»å½•å’Œæ–‡ä»¶ä¼ è¾“"></a>7.Linuxè¿œç¨‹ç™»å½•å’Œæ–‡ä»¶ä¼ è¾“</h2><p>ä½¿ç”¨xshell xftp</p><h2 id="8-vi-vimçš„ä½¿ç”¨"><a href="#8-vi-vimçš„ä½¿ç”¨" class="headerlink" title="8.vi vimçš„ä½¿ç”¨"></a>8.vi vimçš„ä½¿ç”¨</h2><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240903151245297-17253475680882.png" class title="image-20240903151245297"><h2 id="9-linuxå…³æœºé‡å¯"><a href="#9-linuxå…³æœºé‡å¯" class="headerlink" title="9.linuxå…³æœºé‡å¯"></a>9.linuxå…³æœºé‡å¯</h2><ul><li>shutdown -h now  ç«‹åˆ»å…³æœº</li><li>shutdown -h 1  1åˆ†é’Ÿåå…³æœº  å’Œshutdownä¸€æ ·</li><li>shutdown -r now  ç°åœ¨é‡æ–°å¯åŠ¨è®¡ç®—æœº</li><li>halt  å…³æœºï¼Œä½œç”¨å’Œshutdown -h now  ç«‹åˆ»å…³ä¸€æ ·</li><li>reboot  ç°åœ¨é‡æ–°å¯åŠ¨è®¡ç®—æœº</li><li>sync <strong>æŠŠå†…å­˜çš„æ•°æ®åŒæ­¥åˆ°ç£ç›˜</strong></li></ul><p><strong>æ³¨æ„ç»†èŠ‚</strong></p><ul><li>â€‹ä¸ç®¡æ˜¯é‡å¯ç³»ç»Ÿè¿˜æ˜¯å…³é—­ç³»ç»Ÿï¼Œé¦–å…ˆè¦è¿è¡Œsvncå‘½ä»¤ï¼ŒæŠŠå†…å­˜ä¸­çš„æ•°æ®å†™åˆ°ç£ç›˜ä¸­</li><li>â€‹ç›®å‰çš„ shutdown&#x2F;reboot&#x2F;halt ç­‰å‘½ä»¤å‡å·²ç»åœ¨å…³æœºå‰è¿›è¡Œäº† sync ï¼Œè€éŸ©æé†’: å°å¿ƒé©¶å¾—ä¸‡å¹´èˆ¹</li></ul><h2 id="10-ç™»å½•æ³¨é”€"><a href="#10-ç™»å½•æ³¨é”€" class="headerlink" title="10.ç™»å½•æ³¨é”€"></a>10.ç™»å½•æ³¨é”€</h2><blockquote><p>logoutï¼šæ³¨é”€â€”-&gt;åœ¨è¿è¡Œçº§åˆ«3ä¸­æœ‰æ•ˆï¼Œä¹Ÿå°±æ˜¯æ— ç•Œé¢</p></blockquote><blockquote><p>su - root åˆ‡æ¢åˆ°rootä¸‹  ï¼Œlogoutåˆ™å›åˆ°ç™»å½•ç”¨æˆ·ï¼Œå†logoutåˆ™é€€å‡º</p></blockquote><h2 id="11-ç”¨æˆ·ç®¡ç†"><a href="#11-ç”¨æˆ·ç®¡ç†" class="headerlink" title="11.ç”¨æˆ·ç®¡ç†"></a>11.ç”¨æˆ·ç®¡ç†</h2><h3 id="ç”¨æˆ·"><a href="#ç”¨æˆ·" class="headerlink" title="ç”¨æˆ·"></a>ç”¨æˆ·</h3><p>1.æ·»åŠ ç”¨æˆ·</p><blockquote><p>useradd  ç”¨æˆ·å      è§£é‡Šï¼šæ·»åŠ ç”¨æˆ·</p><p>useradd -d ç›®å½•  ç”¨æˆ·å   ä¾‹å¦‚ï¼šuseradd -d &#x2F;home&#x2F;test king  è¡¨ç¤ºtestä¸ºkingç”¨æˆ·ç®¡ç†çš„ç›®å½•</p><p>useradd -g ç”¨æˆ·ç»„ ç”¨æˆ·å   è§£é‡Šï¼šå¢åŠ ç”¨æˆ·æ—¶ç›´æ¥åŠ ä¸Šç»„</p></blockquote><p>2.ä¿®æ”¹ç”¨æˆ·å¯†ç æˆ–è®¾ç½®å¯†ç </p><blockquote><p>passwd ç”¨æˆ·å  ç»™è¿™ä¸ªç”¨æˆ·åè®¾ç½®å¯†ç æˆ–ä¿®æ”¹å¯†ç </p></blockquote><p>3.åˆ é™¤ç”¨æˆ·</p><blockquote><p>userdel ç”¨æˆ·å</p><p>åº”ç”¨æ¡ˆä¾‹ï¼š</p><p>1.åˆ é™¤ç”¨æˆ·ï¼Œä¿ç•™ç”¨æˆ·ç›®å½• â€”â€“ã€‹userdel ç”¨æˆ·å</p><p>2.åˆ é™¤ç”¨æˆ·å’Œç”¨æˆ·ç›®å½•â€”â€”ã€‹userdel -r ç”¨æˆ·å <strong>æ…é‡</strong></p></blockquote><p>4.æŸ¥è¯¢ç”¨æˆ·</p><blockquote><p>id ç”¨æˆ·å</p></blockquote><p>5.åˆ‡æ¢ç”¨æˆ·</p><blockquote><p>su - ç”¨æˆ·å</p><p>æ³¨ï¼šæƒé™é«˜çš„å‘æƒé™ä½çš„ï¼Œä¸éœ€è¦å¯†ç </p><p>â€‹å›åˆ°åŸæ¥ç”¨æˆ·-ã€‹ã€‹logoutæˆ–exit</p></blockquote><p>6.æŸ¥çœ‹å½“å‰ç¬¬ä¸€æ¬¡ç™»å½•çš„ç”¨æˆ·ï¼ˆsu - æ¢ç”¨æˆ·å  æŸ¥çœ‹çš„è¿˜æ˜¯ç¬¬ä¸€ç™»å½•çš„ç”¨æˆ·ï¼‰</p><blockquote><p>whoami  æˆ–  who am i</p></blockquote><h3 id="ç”¨æˆ·ç»„"><a href="#ç”¨æˆ·ç»„" class="headerlink" title="ç”¨æˆ·ç»„"></a>ç”¨æˆ·ç»„</h3><p>1.æ–°å¢ç”¨æˆ·ç»„</p><blockquote><p>groupadd ç»„å</p></blockquote><p>2.åˆ é™¤ç»„</p><blockquote><p>groupdel ç»„å</p></blockquote><p>3.å¢åŠ ç”¨æˆ·æ—¶ç›´æ¥åŠ ä¸Šç»„</p><blockquote><p>useradd -g ç”¨æˆ·ç»„ ç”¨æˆ·å</p></blockquote><p>4.ä¿®æ”¹ç”¨æˆ·çš„ç»„  ç”¨rootç”¨æˆ·ä¿®æ”¹ç»„</p><blockquote><p>usermod -g ç”¨æˆ·ç»„ ç”¨æˆ·å</p><p>usermod -d ç›®å½•å ç”¨æˆ·å  æ”¹å˜æ”¹ç”¨æˆ·ç™»å½•çš„åˆå§‹ç›®å½• ã€‚ <strong>æ³¨æ„ï¼š</strong>ç”¨æˆ·éœ€è¦æœ‰è¿›å…¥åˆ°æ–°ç›®å½•çš„æƒé™</p></blockquote><h3 id="ç”¨æˆ·å’Œç»„ç›¸å…³æ–‡ä»¶"><a href="#ç”¨æˆ·å’Œç»„ç›¸å…³æ–‡ä»¶" class="headerlink" title="ç”¨æˆ·å’Œç»„ç›¸å…³æ–‡ä»¶"></a>ç”¨æˆ·å’Œç»„ç›¸å…³æ–‡ä»¶</h3><p>&#x2F;etc&#x2F;passwd æ–‡ä»¶</p><ul><li>ç”¨æˆ·(user)çš„é…ç½®æ–‡ä»¶ï¼Œè®°å½•ç”¨æˆ·çš„å„ç§ä¿¡æ¯</li><li>æ¯è¡Œçš„å«ä¹‰:ç”¨æˆ·å:å£ä»¤(ä¸€èˆ¬è¿™é‡Œæ˜¯x ï¼ŒåŠ å¯†):ç”¨æˆ·æ ‡è¯†å·:ç»„æ ‡è¯†å·:æ³¨é‡Šæ€§æè¿°:ä¸»ç›®å½•:ç™»å½•Shell</li></ul><p>&#x2F;etc&#x2F;shadow æ–‡ä»¶</p><ul><li><p>å£ä»¤çš„é…ç½®æ–‡ä»¶</p></li><li><p>æ¯è¡Œçš„å«ä¹‰:ç™»å½•å:åŠ å¯†å£ä»¤(å¯†ç ï¼šåŠ å¯†çš„ï¼Œï¼æ˜¯æ²¡æœ‰å¯†ç ):æœ€åä¸€æ¬¡ä¿®æ”¹æ—¶é—´:æœ€å°æ—¶é—´é—´éš”:æœ€å¤§æ—¶é—´é—´éš”:è­¦å‘Šæ—¶é—´:ä¸æ´»åŠ¨æ—¶é—´:å¤±æ•ˆæ—¶é—´:æ ‡å¿—</p></li></ul><p>&#x2F;etc&#x2F;group æ–‡ä»¶</p><ul><li>ç»„(group)çš„é…ç½®æ–‡ä»¶ï¼Œè®°å½•LinuxåŒ…å«çš„ç»„çš„ä¿¡æ¯</li><li>æ¯è¡Œå«ä¹‰:ç»„å:å£ä»¤:ç»„æ ‡è¯†å·:ç»„å†…ç”¨æˆ·åˆ—è¡¨</li></ul><h2 id="12-æŒ‡å®šè¿è¡Œçº§åˆ«"><a href="#12-æŒ‡å®šè¿è¡Œçº§åˆ«" class="headerlink" title="12.æŒ‡å®šè¿è¡Œçº§åˆ«"></a>12.æŒ‡å®šè¿è¡Œçº§åˆ«</h2><blockquote><p>åŸºæœ¬ä»‹ç»è¿è¡Œçº§åˆ«è¯´æ˜:<br>0:å…³æœº</p><p>1:å•ç”¨æˆ· (æ‰¾å›ä¸¢å¤±å¯†ç )</p><p>2:å¤šç”¨æˆ·çŠ¶æ€æ²¡æœ‰ç½‘ç»œæœåŠ¡  (æ— æ„ä¹‰)</p><p>3.å¤šç”¨æˆ·çŠ¶æ€æœ‰ç½‘ç»œæœåŠ¡</p><p>4:ç³»ç»Ÿæœªä½¿ç”¨ä¿ç•™ç»™ç”¨æˆ· ï¼ˆç°åœ¨æ— æ„ä¹‰ï¼‰</p><p>5:å›¾å½¢ç•Œé¢</p><p>6:ç³»ç»Ÿé‡å¯</p><p>æ³¨æ„ï¼šå¸¸ç”¨è¿è¡Œçº§åˆ«æ˜¯3å’Œ5ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šé»˜è®¤è¿è¡Œçº§åˆ«ï¼ˆå¯ä»¥è®¾ç½®ï¼‰ï¼Œåé¢æ¼”ç¤º</p><p><strong>åº”ç”¨å®ä¾‹</strong></p><p>å‘½ä»¤:init [0123456]</p><p>â€‹    åº”ç”¨æ¡ˆä¾‹:é€šè¿‡init æ¥åˆ‡æ¢ä¸åŒçš„è¿è¡Œçº§åˆ«ï¼Œæ¯”å¦‚åŠ¨ 5-3 ï¼Œç„¶åå…³æœº</p></blockquote><h3 id="æŒ‡å®šé»˜è®¤è¿è¡Œçº§åˆ«"><a href="#æŒ‡å®šé»˜è®¤è¿è¡Œçº§åˆ«" class="headerlink" title="æŒ‡å®šé»˜è®¤è¿è¡Œçº§åˆ«"></a>æŒ‡å®šé»˜è®¤è¿è¡Œçº§åˆ«</h3><blockquote><p>åœ¨centos7ä»¥å‰ï¼Œ&#x2F;etc&#x2F;inittabæ–‡ä»¶ä¸­ä¿®æ”¹</p><p>centos7ä»¥åï¼Œè¿›è¡Œäº†ç®€åŒ–ï¼Œå¦‚ä¸‹å‘½ä»¤</p><ul><li>multi-user.target:ç±»ä¼¼äºè¿è¡Œçº§åˆ«3</li><li>graphical.target:ç±»ä¼¼äºè¿è¡Œçº§åˆ«5</li></ul></blockquote><p>1.æŸ¥çœ‹å½“å‰é»˜è®¤è¿è¡Œçº§åˆ«</p><blockquote><p>systemctl get-default</p></blockquote><p>2.ä¿®æ”¹é»˜è®¤è¿è¡Œçº§åˆ«  (ä¾‹å­ï¼šè¿è¡Œçº§åˆ«5)</p><p>systemctl set-default graphical.target</p><h2 id="13-æ‰¾å›rootå¯†ç "><a href="#13-æ‰¾å›rootå¯†ç " class="headerlink" title="13.æ‰¾å›rootå¯†ç "></a>13.æ‰¾å›rootå¯†ç </h2><blockquote><p>æ³¨æ„ï¼šï¼ˆä¸åŒç‰ˆæœ¬ï¼Œä¸å¤ªä¸€æ ·ï¼Œè¿™é‡Œæ˜¯centos7.6ä»¥å   è¿™æ¬¡æ¼”ç¤ºçš„æ˜¯7.6ï¼‰</p></blockquote><p>1.é¦–å…ˆï¼Œå¯åŠ¨ç³»ç»Ÿï¼Œè¿›å…¥å¼€æœºç•Œé¢ï¼Œåœ¨ç•Œé¢ä¸­æŒ‰â€œeâ€è¿›å…¥ç¼–è¾‘ç•Œé¢ï¼Œå¦‚å›¾</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240904102536814-17254167381663.png" class title="image-20240904102536814"><p>2.è¿›å…¥ç¼–è¾‘ç•Œé¢ï¼Œä½¿ç”¨é”®ç›˜ä¸Šçš„ä¸Šä¸‹é”®æŠŠå…‰æ ‡å¾€ä¸‹ç§»åŠ¨ï¼Œæ‰¾åˆ°ä»¥â€œâ€œLinux16â€å¼€å¤´å†…å®¹æ‰€åœ¨çš„è¡Œæ•°â€,åœ¨è¡Œçš„æœ€åé¢è¾“å…¥:init&#x3D;&#x2F;bin&#x2F;shã€‚<br>å¦‚å›¾</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240904102908699-17254169496725.png" class title="image-20240904102908699"><p>3.æ¥è€…ï¼Œè¾“å…¥å®Œæˆåï¼Œç›´æ¥æŒ‰å¿«æ·é”®:Ctrl+x è¿›å…¥å•ç”¨æˆ·æ¨¡å¼ï¼Œ<br>4.æ¥ç€ï¼Œåœ¨å…‰æ ‡é—ªçƒçš„ä½ç½®ä¸­è¾“å…¥:<code>mount -o remount,rw / </code> (æ³¨æ„:å„ä¸ªå•è¯é—´æœ‰ç©ºæ ¼)ï¼Œå®ŒæˆåæŒ‰é”®ç›˜çš„å›è½¦é”®(Entcr)ã€‚å¦‚å›¾</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240904103018574-17254170195896.png" class title="image-20240904103018574"><p>5.åœ¨æ–°çš„ä¸€è¡Œæœ€åé¢è¾“å…¥:passwdï¼Œ å®ŒæˆåæŒ‰é”®ç›˜çš„å›è½¦é”®(Ener)ã€‚è¾“å…¥å¯†ç ï¼Œç„¶åå†æ¬¡ç¡®è®¤å¯†ç å³å¯(æç¤º:å¯†ç é•¿åº¦æœ€å¥½8ä½ä»¥ä¸Š,ä½†ä¸æ˜¯å¿…é¡»çš„)ï¼Œå¯†ç ä¿®æ”¹æˆåŠŸåï¼Œä¼šæ˜¾ç¤ºpasswdâ€¦çš„æ ·å¼ï¼Œè¯´æ˜å¯†ç ä¿®æ”¹æˆåŠŸ</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240904103125459-17254170864547.png" class title="image-20240904103125459"><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240904103415223-17254172564548.png" class title="image-20240904103415223"><p>7.æ¥ç€ï¼Œåœ¨é¼ æ ‡é—ªçƒçš„ä½ç½®ä¸­(æœ€åä¸€è¡Œä¸­)è¾“å…¥:<code>touch /.autorelabel</code>(æ³¨æ„:touchä¸&#x2F;åé¢æœ‰ä¸€ä¸ªç©ºæ ¼)ï¼Œå®ŒæˆåæŒ‰é”®ç›˜çš„å›è½¦é”®(Enter)</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240904103817805-172541749908910.png" class title="image-20240904103817805"><p>8.ç»§ç»­åœ¨å…‰æ ‡é—ªçƒçš„ä½ç½®ä¸­ï¼Œè¾“å…¥:<code>exec /sbin/init</code>(æ³¨æ„:execä¸&#x2F;åé¢æœ‰ä¸€ä¸ªç©ºæ ¼)ï¼Œå®ŒæˆåæŒ‰é”®ç›˜çš„å›è½¦é”®(Enter)ï¼Œç­‰å¾…ç³»ç»Ÿè‡ªåŠ¨ä¿®æ”¹å¯†ç ( æç¤º:è¿™ä¸ªè¿‡ç¨‹æ—¶é—´å¯èƒ½æœ‰ç‚¹é•¿ï¼Œè€å¿ƒç­‰å¾…)ï¼Œå®Œæˆåï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨é‡å¯ï¼Œæ–°çš„å¯†ç ç”Ÿæ•ˆäº†</p><p>ã€å¯é€‰ã€‘æœ€åè¿›å…¥åï¼Œå¯å†æ ¹æ®<code>passwd root </code>æ”¹ä½ æƒ³æ”¹çš„å¯†ç </p><h2 id="14-å¸®åŠ©å‘½ä»¤"><a href="#14-å¸®åŠ©å‘½ä»¤" class="headerlink" title="14.å¸®åŠ©å‘½ä»¤"></a>14.å¸®åŠ©å‘½ä»¤</h2><p>man è·å¾—å¸®åŠ©ä¿¡æ¯</p><ul><li>åŸºæœ¬è¯­æ³•:man å‘½ä»¤æˆ–é…ç½®æ–‡ä»¶(åŠŸèƒ½æè¿°:è·å¾—å¸®åŠ©ä¿¡æ¯)</li><li>æ¡ˆä¾‹:æŸ¥çœ‹Iså‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯  <code>man ls</code>  (ç©ºæ ¼ç¿»é¡µ)</li></ul><p>helpæŒ‡ä»¤</p><ul><li>åŸºæœ¬è¯­æ³•:help å‘½ä»¤(åŠŸèƒ½æè¿°:è·å¾—shellå†…ç½®å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯)</li></ul><p>åº”ç”¨å®ä¾‹</p><ul><li>æ¡ˆä¾‹:æŸ¥çœ‹cdå‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯  <code>help cd</code></li></ul><p>ç™¾åº¦å¸®åŠ©æ›´ç›´æ¥<br>å¦‚æœè‹±è¯­ä¸å¤ªå¥½çš„ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç™¾åº¦é è°±</p><h2 id="15-æ–‡ä»¶ç›®å½•ç±»-pwd-ls-lnâ€¦"><a href="#15-æ–‡ä»¶ç›®å½•ç±»-pwd-ls-lnâ€¦" class="headerlink" title="15.æ–‡ä»¶ç›®å½•ç±»-pwd-ls-lnâ€¦.."></a>15.æ–‡ä»¶ç›®å½•ç±»-pwd-ls-lnâ€¦..</h2><blockquote><p>pwdï¼šæ˜¾ç¤ºç»å¯¹è·¯å¾„</p></blockquote><blockquote><p>ls</p><p>â€‹-l :åˆ—è¡¨æ˜¾ç¤º</p><p>â€‹-a ï¼šå…¨éƒ¨æ˜¾ç¤º</p><p>â€‹-h:   å±•ç¤ºä¿¡æ¯æ›´å®¹æ˜“ç†è§£</p><p>â€‹-Rï¼šé€’å½’å±•ç¤º</p></blockquote><blockquote><p>cd</p><p>â€‹~ :å›åˆ°ç”¨æˆ·ç›®å½•</p><p>â€‹.. :å›åˆ°ä¸Šçº§ç›®å½•</p></blockquote><blockquote><p>mkdir</p><p>â€‹-pï¼šåˆ›å»ºå¤šçº§ç›®å½•</p></blockquote><blockquote><p>rmdir :åªèƒ½åˆ é™¤ç©ºç›®å½•</p><p>rm -rf   ï¼šé€’å½’å¼ºåˆ¶åˆ é™¤ï¼Œå±é™©</p></blockquote><blockquote><p>touch  :åˆ›å»ºæ–‡ä»¶ï¼Œä¼šä¿®æ”¹æ–‡ä»¶æ—¶é—´</p></blockquote><blockquote><p>cp   :æ‹·è´æŒ‡ä»¤</p><p>â€‹cp [é€‰é¡¹] æº ç›®æ ‡</p><p>â€‹-r :é€’å½’æ‹·è´</p><p>â€‹\cp :å¼ºåˆ¶è¦†ç›–ä»£æ›¿cpå‘½ä»¤</p></blockquote><blockquote><p>rm  :åˆ é™¤æ–‡ä»¶</p><p>â€‹-r  é€’å½’åˆ é™¤ç›®å½•</p><p>â€‹-f  ä¸æç¤ºå¼ºåˆ¶åˆ é™¤</p></blockquote><blockquote><p>mv é‡å‘½åå’Œç§»åŠ¨æ–‡ä»¶</p><p>â€‹mv æºæ–‡ä»¶  ç›®æ ‡</p></blockquote><blockquote><p>cat  ï¼šæŸ¥çœ‹æ–‡ä»¶å†…å®¹</p><p>â€‹-n :æ˜¾ç¤ºè¡Œå·</p><p>â€‹ç»å¸¸ç”¨æ³•  cat -n xxx | more   :caté…åˆç®¡é“ æŸ¥è¯¢ç»“æœç”¨moreäº¤æ¢   å›è½¦ä¸‹è¡Œ   ç©ºæ ¼ç¿»é¡µ</p></blockquote><blockquote><p>more moreæŒ‡ä»¤æ˜¯ä¸€ä¸ªåŸºäºVç¼–è¾‘å™¨çš„æ–‡æœ¬è¿‡æ»¤å™¨ï¼Œå®ƒä»¥å…¨å±å¹•çš„æ–¹å¼æŒ‰é¡µæ˜¾ç¤ºæ–‡æœ¬æ–‡ä»¶çš„å†…å®¹ã€‚more<br>æŒ‡ä»¤ä¸­å†…ç½®äº†è‹¥å¹²å¿«æ·é”®(äº¤äº’çš„æŒ‡ä»¤)ï¼Œè¯¦è§æ“ä½œè¯´æ˜</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240904122520380-172542392194912.png" class title="image-20240904122520380"></blockquote><blockquote><p>less ::æŸ¥å¤§æ–‡ä»¶ï¼Œæ•ˆç‡å¥½</p><p>lessæŒ‡ä»¤ç”¨æ¥åˆ†å±æŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼Œå®ƒçš„åŠŸèƒ½ä¸moreæŒ‡ä»¤ç±»ä¼¼ï¼Œä½†æ˜¯æ¯”moreæŒ‡ä»¤æ›´åŠ å¼ºå¤§ï¼Œæ”¯æŒå„ç§æ˜¾ç¤ºç»ˆç«¯ã€‚lessæŒ‡ä»¤åœ¨æ˜¾ç¤ºæ–‡ä»¶å†…å®¹æ—¶ï¼Œå¹¶ä¸æ˜¯ä¸€æ¬¡å°†æ•´ä¸ªæ–‡ä»¶åŠ è½½ä¹‹åæ‰æ˜¾ç¤ºï¼Œè€Œæ˜¯æ ¹æ®æ˜¾ç¤ºéœ€è¦åŠ è½½å†…å®¹ï¼Œå¯¹äºæ˜¾ç¤ºå¤§å‹æ–‡ä»¶å…·æœ‰è¾ƒé«˜çš„æ•ˆç‡</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240904132457418-172542749889313.png" class title="image-20240904132457418"></blockquote><blockquote><p>echo ï¼šè¾“å‡ºå†…å®¹åˆ°æ§åˆ¶å°</p><p>â€‹ä¾‹å¦‚ï¼šè¾“å‡ºç¯å¢ƒå˜é‡ï¼šecho $HOSTNAME</p></blockquote><blockquote><p>head :headç”¨äºæ˜¾ç¤ºæ–‡ä»¶çš„å¼€å¤´éƒ¨åˆ†å†…å®¹ï¼Œé»˜è®¤æƒ…å†µä¸‹headæŒ‡ä»¤æ˜¾ç¤ºæ–‡ä»¶çš„å‰10è¡Œå†…å®¹</p><p>â€‹-n 5  :æ˜¾ç¤ºå‰5è¡Œ</p></blockquote><blockquote><p>tail  :tailç”¨äºè¾“å‡ºæ–‡ä»¶ä¸­å°¾éƒ¨çš„å†…å®¹ï¼Œé»˜è®¤æƒ…å†µä¸‹tailæŒ‡ä»¤æ˜¾ç¤ºæ–‡ä»¶çš„å‰10è¡Œå†…å®¹ã€‚</p><p>â€‹-n</p><p>â€‹-f :å®æ—¶çš„è¿½è¸ªæ–‡æ¡£çš„æ›´æ–°</p></blockquote><blockquote><p>ç†è§£ï¼šèƒ½æ˜¾ç¤ºçš„éƒ½èƒ½å†™é“æ–‡ä»¶ä¸­</p><p>Â·&gt;Â·    è¾“å‡ºé‡å®šå‘   ä¾‹å¦‚ï¼šecho â€œhelloâ€ &gt;  a.txt  ï¼ˆä¼šè¦†ç›–ï¼‰</p><p>Â·&gt;&gt;Â·  è¿½åŠ    ä¾‹å¦‚ï¼šecho â€œhelloâ€ &gt;&gt;  a.txt   ï¼ˆè¿½åŠ ï¼‰ </p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240904142458798-172543109990714.png" class title="image-20240904142458798"></blockquote><blockquote><p>ln :è½¯é“¾æ¥ä¹Ÿç§°ä¸ºç¬¦å·é“¾æ¥ï¼Œç±»ä¼¼äºwindowsé‡Œçš„å¿«æ·æ–¹å¼ï¼Œä¸»è¦å­˜æ”¾äº†é“¾æ¥å…¶ä»–æ–‡ä»¶çš„è·¯å¾„</p><p>è¯­æ³•ï¼š<code>ln -s åŸæ–‡ä»¶æˆ–ç›®å½• è½¯é“¾æ¥å</code>    ï¼šç»™åŸæ–‡ä»¶åˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥  ç±»ä¼¼äºwinçš„å¿«æ·æ–¹å¼</p><p>åº”ç”¨æ¡ˆä¾‹  <code>ln -s /root /home/myroot   </code></p><p><code>rm /home/myroot</code>   :åˆ é™¤è½¯è¿æ¥</p></blockquote><blockquote><p><code>history </code>  ï¼šæŸ¥çœ‹å†å²ä½¿ç”¨å‘½ä»¤</p><ul><li><p><code>history 10</code>  :è¡¨ç¤ºæŸ¥çœ‹æœ€è¿‘ä½¿ç”¨çš„10æ¡å‘½ä»¤</p></li><li><p>é€šè¿‡ä¸‹é¢æ–¹å¼é‡æ–°æ‰§è¡Œ</p><ul><li><p><code>!ç¼–å·</code>     ï¼šè¿™ä¸ªç¼–å·æ˜¯ç”¨historyæŸ¥çœ‹çš„é‚£ä¸ªå‘½ä»¤å‰çš„ç¼–å·   æ„æ€æ˜¯æŠŠè¿™ä¸ªå‘½ä»¤é‡æ–°æ‰§è¡Œä¸€éï¼Œæˆ–è€…<strong>ç›´æ¥é‡æ–°æ‰“ä¸€é</strong></p></li><li><p><code>!</code>å­—æ¯ä¹Ÿä¸‹ï¼Œå¦‚æˆ‘æ›¾ç»ä½¿ç”¨è¿‡<code>tail</code>  <code>!t</code>å°±ä¼šä»historyä»ä¸‹å¾€ä¸ŠåŒ¹é…<code>t</code>å¼€å¤´çš„ï¼Œå¤ªä¹…çš„ä¸å»ºè®®è¿™æ ·ä½¿ç”¨</p></li><li><p>é‚£å¦‚ä½•æ‰¾ä¹…è¿œçš„å‘½ä»¤å‘¢ï¼Œå…ˆæ‰§è¡Œ<code>history</code> å†æŒ‰ <code>ctrl+r</code> æœå¯»ä½ æƒ³æœå¯»çš„å…³é”®å­—å³å¯ï¼Œæœå¯»è§„åˆ™ä¹Ÿæ˜¯ä»ä¸‹å¾€ä¸ŠåŒ¹é…</p></li></ul></li></ul></blockquote><h2 id="16-æ—¶é—´æ—¥æœŸæŒ‡ä»¤"><a href="#16-æ—¶é—´æ—¥æœŸæŒ‡ä»¤" class="headerlink" title="16.æ—¶é—´æ—¥æœŸæŒ‡ä»¤"></a>16.æ—¶é—´æ—¥æœŸæŒ‡ä»¤</h2><blockquote><p>date   æ˜¾ç¤ºå½“å‰æ—¥æœŸ</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240904145304827-172543278616215.png" class title="image-20240904145304827"><p>â€‹-s  å­—ç¬¦ä¸²æ—¶é—´    ï¼šè®¾ç½®ç³»ç»Ÿå½“å‰æ—¶é—´  ä¾‹å¦‚ï¼šdate -s â€œ2024-09-04 14:02:55â€</p></blockquote><blockquote><p><code>cal</code>   æŸ¥çœ‹å½“å‰æœˆä»½çš„æ—¥å†</p><p><code>cal 2024</code>   :å±•ç¤º2024çš„1-12çš„æ—¥å†</p></blockquote><h2 id="17-æŸ¥æ‰¾æŒ‡ä»¤-find-locate-which-grep"><a href="#17-æŸ¥æ‰¾æŒ‡ä»¤-find-locate-which-grep" class="headerlink" title="17.æŸ¥æ‰¾æŒ‡ä»¤-find-locate -which-grep"></a>17.æŸ¥æ‰¾æŒ‡ä»¤-find-locate -which-grep</h2><blockquote><p>find    findæŒ‡ä»¤å°†ä»æŒ‡å®šç›®å½•å‘ä¸‹é€’å½’åœ°éå†å…¶å„ä¸ªå­ç›®å½•ï¼Œå°†æ»¡è¶³æ¡ä»¶çš„æ–‡ä»¶æˆ–è€…ç›®å½•æ˜¾ç¤ºåœ¨ç»ˆç«¯ã€‚</p><p>è¯­æ³•ï¼šfind æœç´¢èŒƒå›´  é€‰é¡¹</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240904150048461-172543324985916.png" class title="image-20240904150048461"><p>ä¾‹å¦‚ï¼š</p><p>â€‹find &#x2F;home -name hello.txt</p><p>â€‹find &#x2F;opt  -user nobody   :æŸ¥æ‰¾&#x2F;optç›®å½•ä¸‹ï¼Œç”¨æˆ·åä¸ºnobodyçš„æ–‡ä»¶</p><p>â€‹find &#x2F; -size +200M    æŸ¥æ‰¾æ•´ä¸ªlinuxå¤§äº200Mçš„æ–‡ä»¶  ï¼ˆ+å¤§äº -å°äº ä¸å†™åˆ™æ˜¯ç­‰äº  ï¼Œå•ä½æœ‰k,M,Gï¼‰</p></blockquote><blockquote><p>locate  :locateæŒ‡ä»¤å¯ä»¥å¿«é€Ÿå®šä½æ–‡ä»¶è·¯å¾„ã€‚locateæŒ‡ä»¤åˆ©ç”¨äº‹å…ˆå»ºç«‹çš„ç³»ç»Ÿä¸­æ‰€æœ‰æ–‡ä»¶åç§°åŠè·¯å¾„çš„locateæ•°æ®åº“å®ç°å¿«é€Ÿå®šä½ç»™å®šçš„æ–‡ä»¶ã€‚LocateæŒ‡ä»¤æ— éœ€éå†æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼ŒæŸ¥è¯¢é€Ÿåº¦è¾ƒå¿«ã€‚ä¸ºäº†ä¿è¯æŸ¥è¯¢ç»“æœçš„å‡†ç¡®åº¦ï¼Œ<strong>ç®¡ç†å‘˜å¿…é¡»å®šæœŸæ›´æ–°locateæ—¶åˆ»</strong></p><p>åŸºæœ¬è¯­æ³•<br>locate æœç´¢æ–‡ä»¶<br>ç‰¹åˆ«è¯´æ˜<br>ç”±äºlocateæŒ‡ä»¤åŸºäºæ•°æ®åº“è¿›è¡ŒæŸ¥è¯¢ï¼Œæ‰€ä»¥<strong>ç¬¬ä¸€æ¬¡è¿è¡Œå‰ï¼Œå¿…é¡»ä½¿ç”¨<code>updatedb</code>æŒ‡ä»¤åˆ›å»ºlocateæ•°æ®åº“</strong></p></blockquote><blockquote><p>which   ï¼šå¯ä»¥æŸ¥çœ‹æŸä¸ªæŒ‡ä»¤åœ¨é‚£ä¸ªç›®å½•ä¸‹  ä¾‹å¦‚ls  which ls</p></blockquote><blockquote><p>grep å’Œç®¡é“ç¬¦å·  |</p><p>â€‹grep è¿‡æ»¤æŸ¥æ‰¾     è¯­æ³•ï¼šgrep  é€‰é¡¹  æŸ¥æ‰¾å†…å®¹  æºæ–‡ä»¶  </p><p>â€‹-n  æ˜¾ç¤ºè¡Œå·</p><p>â€‹-i  å¿½ç•¥å¤§å°å†™</p><p>â€‹-v åå‘åŒ¹é…ï¼ˆå°±æ˜¯åŒ…å«æŸä¸ªè¿‡æ»¤æ¡ä»¶çš„ä¸è¦æŸ¥è¯¢ï¼‰</p><p>â€‹ç®¡é“ç¬¦ |  è¡¨ç¤ºå°†å‰ä¸€ä¸ªå‘½ä»¤çš„å¤„ç†ç»“æœè¾“å‡ºä¼ é€’ç»™åé¢çš„å‘½ä»¤å¤„ç†</p><p>è§£é‡Šå›¾ï¼š</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240904153637713-172543539910017.png" class title="image-20240904153637713"><p>cat  a.txt | grep  -n â€œyesâ€</p><p>grep -n â€œyesâ€  a.text</p></blockquote><h2 id="18-å‹ç¼©å’Œè§£å‹"><a href="#18-å‹ç¼©å’Œè§£å‹" class="headerlink" title="18.å‹ç¼©å’Œè§£å‹"></a>18.å‹ç¼©å’Œè§£å‹</h2><blockquote><p>gzip&#x2F;gunzip   :å‹ç¼©æ–‡ä»¶</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240904154143453-172543570473718.png" class title="image-20240904154143453"></blockquote><blockquote><p>zip&#x2F;unzip   :zip ç”¨äºå‹ç¼©æ–‡ä»¶&#x2F;æ–‡ä»¶å¤¹ï¼Œunzip ç”¨äºè§£å‹æ–‡ä»¶&#x2F;æ–‡ä»¶å¤¹ï¼Œè¿™ä¸ªåœ¨é¡¹ç›®æ‰“åŒ…å‘å¸ƒä¸­å¾ˆæœ‰ç”¨çš„</p><p>è¯­æ³•ï¼š</p><p>â€‹zip é€‰é¡¹ xxx.zip  å‹ç¼©çš„å†…å®¹</p><p>â€‹-r é€’å½’å‹ç¼©ï¼Œå³å‹ç¼©ç›®å½•</p><p>â€‹unzip é€‰é¡¹ xxx.zip  </p><p>â€‹-d&lt;ç›®å½•&gt; æŒ‡å®šè§£å‹åæ–‡ä»¶çš„å­˜æ”¾ç›®å½•</p><p>æ¡ˆä¾‹ï¼š</p><p>â€‹zip -r xxx.zip  &#x2F;home&#x2F;</p><p>â€‹unzip -d &#x2F;opt&#x2F; &#x2F;home&#x2F;xxx.zip</p><p>è®²è§£å›¾å¦‚ä¸‹ï¼š</p><p>â€‹ <img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240904155231792-172543635310719.png" class title="image-20240904155231792"></p></blockquote><blockquote><p>tar  æ‰“åŒ…å’Œè§£å‹çœ‹é€‰é¡¹çš„é€‰æ‹©</p><p>è¯­æ³•ï¼š</p><p>â€‹<code>tar é€‰é¡¹  xx.tar.gz  æ‰“åŒ…å†…å®¹</code></p><p>â€‹é€‰é¡¹</p><p>â€‹-c äº§ç”Ÿæ‰“åŒ…æ–‡ä»¶ï¼Œäº§ç”Ÿ<code>.tar</code>æ‰“åŒ…æ–‡ä»¶</p><p>â€‹-v æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯</p><p>â€‹-fæŒ‡å®šå‹ç¼©åçš„æ–‡ä»¶ï¼Œè¿™ä¸ªé€‰é¡¹æ˜¯å¿…é¡»çš„ï¼ŒæŒ‡å®šæ“ä½œæ¶‰åŠçš„æ–‡ä»¶å</p><p>â€‹-zæ‰“åŒ…åŒæ—¶å‹ç¼©ï¼Œè°ƒç”¨ gizï¼Œæ–‡ä»¶åç¼€æ˜¯<code>.gz</code></p><p>â€‹-xè§£åŒ….taræ–‡ä»¶ï¼Œè§£åŒ…<code>.tar</code>æ–‡ä»¶</p><p>â€‹-j     è°ƒç”¨ bzip2ï¼Œæ–‡ä»¶åç¼€æ˜¯<code>.bz2</code></p><p>â€‹-Z    è°ƒç”¨ compressï¼Œæ–‡ä»¶åç¼€æ˜¯<code>.Z</code></p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240904160759353-172543728058120.png" class title="image-20240904160759353"><p>æ¡ˆä¾‹ï¼š</p><p><code>tar -zxvf   xxx.tar.gz  -C /opt</code>  è§£å‹ç¼©åˆ°&#x2F;opt</p><p><code>tar -zcvfpc.tar.gz  /home/xxx/a.txt  /home/xxx/b.txt </code>  æ‰“åŒ…</p><p><strong>ä¸¾ä¸€åä¸‰å°±æœ‰<code>tar -jcvf</code>ï¼Œ<code>tar -jxvf</code>ï¼Œ<code>tar -Zcvf</code>å’Œ<code>tar -Zxvf</code>ç­‰ç­‰</strong></p></blockquote><h2 id="19-linuxç»„ï¼ˆéš¾ç‚¹ï¼‰"><a href="#19-linuxç»„ï¼ˆéš¾ç‚¹ï¼‰" class="headerlink" title="19.linuxç»„ï¼ˆéš¾ç‚¹ï¼‰"></a>19.linuxç»„ï¼ˆéš¾ç‚¹ï¼‰</h2><blockquote><p>ä¸€ä¸ªæ–‡ä»¶&#x2F;ç›®å½•æœ‰ æ‰€æœ‰è€… æ‰€åœ¨ç»„ å…¶ä»–ç»„ ï¼›</p><p>â€‹æ‰€æœ‰è€…ï¼šæŸä¸ªç”¨æˆ·å¯¹è¿™ä¸ªæ–‡ä»¶çš„æƒé™ï¼Œä¸€èˆ¬æ˜¯è°åˆ›å»ºè°æ˜¯åˆ›å»ºè€…</p><p>â€‹æ‰€åœ¨ç»„ï¼šæ˜¯æŸä¸ªç»„å¯¹è¿™ä¸ªæ–‡ä»¶çš„æƒé™ï¼Œé»˜è®¤æ˜¯åˆ›å»ºè€…æ‰€åœ¨çš„ç»„</p><p>â€‹å…¶ä»–ç»„ï¼šå…¶ä½™çš„ç»„å¯¹è¿™ä¸ªæ–‡ä»¶çš„æƒé™</p></blockquote><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240904163445173-172543888627621.png" class title="image-20240904163445173"><h3 id="1-æ‰€æœ‰è€…"><a href="#1-æ‰€æœ‰è€…" class="headerlink" title="1.æ‰€æœ‰è€…"></a>1.æ‰€æœ‰è€…</h3><blockquote><p>æŸ¥çœ‹æ–‡ä»¶çš„æ‰€æœ‰è€…</p><p>â€‹ls -ahl</p></blockquote><blockquote><p>ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€…</p><p>chown ç”¨æˆ·å æ–‡ä»¶å</p></blockquote><h3 id="2-æ‰€åœ¨ç»„"><a href="#2-æ‰€åœ¨ç»„" class="headerlink" title="2.æ‰€åœ¨ç»„"></a>2.æ‰€åœ¨ç»„</h3><blockquote><p>ä¿®æ”¹æ–‡ä»¶æ‰€åœ¨ç»„</p><p>chgrp ç»„å æ–‡ä»¶å</p></blockquote><h3 id="3-å…¶ä»–ç§Ÿ"><a href="#3-å…¶ä»–ç§Ÿ" class="headerlink" title="3.å…¶ä»–ç§Ÿ"></a>3.å…¶ä»–ç§Ÿ</h3><blockquote><p>é™¤æ–‡ä»¶çš„æ‰€æœ‰è€…å’Œæ‰€åœ¨ç»„çš„ç”¨æˆ·å¤–ï¼Œç³»ç»Ÿçš„å…¶å®ƒç”¨æˆ·éƒ½æ˜¯æ–‡ä»¶çš„å…¶å®ƒç»„</p></blockquote><h3 id="4-æ”¹å˜ç”¨æˆ·æ‰€åœ¨ç»„"><a href="#4-æ”¹å˜ç”¨æˆ·æ‰€åœ¨ç»„" class="headerlink" title="4.æ”¹å˜ç”¨æˆ·æ‰€åœ¨ç»„"></a>4.æ”¹å˜ç”¨æˆ·æ‰€åœ¨ç»„</h3><blockquote><p>åœ¨æ·»åŠ ç”¨æˆ·æ—¶ï¼Œå¯ä»¥æŒ‡å®šå°†è¯¥ç”¨æˆ·æ·»åŠ åˆ°å“ªä¸ªç»„ä¸­ï¼ŒåŒæ ·çš„ç”¨rootçš„ç®¡ç†æƒé™å¯ä»¥æ”¹å˜æŸä¸ªç”¨æˆ·æ‰€åœ¨çš„ç»„ã€‚</p><ul><li>æ”¹å˜ç”¨æˆ·æ‰€åœ¨ç»„<ul><li><code>usermod -g æ–°ç»„å ç”¨æˆ·å</code></li><li><code>usermod -d ç›®å½•å ç”¨æˆ·å</code>  æ”¹å˜è¯¥ç”¨æˆ·ç™»é™†çš„åˆå§‹ç›®å½•ã€‚ç‰¹åˆ«è¯´æ˜:ç”¨æˆ·éœ€è¦æœ‰è¿›å…¥åˆ°æ–°ç›®å½•çš„æƒé™</li></ul></li><li>åº”ç”¨å®ä¾‹<ul><li>é¢˜ç›®ï¼šå°† zwj è¿™ä¸ªç”¨æˆ·ä»åŸæ¥æ‰€åœ¨ç»„ï¼Œä¿®æ”¹åˆ° wudang ç»„ã€‚<ul><li>æ“ä½œï¼š<code>usermod -g wudang zwj</code></li></ul></li></ul></li></ul></blockquote><h2 id="20-rwxæƒé™"><a href="#20-rwxæƒé™" class="headerlink" title="20.rwxæƒé™"></a>20.rwxæƒé™</h2><blockquote><p>æƒé™é…åˆ ç»„ æ¥ä½¿ç”¨</p></blockquote><h3 id="1-åŸºç¡€åˆ†æ"><a href="#1-åŸºç¡€åˆ†æ" class="headerlink" title="1.åŸºç¡€åˆ†æ"></a>1.åŸºç¡€åˆ†æ</h3><blockquote><p><code>ls -l </code>æŸ¥çœ‹æ–‡ä»¶æƒé™</p><ul><li><p>-rwxrw-râ€“ 1 root root 1213 Feb 2 09:39 abc</p></li><li><p>0-9ä½è¯´æ˜</p><p>1.ç¬¬0ä½ç¡®å®šæ–‡ä»¶ç±»å‹(dï¼Œ-ï¼Œlï¼Œcï¼Œb)</p><p>â€‹- æ˜¯æ™®é€šæ–‡ä»¶</p><p>â€‹I æ˜¯é“¾æ¥ï¼Œç›¸å½“äºwindowsçš„å¿«æ·æ–¹å¼</p><p>â€‹d æ˜¯ç›®å½•ï¼Œç›¸å½“äºwindowsçš„æ–‡ä»¶å¤¹</p><p>â€‹c æ˜¯ä»·é—¨å¤‡æ–‡ä»¶ï¼Œé¼ æ ‡ï¼Œé”®ç›˜</p><p>â€‹b æ˜¯å—è®¾å¤‡ï¼Œæ¯”å¦‚ç¡¬ç›˜</p><p>2.ç¬¬1-3ä½ç¡®å®šæ‰€æœ‰è€…(è¯¥æ–‡ä»¶çš„æ‰€æœ‰è€…)æ‹¥æœ‰è¯¥æ–‡ä»¶çš„æƒé™ã€‚â€”User</p><p>3.ç¬¬4-6ä½ç¡®å®šæ‰€å±ç»„(åŒç”¨æˆ·ç»„çš„)æ‹¥æœ‰è¯¥æ–‡ä»¶çš„æƒé™ï¼Œâ€”Group</p><p>4.ç¬¬7-9ä½ç¡®å®šå…¶ä»–ç”¨æˆ·æ‹¥æœ‰è¯¥æ–‡ä»¶çš„æƒé™â€”Other</p></li></ul></blockquote><blockquote><p><strong>è®²è§£rwxä½œç”¨å¹¶ç†è§£</strong>ï¼ˆç†è§£æ¸…æ¥šï¼‰</p><p>rwxä½œç”¨åˆ°æ–‡ä»¶ ï¼ˆæ–‡ä»¶çš„å¯¹è±¡æ˜¯æ–‡ä»¶å†…å®¹ï¼‰</p><ul><li><p>[r]ä»£è¡¨å¯è¯»(read):å¯ä»¥è¯»å–ï¼ŒæŸ¥çœ‹</p></li><li><p>[w]ä»£è¡¨å¯å†™(write): å¯ä»¥ä¿®æ”¹ï¼Œä½†æ˜¯ä¸ä»£è¡¨å¯ä»¥åˆ é™¤è¯¥æ–‡ä»¶ï¼Œ<strong>åˆ é™¤ä¸€ä¸ªæ–‡ä»¶çš„å‰ææ¡ä»¶æ˜¯å¯¹è¯¥åä»¶æ‰€åœ¨çš„ç›®å½•æœ‰å†™æƒé™</strong>ï¼Œæ‰èƒ½åˆ é™¤è¯¥æ–‡ä»¶ã€‚</p></li><li><p>[x]ä»£è¡¨å¯æ‰§è¡Œ(execute):å¯ä»¥è¢«æ‰§è¡Œ</p></li></ul><p>rwxä½œç”¨åˆ°ç›®å½• ï¼ˆç›®å½•çš„å¯¹è±¡æ˜¯æ–‡ä»¶æœ¬èº«ï¼‰</p><ul><li>[r]ä»£è¡¨å¯è¯»(read):    <strong>å¯ä»¥è¯»å–ï¼ŒlsæŸ¥çœ‹ç›®å½•å†…å®¹</strong>ï¼Œä½†ç›®å½•ä¸‹æ–‡ä»¶è¯¥æœ‰çš„æƒé™è¿˜æ˜¯æœ‰çš„</li><li>[w ]ä»£è¡¨å¯å†™(write):  <strong>å¯ä»¥ä¿®æ”¹,å¯¹ç›®å½•å†…åˆ›å»º+åˆ é™¤+é‡å‘½åç›®å½•</strong></li><li>[x]ä»£è¡¨å¯æ‰§è¡Œ(execute):    <strong>å¯ä»¥è¿›å…¥è¯¥ç›®å½•   cdæ“ä½œ</strong></li></ul><p>æ³¨æ„ï¼š</p></blockquote><blockquote><p><strong>å®ä¾‹è®²è§£</strong></p><p><code>ls -l</code>ä¸­æ˜¾ç¤ºçš„å†…å®¹å¦‚ä¸‹:<br>    -rwxrw-râ€“ 1 root root 1213 Feb 2 09:39 abc</p><p>1.10ä¸ªå­—ç¬¦ç¡®å®šä¸åŒç”¨æˆ·èƒ½å¯¹æ–‡ä»¶å¹²ä»€ä¹ˆ</p><ul><li>ç¬¬ä¸€ä¸ªå­—ç¬¦ä»£è¡¨æ–‡ä»¶ç±»å‹: - l d c b</li></ul><p>å…¶ä½™å­—ç¬¦æ¯3ä¸ªä¸€ç»„(rwx)è¯»(r)å†™(w)æ‰§è¡Œ(x)</p><ul><li><p>ç¬¬ä¸€ç»„rwx:æ–‡ä»¶æ‹¥æœ‰è€…çš„æƒé™æ˜¯è¯»ã€å†™å’Œæ‰§è¡Œ</p></li><li><p>ç¬¬äºŒç»„rw-:ä¸æ–‡ä»¶æ‹¥æœ‰è€…åŒä¸€ç»„çš„ç”¨æˆ·çš„æƒé™æ˜¯è¯»ã€å†™ä½†ä¸èƒ½æ‰§è¡Œ</p></li><li><p>ç¬¬ä¸‰ç»„râ€“:ä¸ä¸æ–‡ä»¶æ‹¥æœ‰è€…åŒç»„çš„å…¶ä»–ç”¨æˆ·çš„æƒé™æ˜¯è¯»ä¸èƒ½å†™å’Œæ‰§è¡Œ</p></li></ul><p>2.å¯ç”¨æ•°å­—è¡¨ç¤ºä¸º:r&#x3D;4,w&#x3D;2,x&#x3D;1å› æ­¤rwx&#x3D;4+2+1&#x3D;7</p><p>3.å…¶å®ƒè¯´æ˜</p><p>1   æ–‡ä»¶ : ç¡¬è¿æ¥æ•°æˆ–ç›®å½• : å­ç›®å½•æ•°+æ–‡ä»¶æ•°</p><p>root ç”¨æˆ·</p><p>root ç»„</p><p>1213æ–‡ä»¶å¤§å°(å­—èŠ‚)ï¼Œå¦‚æœæ˜¯æ–‡ä»¶å¤¹ï¼Œæ˜¾ç¤º 4096å­—èŠ‚</p><p>Feb 2 09:39æœ€åä¿®æ”¹æ—¥æœŸ</p><p>abc æ–‡ä»¶å</p></blockquote><h3 id="2-ä¿®æ”¹æ–‡ä»¶-ç›®å½•æƒé™-chmod"><a href="#2-ä¿®æ”¹æ–‡ä»¶-ç›®å½•æƒé™-chmod" class="headerlink" title="2.ä¿®æ”¹æ–‡ä»¶&#x2F;ç›®å½•æƒé™-chmod"></a>2.ä¿®æ”¹æ–‡ä»¶&#x2F;ç›®å½•æƒé™-chmod</h3><blockquote><p><code>chmod</code></p><p><strong>ç¬¬ä¸€ç§æ–¹å¼: + - &#x3D; å˜æ›´æƒé™</strong></p><p>u:æ‰€æœ‰è€… g:æ‰€æœ‰ç»„ o:å…¶ä»–äºº a:æ‰€æœ‰äºº(uã€gã€oçš„æ€»å’Œ)</p><p>1)<code>chmod u=rwx,g=rx,o=x æ–‡ä»¶/ç›®å½•å</code></p><p>2)<code>chmod o+w æ–‡ä»¶/ç›®å½•å</code></p><p>3)<code>chmod  a-X  æ–‡ä»¶/ç›®å½•å</code></p><p><strong>ç¬¬äºŒç§æ–¹å¼:é€šè¿‡æ•°å­—å˜æ›´æƒé™</strong></p><p>r&#x3D;4 w&#x3D;2 x&#x3D;1</p><p>rwx&#x3D;4+2+1&#x3D;7</p><p><code>chmod u=rwx,g=rx,o=x æ–‡ä»¶ç›®å½•å</code>ç›¸å½“äº <code>chmod 751 æ–‡ä»¶ç›®å½•å</code></p></blockquote><h3 id="3-ä¿®æ”¹æ–‡ä»¶æ‰€ç”¨è€…-chown"><a href="#3-ä¿®æ”¹æ–‡ä»¶æ‰€ç”¨è€…-chown" class="headerlink" title="3.ä¿®æ”¹æ–‡ä»¶æ‰€ç”¨è€…-chown"></a>3.ä¿®æ”¹æ–‡ä»¶æ‰€ç”¨è€…-chown</h3><blockquote><p>chown</p><p>â€‹<code>chown newowner æ–‡ä»¶/ç›®å½• </code>  æ”¹å˜æ‰€æœ‰è€…</p><p>â€‹<code>chown newowner:newgroup æ–‡ä»¶/ç›®å½•</code>æ”¹å˜æ‰€æœ‰è€…å’Œæ‰€åœ¨ç»„</p><p>é€‰é¡¹</p><p>â€‹-R å¦‚æœæ˜¯ç›®å½• åˆ™ä½¿å…¶ä¸‹æ‰€æœ‰å­æ–‡ä»¶æˆ–ç›®å½•é€’å½’ç”Ÿæ•ˆ</p></blockquote><h3 id="4-ä¿®æ”¹æ–‡ä»¶-ç›®å½•æ‰€åœ¨ç»„-chgrp"><a href="#4-ä¿®æ”¹æ–‡ä»¶-ç›®å½•æ‰€åœ¨ç»„-chgrp" class="headerlink" title="4.ä¿®æ”¹æ–‡ä»¶&#x2F;ç›®å½•æ‰€åœ¨ç»„-chgrp"></a>4.ä¿®æ”¹æ–‡ä»¶&#x2F;ç›®å½•æ‰€åœ¨ç»„-chgrp</h3><blockquote><p>chgrp</p><p>â€‹<code>chgrp newgroup æ–‡ä»¶/ç›®å½•</code>  ä¿®æ”¹æ–‡ä»¶&#x2F;ç›®å½•æ‰€åœ¨ç»„</p><p>é€‰é¡¹</p><p>â€‹-R å¦‚æœæ˜¯ç›®å½• åˆ™ä½¿å…¶ä¸‹æ‰€æœ‰å­æ–‡ä»¶æˆ–ç›®å½•é€’å½’ç”Ÿæ•ˆ</p><p>åº”ç”¨å®ä¾‹</p><p>ä½¿ç”¨ rootç”¨æˆ·åˆ›å»ºæ–‡ä»¶ orange.xt,çœ‹çœ‹å½“å‰è¿™ä¸ªæ–‡ä»¶å±äºå“ªä¸ªç»„ï¼Œç„¶åå°†è¿™ä¸ªæ–‡ä»¶æ‰€åœ¨ç»„ï¼Œä¿®æ”¹åˆ° fnuit ç»„</p><ol><li><code>groupadd fruit </code> åˆ›å»ºç»„</li><li><code>toueh orange.txt</code> åˆ›å»ºæ–‡ä»¶</li><li>çœ‹çœ‹å½“å‰è¿™ä¸ªæ–‡ä»¶å±äºå“ªä¸ªç»„-&gt;root ç»„</li><li><code>chgrp fmit orange.txt</code> ä¿®æ”¹æ–‡ä»¶æ‰€åœ¨ç»„</li></ol></blockquote><h3 id="æ¡ˆä¾‹"><a href="#æ¡ˆä¾‹" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h3><blockquote><p>é¢˜ç›®ï¼š</p><p>police  è­¦å¯Ÿç»„</p><p>bandit  åœŸåŒªç»„</p><p>jackï¼Œjerry ï¼š  åœ¨è­¦å¯Ÿç»„<br>xhï¼Œxq    ï¼šåœ¨åœŸåŒªç»„</p><p>1.åˆ›å»ºç»„</p><ul><li><code>groupadd police</code>     <code>groupadd bandit</code></li></ul><p>2.åˆ›å»ºç”¨æˆ·ï¼Œå¹¶å°†ç”¨æˆ·æ”¾åœ¨å¯¹åº”ç»„ä¸­</p><ul><li><code>useradd -g police jack </code></li><li><code>useradd -g police jerry </code></li><li><code>useradd -g bandit xh</code></li><li><code> useradd -g bandit xq</code></li></ul><p>3.jack åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œè‡ªå·±å¯ä»¥è¯»rå†™wï¼Œæœ¬ç»„äººå¯ä»¥è¯»ï¼Œå…¶å®ƒç»„æ²¡äººä»»ä½•æƒé™</p><ul><li><p>é¦–å…ˆiackç™»å½•:</p><ul><li><p><code>vim jack.txt</code> </p></li><li><p><code> chmod 640 jack.txt</code></p></li></ul></li></ul><p>4.jackä¿®æ”¹è¯¥æ–‡ä»¶ï¼Œè®©å…¶å®ƒç»„äººå¯ä»¥è¯»ï¼Œæœ¬ç»„äººå¯ä»¥è¯»å†™</p><ul><li><code>chmod o=r,g=r jack.txt</code></li></ul><p>5.xh æŠ•é  è­¦å¯Ÿï¼Œçœ‹çœ‹æ˜¯å¦å¯ä»¥è¯»å†™</p><p><code>usermod -g police xh</code></p><p>6.æµ‹è¯•ï¼Œçœ‹çœ‹æ˜¯å¦å¯ä»¥è¯»å†™ï¼Œxgæ˜¯å¦å¯ä»¥ï¼Œå°ç»“è®ºï¼Œå°±æ˜¯å¦‚æœè¦å¯¹ç›®å½•å†…çš„æ–‡ä»¶è¿›è¡Œæ“ä½œï¼Œéœ€è¦è¦æœ‰å¯¹è¯¥ç›®å½•çš„ç›¸åº”æƒé™</p></blockquote><h2 id="21-å®šæ—¶ä»»åŠ¡è°ƒåº¦"><a href="#21-å®šæ—¶ä»»åŠ¡è°ƒåº¦" class="headerlink" title="21.å®šæ—¶ä»»åŠ¡è°ƒåº¦"></a>21.å®šæ—¶ä»»åŠ¡è°ƒåº¦</h2><h3 id="1-crondï¼ˆé‡å¤ï¼‰"><a href="#1-crondï¼ˆé‡å¤ï¼‰" class="headerlink" title="1.crondï¼ˆé‡å¤ï¼‰"></a>1.crondï¼ˆé‡å¤ï¼‰</h3><blockquote><p>crontab è¿›è¡Œå®šæ—¶ä»»åŠ¡çš„è®¾ç½®</p><p>æ¦‚è¿°</p><p>â€‹ä»»åŠ¡è°ƒåº¦:æ˜¯æŒ‡ç³»ç»Ÿåœ¨æŸä¸ªæ—¶é—´æ‰§è¡Œçš„ç‰¹å®šçš„å‘½ä»¤æˆ–ç¨‹åºã€‚</p><p>â€‹ä»»åŠ¡è°ƒåº¦åˆ†ç±»:</p><p>â€‹1.ç³»ç»Ÿå·¥ä½œ:æœ‰äº›é‡è¦çš„å·¥ä½œå¿…é¡»å‘¨è€Œå¤å§‹åœ°æ‰§è¡Œã€‚å¦‚ç—…æ¯’æ‰«æç­‰</p><p>â€‹2.ä¸ªåˆ«ç”¨æˆ·å·¥ä½œ:ä¸ªåˆ«ç”¨æˆ·å¯èƒ½å¸Œæœ›æ‰§è¡ŒæŸäº›ç¨‹åºï¼Œæ¯”å¦‚å¯¹mysqlæ•°æ®åº“çš„å¤‡ä»½ã€‚</p><p>å¿«é€Ÿå…¥é—¨</p><ul><li><p>è®¾ç½®ä»»åŠ¡è°ƒåº¦æ–‡ä»¶:&#x2F;etc&#x2F;crontab</p></li><li><p>è®¾ç½®ä¸ªäººä»»åŠ¡è°ƒåº¦ã€‚æ‰§è¡Œcrontab-eå‘½ä»¤</p></li></ul><p>åŸºæœ¬è¯­æ³•</p><ul><li>crontab[é€‰é¡¶]</li></ul><p>å¸¸ç”¨é€‰é¡¹</p><ul><li><p>-eç¼–è¾‘crontabå®šæ—¶ä»»åŠ¡</p></li><li><p>-læŸ¥è¯¢crontabä»»åŠª</p></li><li><p>-råˆ é™¤å½“å‰ç”¨æˆ·æ‰€æœ‰çš„crontabä»»åŠ¡</p></li></ul><p>å¸¸ç”¨å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">crontab -e  ç¼–è¾‘ä»»åŠ¡<br>conrtab -r ç»ˆæ­¢ä»»åŠ¡è°ƒåº¦ã€‚å…¨éƒ¨éƒ½æ²¡äº†<br>crontab -l  åˆ—å‡ºå½“å‰æœ‰é‚£äº›ä»»åŠ¡è°ƒåº¦<br>service crond restart é‡å¯ä»»åŠ¡è°ƒåº¦<br></code></pre></td></tr></table></figure><p>å¦‚å›¾è§£é‡Šï¼š</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240905140616919-17255163783671.png" class title="image-20240905140616919"><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240905144751921-17255188735122.png" class title="image-20240905144751921"></blockquote><h4 id="å…¥é—¨æ¡ˆä¾‹"><a href="#å…¥é—¨æ¡ˆä¾‹" class="headerlink" title="å…¥é—¨æ¡ˆä¾‹"></a>å…¥é—¨æ¡ˆä¾‹</h4><blockquote><p>1.<code>crontabe -e</code></p><p>2.åœ¨æ–‡ä»¶ä¸­è¾“å…¥<code>*/1 * * * * ls -l /etc/ &gt; /tmp/to.txt</code></p><p>è§£é‡Šå¦‚ä¸‹ï¼š5ä¸ªå ä½ç¬¦çš„è¯´æ˜</p><table><thead><tr><th align="center">é¡¹ç›®</th><th align="center">å«ä¹‰</th><th align="center">èŒƒå›´</th></tr></thead><tbody><tr><td align="center">ç¬¬ä¸€ä¸ª  â€œ*â€</td><td align="center">ä¸€å°æ—¶å½“ä¸­çš„ç¬¬å‡ åˆ†é’Ÿ</td><td align="center">0-59</td></tr><tr><td align="center">ç¬¬äºŒä¸ª  â€œ*â€</td><td align="center">ä¸€å¤©å½“ä¸­çš„ç¬¬å‡ å°æ—¶</td><td align="center">0-23</td></tr><tr><td align="center">ç¬¬ä¸‰ä¸ª  â€œ*â€</td><td align="center">ä¸€ä¸ªæœˆå½“ä¸­çš„ç¬¬å‡ å¤©</td><td align="center">1-31</td></tr><tr><td align="center">ç¬¬å››ä¸ª  â€œ*â€</td><td align="center">ä¸€å¹´å½“ä¸­çš„ç¬¬å‡ æœˆ</td><td align="center">1-12</td></tr><tr><td align="center">ç¬¬äº”ä¸ª  â€œ*â€</td><td align="center">ä¸€å‘¨å½“ä¸­çš„æ˜ŸæœŸå‡ </td><td align="center">0-7ï¼ˆ0å’Œ7éƒ½ä»£è¡¨æ˜ŸæœŸæ—¥ï¼‰</td></tr></tbody></table></blockquote><h4 id="æ—¶é—´è§„åˆ™"><a href="#æ—¶é—´è§„åˆ™" class="headerlink" title="æ—¶é—´è§„åˆ™"></a>æ—¶é—´è§„åˆ™</h4><table><thead><tr><th align="center">ç‰¹æ®Šç¬¦å·</th><th align="center">å«ä¹‰</th></tr></thead><tbody><tr><td align="center">*</td><td align="center">ä»£è¡¨ä»»ä½•æ—¶é—´ï¼Œæ¯”å¦‚ç¬¬ä¸€ä¸ª â€œ*â€ å°±ä»£è¡¨ä¸€å°æ—¶ä¸­æ¯åˆ†é’Ÿéƒ½æ‰§è¡Œä¸€æ¬¡çš„æ„æ€ã€‚</td></tr><tr><td align="center">,</td><td align="center">ä»£è¡¨ä¸è¿ç»­çš„æ—¶é—´ã€‚æ¯”å¦‚â€œ0 8,12,16 * * * å‘½ä»¤â€ï¼Œå°±ä»£è¡¨åœ¨æ¯å¤©çš„8ç‚¹0åˆ†ï¼Œ12ç‚¹0åˆ†ï¼Œ16ç‚¹0åˆ†éƒ½æ‰§è¡Œä¸€æ¬¡å‘½ä»¤</td></tr><tr><td align="center">-</td><td align="center">ä»£è¡¨è¿ç»­çš„æ—¶é—´èŒƒå›´ã€‚æ¯”å¦‚â€œ0 5 * * 1-6å‘½ä»¤â€ï¼Œä»£è¡¨åœ¨å‘¨ä¸€åˆ°å‘¨å…­çš„å‡Œæ™¨5ç‚¹0åˆ†æ‰§è¡Œå‘½ä»¤</td></tr><tr><td align="center">*&#x2F;n</td><td align="center">ä»£è¡¨æ¯éš”å¤šä¹…æ‰§è¡Œä¸€æ¬¡ã€‚æ¯”å¦‚â€œ*&#x2F;10 * * * * å‘½ä»¤â€ï¼Œä»£è¡¨æ¯éš”10åˆ†é’Ÿå°±æ‰§è¡Œä¸€éå‘½ä»¤</td></tr></tbody></table><h4 id="ä¸€äº›è§„åˆ™"><a href="#ä¸€äº›è§„åˆ™" class="headerlink" title="ä¸€äº›è§„åˆ™"></a>ä¸€äº›è§„åˆ™</h4><table><thead><tr><th>æ—¶é—´</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>45 22 * * * å‘½ä»¤</td><td>åœ¨22ç‚¹45åˆ†æ‰§è¡Œå‘½ä»¤</td></tr><tr><td>0 17 * * 1å‘½ä»¤</td><td>æ¯å‘¨1 çš„17ç‚¹0åˆ†æ‰§è¡Œå‘½ä»¤</td></tr><tr><td>0 5 1,15 * * å‘½ä»¤</td><td>æ¯æœˆ1å·å’Œ15å·çš„å‡Œæ™¨5ç‚¹0åˆ†æ‰§è¡Œå‘½ä»¤</td></tr><tr><td>40 4 * * 1-5 å‘½ä»¤</td><td>æ¯å‘¨ä¸€åˆ°å‘¨äº”çš„å‡Œæ™¨4ç‚¹40åˆ†æ‰§è¡Œå‘½ä»¤</td></tr><tr><td>*&#x2F;10 4 * * * å‘½ä»¤</td><td>æ¯å¤©çš„å‡Œæ™¨4ç‚¹ï¼Œæ¯éš”10åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡å‘½ä»¤</td></tr><tr><td>0 0 1,15 * 1 å‘½ä»¤</td><td>æ¯æœˆ1å·å’Œ15å·ï¼Œæ¯å‘¨1çš„0ç‚¹0åˆ†éƒ½ä¼šæ‰§è¡Œå‘½ä»¤ã€‚æ³¨æ„:æ˜ŸæœŸå‡ å’Œå‡ å·æœ€å¥½ä¸è¦åŒæ—¶å‡ºç°ï¼Œå› ä¸ºä»–ä»¬å®šä¹‰çš„éƒ½æ˜¯å¤©ã€‚éå¸¸å®¹æ˜“è®©ç®¡ç†å‘˜æ··ä¹±ã€‚</td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr></tbody></table><h3 id="2-at-ä¸€æ¬¡"><a href="#2-at-ä¸€æ¬¡" class="headerlink" title="2.at(ä¸€æ¬¡)"></a>2.at(ä¸€æ¬¡)</h3><blockquote><p>1.åŸºæœ¬ä»‹ç»</p><ol><li><p>atå‘½ä»¤æ˜¯ä¸€æ¬¡æ€§å®šæ—¶è®¡åˆ’ä»»åŠ¡ï¼Œatçš„å®ˆæŠ¤è¿›ç¨‹atdä¼šä»¥åå°æ¨¡å¼è¿è¡Œï¼Œæ£€æŸ¥ä½œä¸šé˜Ÿåˆ—æ¥è¿è¡Œã€‚</p></li><li><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œatdå®ˆæŠ¤è¿›ç¨‹æ¯60ç§’æ£€æŸ¥ä½œä¸šé˜Ÿåˆ—ï¼Œæœ‰ä½œä¸šæ—¶ï¼Œä¼šæ£€æŸ¥ä½œä¸šè¿è¡Œæ—¶é—´ï¼Œå¦‚æœæ—¶é—´ä¸å½“å‰æ—¶é—´åŒ¹é…ï¼Œåˆ™è¿è¡Œæ­¤ä½œä¸šã€‚</p></li><li><p>atå‘½ä»¤æ˜¯ä¸€æ¬¡æ€§å®šæ—¶è®¡åˆ’ä»»åŠ¡ï¼Œæ‰§è¡Œå®Œä¸€ä¸ªä»»åŠ¡åä¸å†æ‰§è¡Œæ­¤ä»»åŠ¡äº†</p></li><li><p>åœ¨ä½¿ç”¨atå‘½ä»¤çš„æ—¶å€™ï¼Œ<strong>ä¸€å®šè¦ä¿è¯è¯atdè¿›ç¨‹çš„å¯åŠ¨</strong>ï¼Œå¯ä»¥ä½¿ç”¨ç›¸å…³æŒ‡ä»¤æ¥æŸ¥çœ‹</p><ul><li><code>ps -ef | grep atd</code></li></ul></li></ol><p>2.atå‘½ä»¤æ ¼å¼</p><p>â€‹at [é€‰é¡¹]  [æ—¶é—´]            ## <strong>Ctrl +D ç»“æŸatå‘½ä»¤ â€”ã€‹è¾“å…¥2æ¬¡</strong></p><p> [é€‰é¡¹] </p><table><thead><tr><th align="center">é€‰é¡¹</th><th align="center">å«ä¹‰</th></tr></thead><tbody><tr><td align="center">-m</td><td align="center">å½“æŒ‡å®šçš„ä»»åŠ¡è¢«å®Œæˆåï¼Œå°†ç»™ç”¨æˆ·å‘é€é‚®ä»¶ï¼Œå³ä½¿æ²¡æœ‰æ ‡å‡†è¾“å‡º</td></tr><tr><td align="center">-I</td><td align="center">atqçš„åˆ«å</td></tr><tr><td align="center">-d</td><td align="center">atrmçš„åˆ«å</td></tr><tr><td align="center">-v</td><td align="center">æ˜¾ç¤ºä»»åŠ¡å°†è¢«æ‰§è¡Œçš„æ—¶é—´</td></tr><tr><td align="center">-c</td><td align="center">æ‰“å°ä»»åŠ¡çš„å†…å®¹åˆ°æ ‡å‡†è¾“å‡º</td></tr><tr><td align="center">-V</td><td align="center">æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯</td></tr><tr><td align="center">-q &lt;é˜Ÿåˆ—&gt;</td><td align="center">ä½¿ç”¨æŒ‡å®šçš„é˜Ÿåˆ—</td></tr><tr><td align="center">-f &lt;æ–‡ä»¶&gt;</td><td align="center">ä»æŒ‡å®šæ–‡ä»¶è¯»å…¥ä»»åŠ¡è€Œä¸æ˜¯ä»æ ‡å‡†è¾“å…¥è¯»å…¥</td></tr><tr><td align="center">-t &lt;æ—¶é—´å‚æ•°&gt;</td><td align="center">ä»¥æ—¶é—´å‚æ•°çš„å½¢å¼æäº¤è¦è¿è¡Œçš„ä»»åŠ¡</td></tr></tbody></table><p>[æ—¶é—´]  </p><blockquote><p>atæ—¶é—´å®šä¹‰:</p><p>1.æ¥å—åœ¨å½“å¤©çš„hh:mm(å°æ—¶:åˆ†é’Ÿ)å¼çš„æ—¶é—´æŒ‡å®šã€‚å‡å¦‚è¯¥æ—¶é—´å·²è¿‡å»ï¼Œé‚£ä¹ˆå°±æ”¾åœ¨ç¬¬äºŒå¤©æ‰§è¡Œã€‚ ä¾‹å¦‚:04:00</p><p>2.ä½¿ç”¨midnight(æ·±å¤œ)ï¼Œnoon(ä¸­åˆ)ï¼Œteatime(é¥®èŒ¶æ—¶é—´ï¼Œä¸€èˆ¬æ˜¯ä¸‹åˆ4ç‚¹)ç­‰æ¯”è¾ƒæ¨¡ç³Šçš„è¯è¯­æ¥æŒ‡å®šæ—¶é—´ã€‚</p><p>3.é‡‡ç”¨12å°æ—¶è®¡æ—¶åˆ¶ï¼Œå³åœ¨æ—¶é—´åé¢åŠ ä¸ŠAM(ä¸Šåˆ)æˆ–PM(ä¸‹åˆ)æ¥è¯´æ˜æ˜¯ä¸Šåˆè¿˜æ˜¯ä¸‹åˆã€‚ä¾‹å¦‚:12pm</p><p>4.æŒ‡å®šå‘½ä»¤æ‰§è¡Œçš„å…·ä½“æ—¥æœŸï¼ŒæŒ‡å®šæ ¼å¼ä¸ºmonthday(æœˆ æ—¥)æˆ–mm&#x2F;dd&#x2F;yy(æœˆ&#x2F;æ—¥&#x2F;å¹´)æˆ–dd.mm.yy(æ—¥.æœˆ.å¹´)ï¼ŒæŒ‡å®šçš„æ—¥æœŸå¿…é¡»è·Ÿåœ¨æŒ‡å®šæ—¶é—´çš„åé¢ã€‚ä¾‹å¦‚:04:00 2021-03-1</p><p>5.ä½¿ç”¨ç›¸å¯¹è®¡æ—¶æ³•ã€‚æŒ‡å®šæ ¼å¼ä¸º:now+counttime-unitsï¼Œnowå°±æ˜¯å½“å‰æ—¶é—´ï¼Œtime-unitsæ˜¯æ—¶é—´å•ä½è¿™é‡Œèƒ½å¤Ÿæ˜¯minutes(åˆ†é’Ÿ)ã€hours(å°æ—¶)ã€days(å¤©)ã€weeks(æ˜ŸæœŸ)ã€‚countæ˜¯æ—¶é—´çš„æ•°é‡ï¼Œå‡ å¤©ï¼Œå‡ å°æ—¶ã€‚ä¾‹å¦‚:now+5minutes</p><p>6.ç›´æ¥ä½¿ç”¨today(ä»Šå¤©)ã€tomorrow(æ˜å¤©)æ¥æŒ‡å®šå®Œæˆå‘½ä»¤çš„æ—¶é—´ã€‚</p></blockquote><p>3.å…¶ä»–å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">ps -ef | grep atd  ##å…ˆçœ‹çœ‹atdæ˜¯å¦åå°è¿è¡Œ ä¸€å®šè¦æœ‰æ‰èƒ½ç”¨atå‘½ä»¤<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">atçš„ä½¿ç”¨</span><br>at 5pm + 2 days  ##2å¤©åä¸‹åˆ5ç‚¹ä¸­æ‰§è¡Œ<br>/bin/ls /home  ##è¾“å…¥å†…å®¹ï¼Œç»“æŸåæŒ‰ä¸¤æ¬¡ ctrl+D<br><br>atq   ##æŸ¥çœ‹ç³»ç»Ÿä¸­è¦æ‰§è¡Œçš„å·¥ä½œä»»åŠ¡<br>atrm ç¼–å·  ##åˆ é™¤æ­¤ç¼–å·çš„ä»»åŠ¡<br></code></pre></td></tr></table></figure><p>4.åŸç†è§£é‡Šï¼š</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240905145953345-17255195952973.png" class title="image-20240905145953345"><p>5.æ¡ˆä¾‹ï¼š</p><blockquote><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240905152212010-17255209334674.png" class title="image-20240905152212010"></blockquote></blockquote><h2 id="22-ç£ç›˜åˆ†åŒº"><a href="#22-ç£ç›˜åˆ†åŒº" class="headerlink" title="22.ç£ç›˜åˆ†åŒº"></a>22.ç£ç›˜åˆ†åŒº</h2><h3 id="1-æ¦‚å¿µ"><a href="#1-æ¦‚å¿µ" class="headerlink" title="1.æ¦‚å¿µ"></a>1.æ¦‚å¿µ</h3><blockquote><p>åŸç†ä»‹ç»</p><p>â€‹Linuxæ¥è¯´æ— è®ºæœ‰å‡ ä¸ªåˆ†åŒºï¼Œåˆ†ç»™å“ªä¸€ç›®å½•ä½¿ç”¨ï¼Œå®ƒå½’æ ¹ç»“åº•å°±åªæœ‰ä¸€ä¸ªæ ¹ç›®å½•ï¼Œä¸€ä¸ªç‹¬ç«‹ä¸”å”¯ä¸€çš„æ–‡ä»¶ç»“æ„ï¼ŒLinuxä¸­æ¯ä¸ªåˆ†åŒºéƒ½æ˜¯ç”¨æ¥ç»„æˆæ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ã€‚</p><p>â€‹Linuxé‡‡ç”¨äº†ä¸€ç§å«â€œè½½å…¥â€çš„å¤„ç†æ–¹æ³•ï¼Œå®ƒçš„æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸­åŒ…å«äº†ä¸€æ•´å¥—çš„æ–‡ä»¶å’Œç›®å½•ï¼Œä¸”å°†ä¸ªåˆ†åŒºå’Œä¸€ä¸ªç›®å½•è”ç³»èµ·æ¥ã€‚è¿™æ—¶è¦è½½å…¥çš„ä¸€ä¸ªåˆ†åŒºå°†ä½¿å®ƒçš„å­˜å‚¨ç©ºé—´åœ¨ä¸€ä¸ªç›®å½•ä¸‹è·å¾—ã€‚</p><p>ç¤ºä¾‹å›¾ï¼š</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240905155111310-17255226754835.png" class title="image-20240905155111310"></blockquote><blockquote><p>linux<strong>ç¡¬ç›˜è¯´æ˜</strong></p><ol><li><p>Linuxç¡¬ç›˜åˆ†IDEç¡¬ç›˜å’ŒSCSIç¡¬ç›˜ï¼Œç›®å‰åŸºæœ¬ä¸Šæ˜¯SCSIç¡¬ç›˜</p></li><li><p>å¯¹äºIDEç¡¬ç›˜ï¼Œé©±åŠ¨å™¨æ ‡è¯†ç¬¦ä¸ºâ€œhdx<del>â€,å…¶ä¸­â€œhdâ€è¡¨æ˜åˆ†åŒºæ‰€åœ¨è®¾å¤‡çš„ç±»å‹è¿™é‡Œæ˜¯æŒ‡IDEç¡¬ç›˜â€œxâ€ä¸ºç›˜å·(aä¸ºåŸºæœ¬ç›˜ï¼Œbä¸ºåŸºæœ¬ä»å±ç›˜ï¼Œcä¸ºè¾…åŠ©ä¸»ç›˜ï¼Œdä¸ºè¾…åŠ©ä»å±ç›˜â€œ</del>â€ä»£è¡¨åˆ†åŒºå‰å››ä¸ªåˆ†åŒºç”¨æ•°å­—1åˆ°4è¡¨ç¤ºï¼Œå®ƒä»¬æ˜¯ä¸»åˆ†åŒºæˆ–æ‰©å±•åˆ†åŒºï¼Œä»5å¼€å§‹å°±æ˜¯é€»è¾‘åˆ†åŒºã€‚ä¾‹ï¼Œhda3è¡¨ç¤ºä¸ºç¬¬ä¸€ä¸ªIDEç¡¬ç›˜ä¸Šçš„ç¬¬ä¸‰ä¸ªä¸»åˆ†åŒºæˆ–æ‰©å±•åˆ†åŒº,hdb2è¡¨ç¤ºä¸ºç¬¬äºŒä¸ªIDEç¡¬ç›˜ä¸Šçš„ç¬¬äºŒä¸ªä¸»åˆ†åŒºæˆ–æ‰©å±•åˆ†åŒºã€‚</p></li><li><p>å¯¹äºSCSIç¡¬ç›˜åˆ™æ ‡è¯†ä¸ºâ€œsdx~â€ï¼ŒSCSIç¡¬ç›˜æ˜¯ç”¨â€œsdâ€æ¥è¡¨ç¤ºåˆ†åŒºæ‰€åœ¨è®¾å¤‡çš„ç±»å‹çš„ï¼Œå…¶ä½™åˆ™å’ŒIDEç¡¬ç›˜çš„è¡¨ç¤ºæ–¹æ³•ä¸€æ ·ã€‚</p></li></ol></blockquote><h3 id="2-å‘½ä»¤-lsblkï¼š"><a href="#2-å‘½ä»¤-lsblkï¼š" class="headerlink" title="2.å‘½ä»¤-lsblkï¼š"></a>2.å‘½ä»¤-lsblkï¼š</h3><blockquote><ul><li><p>æŸ¥çœ‹æ‰€æœ‰è®¾å¤‡æŒ‚è½½æƒ…å†µ</p><ul><li><code>lsblk </code>æˆ–è€…<code>lsblk -f</code></li></ul></li><li><p>ç»“æœè§£é‡Š</p></li></ul><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240905160622522-17255235839246.png" class title="image-20240905160622522"></blockquote><h3 id="3-å¢åŠ ç£ç›˜åº”ç”¨å®ä¾‹"><a href="#3-å¢åŠ ç£ç›˜åº”ç”¨å®ä¾‹" class="headerlink" title="3.å¢åŠ ç£ç›˜åº”ç”¨å®ä¾‹"></a>3.å¢åŠ ç£ç›˜åº”ç”¨å®ä¾‹</h3><blockquote><p>è¯´æ˜:</p><p>â€‹ä¸‹é¢æˆ‘ä»¬ä»¥å¢åŠ ä¸€å—ç¡¬ç›˜ä¸ºä¾‹æ¥ç†Ÿæ‚‰ä¸‹ç£ç›˜çš„ç›¸å…³æŒ‡ä»¤å’Œæ·±å…¥ç†è§£ç£ç›˜åˆ†åŒºã€æŒ‚è½½ã€å¸è½½çš„æ¦‚å¿µã€‚</p><p>é—®é¢˜ï¼šå¦‚ä½•å¢åŠ ä¸€å—ç¡¬ç›˜</p><ol><li><p>è™šæ‹Ÿæœºæ·»åŠ ç¡¬ç›˜</p><ul><li>åœ¨ã€è™šæ‹Ÿæœºã€‘èœå•ä¸­ï¼Œé€‰æ‹©ã€è®¾ç½®ã€‘ï¼Œç„¶åè®¾å¤‡åˆ—è¡¨é‡Œæ·»åŠ ç¡¬ç›˜ï¼Œç„¶åä¸€è·¯ã€ä¸‹ä¸€æ­¥ã€‘ï¼Œä¸­é—´åªæœ‰é€‰æ‹©ç£ç›˜å¤§å°çš„åœ°æ–¹éœ€è¦ä¿®æ”¹ï¼Œè‡³åˆ°å®Œæˆã€‚ç„¶åé‡å¯ç³»ç»Ÿ(æ‰èƒ½è¯†åˆ«)</li></ul></li><li><p>åˆ†åŒº</p><ul><li><p>è§£é‡Šï¼šåˆ†åŒºå‘½ä»¤<code>fdisk /dev/sdb</code>  è§£é‡Šï¼šç»™sdbç¡¬ç›˜åˆ†åŒº  ï¼ˆsdbï¼Œå…¶ä¸­bæ˜¯ä»£è¡¨ç¬¬äºŒå—ç¡¬ç›˜ï¼Œå…·ä½“çœ‹ä¸Šæ–¹çš„<strong>ç¡¬ç›˜è¯´æ˜</strong>ï¼‰</p><ul><li><p>å¼€å§‹å¯¹&#x2F;sdbåˆ†åŒº</p></li><li><table><thead><tr><th align="center">æŒ‡ä»¤</th><th align="center">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">m</td><td align="center">æ˜¾ç¤ºå‘½ä»¤åˆ—è¡¨</td></tr><tr><td align="center">p</td><td align="center">æ˜¾ç¤ºç£ç›˜åˆ†åŒºåŒ fdisk -l</td></tr><tr><td align="center">n</td><td align="center">æ–°å¢åˆ†åŒº</td></tr><tr><td align="center">d</td><td align="center">åˆ é™¤åˆ†åŒº</td></tr><tr><td align="center">w</td><td align="center">å†™å…¥å¹¶é€€å‡º</td></tr></tbody></table></li></ul></li><li><p><strong>å…·ä½“æ“ä½œ</strong></p><ul><li>è¾“å…¥<code>fdisk /dev/sdb</code>å¼€å§‹åˆ†åŒº</li><li>è¾“å…¥nï¼Œæ–°å¢åˆ†åŒºï¼Œç„¶åé€‰æ‹©pï¼Œåˆ†åŒºç±»å‹ä¸ºä¸»åˆ†åŒºã€‚  ï¼ˆé€‰æ‹©è¯´æ˜ï¼še ä¸ºæ‰©å±•åˆ†åŒºï¼‰</li><li>è¾“å…¥1  (è¿™é‡Œä»£è¡¨åˆ›å»ºåˆ†åŒº1)</li><li>ä¸¤æ¬¡å›è½¦é»˜è®¤å‰©ä½™å…¨éƒ¨ç©ºé—´ã€‚</li><li>æœ€åè¾“å…¥wå†™å…¥åˆ†åŒºå¹¶é€€å‡ºï¼Œè‹¥ä¸ä¿å­˜é€€å‡ºè¾“å…¥q</li></ul></li><li><p>å†æ¬¡è¾“å…¥<code>lsblk</code>ï¼Œåˆ™çœ‹åˆ°sdbç¡¬ç›˜ä¸‹å‡ºç°åˆ†åŒºsdb1</p></li></ul></li><li><p>æ ¼å¼åŒ–ï¼ˆç»™åˆ†åŒºæŒ‡å®šæ–‡ä»¶ç±»å‹ï¼‰</p><ul><li>å¯ä»¥å…ˆçœ‹ä¸‹<code>lsblk -f</code>ï¼Œå‘ç°æ–°å»ºçš„åˆ†åŒºæ²¡æœ‰æ–‡ä»¶ç±»å‹</li><li><strong>æ ¼å¼åŒ–æ“ä½œ</strong><ul><li><code>mkfs -t ext4 /dev/sdb1</code>    å…¶ä¸­ext4æ˜¯åˆ†åŒºç±»å‹ ï¼ˆå¤šä¸ªåˆ†åŒº ï¼Œå¤šæ¬¡æ ¼å¼åŒ–ï¼‰</li><li>å†æ¬¡æŸ¥çœ‹<code>lsblk -f</code>ï¼Œå‘ç°æœ‰uuidå’Œæ–‡ä»¶ç±»å‹äº†</li></ul></li></ul></li><li><p>æŒ‚è½½â€“mountï¼ˆæŒ‚è½½æ˜¯å°†ä¸€ä¸ªåˆ†åŒºä¸ä¸€ä¸ªç›®å½•è”ç³»èµ·æ¥ï¼‰</p><ul><li><strong>æ³¨æ„ï¼šç›®å‰ä¸ºæ­¢ï¼Œå‘½ä»¤è¡ŒæŒ‚è½½æ˜¯ä¸´æ—¶çš„ï¼Œæƒ³è¦æ°¸ä¹…åˆ™å°†ç¬¬äº”æ­¥å®Œæˆ</strong></li><li>è¯­æ³•ï¼š<ul><li><code>mount è®¾å¤‡åç§° æŒ‚è½½ç›®å½•</code></li></ul></li><li><strong>å®æ“æ“ä½œ</strong><ul><li>åˆ›å»ºç›®å½•<code>mkdir newdisk</code>ï¼Œï¼ˆæ­¤ç›®å½•æ˜¯è¦æŒ‚è½½çš„ç›®å½•,è¿™é‡Œæ˜¯æ ¹ç›®å½•åˆ›å»ºçš„ï¼ŒæŒ‚è½½çš„ç›®å½•åœ¨å“ªéƒ½å¯ä»¥ï¼‰</li><li>æŒ‚è½½<code>mount /dev/sdb1 /newdisk/</code></li><li>å†æ¬¡æŸ¥çœ‹<code>lsblk -f </code>ï¼Œå‘ç°åˆ†åŒºçš„ç›®å½•ä¹ŸæŒ‚è½½å¥½äº† ï¼Œè¿™æ ·åœ¨æ­¤ç›®å½•ä¸‹çš„å†…å®¹å°±éƒ½å­˜æ”¾åœ¨æ–°å»ºçš„åˆ†åŒºé‡Œé¢äº†</li></ul></li></ul></li><li><p>è®¾ç½®å¯ä»¥è‡ªåŠ¨æŒ‚è½½</p><ul><li>æ°¸ä¹…æŒ‚è½½ï¼šä¿®æ”¹ &#x2F;etc&#x2F;fstab å®ç°ï¼š  <code>vim /etc/fstab</code>  ï¼ŒæŒ‰ç…§ä¸‹é¢çš„æ–¹å¼æ·»åŠ ä¿¡æ¯ï¼Œä¿å­˜é‡å¯reboot<ul><li>1.æ–¹å¼ä¸€ï¼šæŒ‰ç…§åŸæœ‰æ ¼å¼ï¼ˆä½¿ç”¨uuidï¼‰ï¼Œæ·»åŠ ä¿¡æ¯</li><li>2.æ–¹å¼äºŒï¼šæ‰¾åˆ°æ–°å»ºçš„åˆ†åŒºçš„è·¯å¾„ä¹Ÿå¯ä»¥ï¼Œå¦‚å›¾ï¼š</li><li><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240905170735027-17255272563417.png" class title="image-20240905170735027"></li></ul></li><li>æ·»åŠ å®Œæˆåï¼Œä¸é‡å¯ï¼Œåˆ™æ‰§è¡Œ<code>mount -a</code> å³å¯ç”Ÿæ•ˆ</li></ul></li></ol><p> <strong>æ³¨æ„ï¼šå‘½ä»¤è¡ŒæŒ‚è½½æ˜¯ä¸´æ—¶çš„ï¼Œé‡å¯å¤±æ•ˆï¼Œé‡‡ç”¨é…ç½®æ–‡ä»¶çš„æ–¹å¼æ˜¯æ°¸ä¹…çš„ï¼ˆåŸç†æ˜¯ï¼šå¼€æœºä¼šè¯»å–é…ç½®æ–‡ä»¶ï¼‰</strong></p><ol start="6"><li>å¤šè¯´ä¸€ç‚¹ï¼Œå¸è½½åˆ†åŒº<ul><li>è¯­æ³•ï¼š<ul><li><code>umount è®¾å¤‡åç§° </code>   æˆ–è€…  <code>umount æŒ‚è½½ç›®å½•</code><ul><li>ä¾‹å¦‚ï¼š<code>umount /dev/sdb1   æˆ–è€…   umount /newdisk</code></li></ul></li></ul></li></ul></li></ol><p>ç†è§£å›¾ï¼š</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240906105827501-17255915093538.png" class title="image-20240906105827501"></blockquote><h3 id="4-ç£ç›˜æƒ…å†µæŸ¥è¯¢"><a href="#4-ç£ç›˜æƒ…å†µæŸ¥è¯¢" class="headerlink" title="4.ç£ç›˜æƒ…å†µæŸ¥è¯¢"></a>4.ç£ç›˜æƒ…å†µæŸ¥è¯¢</h3><p>1.æŸ¥è¯¢ç³»ç»Ÿæ•´ä½“ç£ç›˜ä½¿ç”¨æƒ…å†µ</p><blockquote><p>df -h</p><p>æ³¨æ„ï¼šä½¿ç”¨é‡åˆ°è¾¾80%ï¼Œè¦æƒ³åŠæ³•äº†</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240906110513050-17255919139819.png" class title="image-20240906110513050"></blockquote><p>2.æŸ¥è¯¢æŒ‡å®šç›®å½•çš„ç£ç›˜å ç”¨æƒ…å†µ</p><blockquote><p>du -h  [ç›®å½•å¯é€‰]è§£é‡Šï¼šæŸ¥è¯¢æŒ‡å®šç›®å½•çš„ç£ç›˜å ç”¨æƒ…å†µï¼Œé»˜è®¤ä¸ºå½“å‰ç›®å½•</p><ul><li><p>å‚æ•°</p><ul><li><p>-s æŒ‡å®šè‡ªå½•å ç”¨å¤§å°æ±‡æ€»Â·ã€</p></li><li><p>-h å¸¦è®¡é‡å•ä½</p></li><li><p>-a å«æ–‡ä»¶</p></li><li><p>â€“max-depth&#x3D;1 å­ç›®å½•æ·±åº¦</p></li><li><p>-c åˆ—å‡ºæ˜ç»†çš„åŒæ—¶ï¼Œå¢åŠ æ±‡æ€»å€¼</p></li></ul></li></ul><p>æ¡ˆä¾‹</p><ul><li><code>du -ha --max-depth=1 /opt</code> è¿™æ ·æ›´æ¸…æ™°</li><li><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240906111303426-172559238443710.png" class title="image-20240906111303426"></li></ul></blockquote><p>3.<strong>ç£ç›˜å®ç”¨æŒ‡ä»¤</strong></p><blockquote><p>1.ç»Ÿè®¡&#x2F;optæ–‡ä»¶å¤¹ä¸‹æ–‡ä»¶çš„ä¸ªæ•°</p><p><code>ls -l /opt | grep &quot;^-&quot; | wc -l</code></p><p>2.ç»Ÿè®¡&#x2F;optæ–‡ä»¶å¤¹ä¸‹ç›®å½•çš„ä¸ªæ•°</p><p><code>ls -l /opt | grep &quot;^d&quot; | wc -l</code></p><p>3.ç»Ÿè®¡&#x2F;optæ–‡ä»¶å¤¹ä¸‹æ–‡ä»¶çš„ä¸ªæ•°ï¼ŒåŒ…æ‹¬å­æ–‡ä»¶å¤¹é‡Œçš„</p><p><code>ls -lR /opt | grep &quot;^-&quot; | wc -l</code></p><p>4.ç»Ÿè®¡&#x2F;optæ–‡ä»¶å¤¹ä¸‹ç›®å½•çš„ä¸ªæ•°ï¼ŒåŒ…æ‹¬å­æ–‡ä»¶å¤¹é‡Œçš„</p><p><code>ls -lR /opt | grep &quot;^d&quot; | wc -l</code></p><p>5.ä»¥æ ‘çŠ¶æ˜¾ç¤ºç›®å½•ç»“æ„ ï¼ˆ<strong>æ³¨æ„ï¼š</strong>å¦‚æœæ²¡æœ‰tree ï¼Œåˆ™<code>yum install tree</code>ï¼‰</p><p><code>tree /home/</code></p></blockquote><h2 id="23-ç½‘ç»œé…ç½®"><a href="#23-ç½‘ç»œé…ç½®" class="headerlink" title="23.ç½‘ç»œé…ç½®"></a>23.ç½‘ç»œé…ç½®</h2><h3 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h3><p>1.ç½‘ç»œç†è§£å›¾</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240906140332259.png" class title="image-20240906140332259"><p>2.ä¸Šé¢çš„è™šæ‹Ÿæœºip 192.168.2.x ï¼Œä¸ºä»€ä¹ˆå‰ç¼€æ˜¯è¿™ä¸ª</p><blockquote><p>æŸ¥çœ‹vmä¸Šæ–¹çš„é€‰é¡¹å¡â€”-ã€‹è™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨â€”ã€‹ç‚¹å‡»vm8</p></blockquote><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240906141731604-172560345276611.png" class title="image-20240906141731604"><p>3.æŸ¥çœ‹ç½‘ç»œipå’Œç½‘å…³</p><blockquote><ul><li>win<ul><li>åœ¨cmdä¸­ è¾“å…¥<code>ipconfig</code></li></ul></li><li>linux<ul><li><code>ifconfig</code></li></ul></li></ul></blockquote><p>4.ping æµ‹è¯•ç½‘ç»œè¿æ¥æƒ…å†µ</p><blockquote><p>ping ip</p></blockquote><h3 id="linuxç½‘ç»œé…ç½®"><a href="#linuxç½‘ç»œé…ç½®" class="headerlink" title="linuxç½‘ç»œé…ç½®"></a>linuxç½‘ç»œé…ç½®</h3><blockquote><ul><li><p>ç¬¬ä¸€ç§æ–¹æ³•(è‡ªåŠ¨è·å–)</p><ul><li>è¯´æ˜:ç™»é™†åï¼Œé€šè¿‡ç•Œé¢çš„æ¥è®¾ç½®è‡ªåŠ¨è·å–ipï¼Œç‰¹ç‚¹:linuxå¯åŠ¨åä¼šè‡ªåŠ¨è·å–IP,ç¼ºç‚¹æ˜¯æ¯æ¬¡è‡ªåŠ¨è·å–çš„ipåœ°å€å¯èƒ½ä¸ä¸€æ ·ã€‚</li></ul></li><li><p>ç¬¬äºŒç§æ–¹æ³•(æŒ‡å®šip)</p><ul><li><p>1.è¯´æ˜ç›´æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶æ¥æŒ‡å®šIPï¼Œå¹¶å¯ä»¥è¿æ¥åˆ°å¤–ç½‘(ç¨‹åºå‘˜æ¨è)</p><ul><li>ç¼–è¾‘ <code>vim /etc/sysconfig/network-scripts/ifcfg-ens33</code></li></ul></li><li><p>2.è¦æ±‚:å°†ipåœ°å€é…ç½®çš„é™æ€çš„ï¼Œæ¯”å¦‚:ipåœ°å€ä¸º192.168.200.130</p><ul><li>ifcfg-ens33 æ–‡ä»¶è¯´æ˜ï¼ˆä¸‹é¢æ”¹çš„ï¼Œè¦æ”¹ï¼Œæ²¡æœ‰åˆ™æ·»åŠ ï¼Œå…¶ä½™ä¸æ‡‚ï¼Œå¯èƒ½æ¯ä¸ªç”µè„‘æ–‡ä»¶ä¸ä¸€æ ·ï¼‰</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs shell">DEVICE=ets33 #æ¥å£å(è®¾å¤‡,ç½‘å¡)<br>HWADDR=00:0C:2x:6x:0x:xx #MACåœ°å€<br>TYPE=Ethernet   #ç½‘ç»œå…‰å‹(é€šå¸¸æ˜¯Ethemct)<br>UUID=926a57ba-92c6-4231-bacb-f27c5c6a9f44    #éšæœºid<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™ç½‘ç»œæ¥å£æ˜¯å¦æœ‰æ•ˆ(<span class="hljs-built_in">yes</span>/no)-------æ”¹<span class="hljs-built_in">yes</span>,</span><br>ONBOOT=yes<br><span class="hljs-meta prompt_">#</span><span class="language-bash">IPçš„é…ç½®æ–¹æ³•[none|static|bootp|dhcp] (å¼•å¯¼æ—¶ä¸ä½¿ç”¨åè®®|é™æ€åˆ†é…IP|BOOTPåè®®|DHCPåè®®)---æ”¹static</span><br>BOOTPROTO=static<br><span class="hljs-meta prompt_">#</span><span class="language-bash">IPåœ°å€----æ”¹ï¼ˆæ²¡æœ‰ï¼Œå†™ä¸€ä¸ªipï¼‰</span><br>IPADDR=192.168.200.130<br><span class="hljs-meta prompt_">#</span><span class="language-bash">ç½‘å…³----æ”¹ï¼ˆæ²¡æœ‰ï¼Œå†™ä¸€ä¸ªipï¼‰</span><br>GATEWAY=192.168.200.2<br><span class="hljs-meta prompt_">#</span><span class="language-bash">åŸŸåè§£æå™¨----æ”¹ï¼ˆæ²¡æœ‰ï¼Œå†™ä¸€ä¸ªipï¼‰</span><br>DNS1=192.168.200.2<br></code></pre></td></tr></table></figure></li><li><p>3.å†ä»vmä¸­æ‰“å¼€è™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨</p><ul><li>ç‚¹å‡»v8ç½‘ç»œï¼Œä¿®æ”¹ä¸‹é¢çš„å­ç½‘ipï¼š192.168.200.0ï¼ˆå› ä¸ºä¸¤è¾¹çš„ç½‘æ®µè¦ä¸€è‡´ï¼‰</li><li>åœ¨ç‚¹å‡»NATè®¾ç½®ï¼Œä¿®æ”¹é‡Œé¢çš„ç½‘å…³ipï¼š192.168.200.2 ï¼ˆè¦å’Œlinuxç³»ç»Ÿä¸­çš„ç½‘å…³ä¸€è‡´ï¼‰</li></ul></li><li><p>4.é‡å¯ç”Ÿæ•ˆï¼Œ<code>reboot</code>  æˆ–   <code>service network restart</code></p></li></ul></li></ul></blockquote><h3 id="è®¾ç½®ä¸»æœºåå’Œhostsæ˜ å°„"><a href="#è®¾ç½®ä¸»æœºåå’Œhostsæ˜ å°„" class="headerlink" title="è®¾ç½®ä¸»æœºåå’Œhostsæ˜ å°„"></a>è®¾ç½®ä¸»æœºåå’Œhostsæ˜ å°„</h3><p>1.è®¾ç½®ä¸»æœºå</p><blockquote><p>1.è®¾ç½®ä¸»æœºå</p><ul><li>ä¸ºäº†æ–¹ä¾¿è®°å¿†ï¼Œå¯ä»¥ç»™linuxç³»ç»Ÿè®¾ç½®ä¸»æœºåï¼Œä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹ä¸»æœºå</li></ul><p>2.æŒ‡ä»¤: :æŸ¥çœ‹ä¸»æœºå</p><ul><li><code>hostname</code></li></ul><p></p><p>3.ä¿®æ”¹</p><ul><li>ä»¶åœ¨&#x2F;etc&#x2F;hostname æŒ‡å®š</li></ul><p>4.ä¿®æ”¹åï¼Œé‡å¯ç”Ÿæ•ˆ  <code>reboot</code></p></blockquote><p>2.è®¾ç½®hostsæ˜ å°„</p><blockquote><p><strong>æ€è€ƒ:å¦‚ä½•é€šè¿‡ ä¸»æœºåèƒ½å¤Ÿæ‰¾åˆ°(æ¯”å¦‚ping)æŸä¸ªlinuxç³»ç»Ÿ?</strong></p><ul><li><p>windows</p><ul><li>åœ¨C:\Windows\System32\drivers\etc\hosts æ–‡ä»¶æŒ‡å®šå³å¯<ul><li>æ¡ˆä¾‹: 192.168.200.130 hspedu100<ul><li>æ“ä½œï¼šä¿®æ”¹hostsæ–‡ä»¶ï¼Œæ·»åŠ 192.168.200.130 hspedu100</li></ul></li></ul></li></ul></li><li><p>linux</p><ul><li>åœ¨&#x2F;etc&#x2F;hosts æ–‡ä»¶ æŒ‡å®š <ul><li>æ¡ˆä¾‹: 192.168.200.1 ThinkPad-PC<ul><li>æ“ä½œï¼š<code>vim /etc/hosts</code>æ·»åŠ 192.168.200.1 ThinkPad-PC</li></ul></li></ul></li></ul></li></ul></blockquote><h3 id="ä¸»æœºåè§£æè¿‡ç¨‹åˆ†æ"><a href="#ä¸»æœºåè§£æè¿‡ç¨‹åˆ†æ" class="headerlink" title="ä¸»æœºåè§£æè¿‡ç¨‹åˆ†æ"></a>ä¸»æœºåè§£æè¿‡ç¨‹åˆ†æ</h3><p>1.æ¦‚å¿µï¼š</p><blockquote><p>Hostsæ˜¯ä»€ä¹ˆ</p><ul><li>ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œç”¨æ¥è®°å½•IP å’Œ Hostname(ä¸»æœºå)çš„æ˜ å°„å…³ç³»</li></ul><p>DNS</p><ul><li>DNSï¼Œå°±æ˜¯Domain Name Systemçš„ç¼©å†™ï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯åŸŸåç³»ç»Ÿ</li><li>æ˜¯äº’è”ç½‘ä¸Šä½œä¸ºåŸŸåå’ŒIPåœ°å€ç›¸äº’æ˜ å°„çš„ä¸€ä¸ªåˆ†å¸ƒå¼æ•°æ®åº“</li></ul></blockquote><p>2.dnsè§£æè¿‡ç¨‹ï¼šæµè§ˆå™¨ç¼“å­˜â€”ã€‹ç”µè„‘DNSç¼“å­˜â€”ã€‹æœ¬åœ°hostsæ–‡ä»¶â€”-ã€‹ç½‘ç»œä¸­DNSåŸŸåæœåŠ¡</p><blockquote><p><strong>åº”ç”¨å®ä¾‹:ç”¨æˆ·åœ¨æµè§ˆå™¨è¾“å…¥äº† <a href="http://www.baidu.com/">www.baidu.com</a></strong></p><p>1.æµè§ˆå™¨å…ˆæ£€æŸ¥æµè§ˆå™¨ç¼“å­˜ä¸­æœ‰æ²¡æœ‰è¯¥åŸŸåè§£æIPåœ°å€ï¼Œæœ‰å°±å…ˆè°ƒç”¨è¿™ä¸ªIPå®Œæˆè§£æ;å¦‚æœæ²¡æœ‰ï¼Œå°±DNSè§£æå™¨ç¼“å­˜ï¼Œå¦‚æœæœ‰ç›´æ¥è¿”å›IPå®Œæˆè§£æã€‚è¿™ä¸¤ä¸ªç¼“å­˜ï¼Œå¯ä»¥ç†è§£ä¸º æœ¬åœ°è§£æå™¨ç¼“å­˜</p><p>2.ä¸€èˆ¬æ¥è¯´ï¼Œå½“ç”µè„‘ç¬¬ä¸€æ¬¡æˆåŠŸè®¿é—®æŸä¸€ç½‘ç«™åï¼Œåœ¨ä¸€å®šæ—¶é—´å†…ï¼Œæµè§ˆå™¨æˆ–æ“ä½œç³»ç»Ÿä¼šç¼“å­˜ä»–çš„IPåœ°å€(DNSè§£æè®°å½•)ã€‚å¦‚åœ¨cmdçª—å£ä¸­è¾“å…¥</p><ul><li><p><code>ipconfig /displaydns</code>&#x2F;&#x2F;DNSåŸŸåè§£æç¼“å­˜</p></li><li><p><code>ipconfig /flushdns</code>&#x2F;&#x2F;æ‰‹åŠ¨æ¸…ç†dnsç¼“å­˜</p></li></ul><p>3.å¦‚æœæœ¬åœ°è§£æå™¨ç¼“å­˜æ²¡æœ‰æ‰¾åˆ°å¯¹åº”æ˜ å°„ï¼Œæ£€æŸ¥ç³»ç»Ÿä¸­hostsæ–‡ä»¶ä¸­æœ‰æ²¡æœ‰é…ç½®å¯¹åº”çš„åŸŸåIPæ˜ å°„ï¼Œå¦‚æœæœ‰ï¼Œåˆ™å®Œæˆè§£æå¹¶è¿”å›ã€‚</p><p>4.å¦‚æœ æœ¬åœ°DNSè§£æå™¨ç¼“å­˜ å’Œ hostsæ–‡ä»¶ ä¸­å‡æ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„IPåˆ™åˆ°åŸŸåæœåŠ¡DNSè¿›è¡Œè§£æåŸŸ</p></blockquote><p>ç†è§£å›¾ï¼šï¼ˆè¿™ä¸ªå›¾å°‘äº†æµè§ˆå™¨ç¼“å­˜ï¼Œå› ä¸ºå¯èƒ½æ˜¯é€šè¿‡pingæ¥æ‰§è¡Œçš„ï¼‰</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240906162643789-172561120863012.png" class title="image-20240906162643789"><h2 id="24-è¿›ç¨‹-ps"><a href="#24-è¿›ç¨‹-ps" class="headerlink" title="24.è¿›ç¨‹-ps"></a>24.è¿›ç¨‹-ps</h2><h3 id="1-åŸºç¡€ä»‹ç»"><a href="#1-åŸºç¡€ä»‹ç»" class="headerlink" title="1.åŸºç¡€ä»‹ç»"></a>1.åŸºç¡€ä»‹ç»</h3><blockquote><p>åœ¨LINUXä¸­ï¼Œæ¯ä¸ªæ‰§è¡Œçš„ç¨‹æ‘©éƒ½ç§°ä¸ºä¸€ä¸ªè¿›ç¨‹ã€‚æ¯ä¸€ä¸ªè¿›ç¨‹éƒ½åˆ†é…ä¸€ä¸ªIDå·(pid,è¿›ç¨‹å·)ã€‚&#x3D;&gt;windows &#x3D;&gt;linuX</p><p>2.æ¯ä¸ªè¿›ç¨‹éƒ½å¯èƒ½ä»¥ä¸¤ç§æ–¹å¼å­˜åœ¨çš„ã€‚å‰å°ä¸åå°ï¼Œæ‰€è°“å‰å°è¿›ç¨‹å°±æ˜¯ç”¨æˆ·ç›®å‰çš„å±å¹•ä¸Šå¯ä»¥è¿›è¡Œæ“ä½œçš„ã€‚åå°è¿›ç¨‹åˆ™æ˜¯å®é™…åœ¨æ“ä½œï¼Œä½†ç”±äºå±å¹•ä¸Šæ— æ³•çœ‹åˆ°çš„è¿›ç¨‹ï¼Œé€šå¸¸ä½¿ç”¨åå°æ–¹å¼æ‰§è¡Œã€‚</p><p>3.ä¸€èˆ¬ç³»ç»Ÿçš„æœåŠ¡éƒ½æ˜¯ä»¥åå°è¿›ç¨‹çš„æ–¹å¼å­˜åœ¨ï¼Œè€Œä¸”éƒ½ä¼šå¸¸é©»åœ¨ç³»ç»Ÿä¸­ã€‚ç›´åˆ°å…³æœºæ‰æ‰ç»“æŸã€‚</p></blockquote><blockquote><p><strong>è¿›ç¨‹å’Œç¨‹åºçš„åŒºåˆ«</strong></p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240909094311668.png" class title="image-20240909094311668"></blockquote><h3 id="2-å‘½ä»¤-ps"><a href="#2-å‘½ä»¤-ps" class="headerlink" title="2.å‘½ä»¤-ps"></a>2.å‘½ä»¤-ps</h3><blockquote><p>ps    :ç”¨æ¥æŸ¥çœ‹ç›®å‰ç³»ç»Ÿä¸­ï¼Œæœ‰å“ªäº›æ­£åœ¨æ‰§è¡Œï¼Œä»¥åŠå®ƒä»¬æ‰§è¡Œçš„çŠ¶å†µã€‚å¯ä»¥ä¸åŠ ä»»ä½•å‚æ•°</p><p>æ˜¾ç¤ºçš„ç»“æœï¼š</p><ul><li>pid      è¿›ç¨‹è¯†åˆ«å·</li><li>TTY         ç»ˆç«¯æœºå·</li><li>TIME      æ­¤è¿›ç¨‹æ‰€æ¶ˆCPUæ—¶é—´</li><li>CMD      æ­£åœ¨æ‰§è¡Œçš„å‘½ä»¤æˆ–è¿›ç¨‹å</li></ul><p>è¯­æ³•ï¼š</p><ul><li>-a  æ˜¾ç¤ºå½“å‰ç»ˆç«¯çš„æ‰€æœ‰è¿›ç¨‹ä¿¡æ¯</li><li>-u  ä»¥ç”¨æˆ·çš„æ ¼å¼æ˜¾ç¤ºè¿›ç¨‹ä¿¡æ¯</li><li>-x  æ˜¾ç¤ºåå°è¿›ç¨‹è¿è¡Œçš„å‚æ•°</li><li>-e  æ˜¾ç¤ºæ‰€ç”¨è¿›ç¨‹</li><li>-f  å…¨æ ¼å¼</li></ul></blockquote><blockquote><p><code>ps -aux </code>    æˆ– <code>ps -aux | grep sshd</code>   æˆ– <code>ps -ef | grep sshd </code></p><p>æ˜¾ç¤ºç»“æœï¼š</p><table><thead><tr><th align="center">æ ‡é¢˜</th><th align="center">è§£é‡Š</th></tr></thead><tbody><tr><td align="center">USER</td><td align="center">ç”¨æˆ·åç§°</td></tr><tr><td align="center">PID</td><td align="center">è¿›ç¨‹å·</td></tr><tr><td align="center">%CPU</td><td align="center">è¿›ç¨‹å ç”¨CPUçš„ç™¾åˆ†æ¯”</td></tr><tr><td align="center">%MEM</td><td align="center">è¿›ç¨‹å ç”¨ç‰©ç†å†…å­˜çš„ç™¾åˆ†æ¯”</td></tr><tr><td align="center">VSZ</td><td align="center">è¿›ç¨‹å ç”¨çš„è™šæ‹Ÿå†…å­˜å¤§å°(å•ä½:KB</td></tr><tr><td align="center">RSS</td><td align="center">è¿›ç¨‹å ç”¨çš„ç‰©ç†å†…å­˜å¤§å°(å•ä½:KB</td></tr><tr><td align="center">TTY</td><td align="center">ç»ˆç«¯åç§°,ç¼©å†™</td></tr><tr><td align="center">STAT</td><td align="center">è¿›ç¨‹çŠ¶æ€ï¼Œå…¶ä¸­S-ç¡çœ ï¼Œs-è¡¨ç¤ºè¯¥è¿›ç¨‹æ˜¯ä¼šè¯çš„å…ˆå¯¼è¿›ç¨‹ï¼ŒN-è¡¨ç¤ºè¿›ç¨‹æ‹¥æœ‰æ¯”æ™®é€šä¼˜å…ˆçº§æ›´ä½çš„ä¼˜å…ˆçº§ï¼ŒR-æ­£åœ¨è¿è¡Œï¼ŒD-çŸ­æœŸç­‰å¾…ï¼Œ**Z-åƒµæ­»è¿›ç¨‹(ç¨‹åºæ­»äº†ï¼Œè¿˜åœ¨å ç”¨å†…å­˜ï¼Œéœ€è¦æ‰‹åŠ¨æ¸…ç†)**ï¼ŒT-è¢«è·Ÿè¸ªæˆ–è€…è¢«åœæ­¢ç­‰ç­‰</td></tr><tr><td align="center">STARTED</td><td align="center">è¿›ç¨‹çš„å¯åŠ¨æ—¶é—´</td></tr><tr><td align="center">TIME</td><td align="center">CPUæ—¶é—´ï¼Œå³è¿›ç¨‹ä½¿ç”¨CPUçš„æ€»æ—¶é—´</td></tr><tr><td align="center">COMMAND</td><td align="center">å¯åŠ¨è¿›ç¨‹æ‰€ç”¨çš„å‘½ä»¤å’Œå‚æ•°ï¼Œå¦‚æœè¿‡é•¿ä¼šè¢«æˆªæ–­æ˜¾ç¤º</td></tr></tbody></table><p>å¦‚å›¾ï¼š</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240909101036677-172584783882613.png" class title="image-20240909101036677"></blockquote><h3 id="3-åº”ç”¨å®ä¾‹-ps-ef"><a href="#3-åº”ç”¨å®ä¾‹-ps-ef" class="headerlink" title="3.åº”ç”¨å®ä¾‹-ps -ef"></a>3.åº”ç”¨å®ä¾‹-ps -ef</h3><blockquote><p><code>ps -ef </code>ä»¥å…¨æ ¼å¼æ˜¾ç¤ºå½“å‰æ‰€æœ‰çš„è¿›ç¨‹ï¼ŒæŸ¥çœ‹è¿›ç¨‹çš„<strong>çˆ¶è¿›ç¨‹</strong> </p><p>ç»“æœå±•ç¤ºï¼š</p><table><thead><tr><th align="center">æ ‡é¢˜</th><th align="center">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">UID</td><td align="center">ç”¨æˆ·ID</td></tr><tr><td align="center">PID</td><td align="center">è¿›ç¨‹ID</td></tr><tr><td align="center">PPID</td><td align="center">çˆ¶è¿›ç¨‹ID</td></tr><tr><td align="center">C</td><td align="center">CPUç”¨äºè®¡ç®—æ‰§è¡Œä¼˜å…ˆçº§çš„å› å­ã€‚æ•°å€¼è¶Šå¤§ï¼Œè¡¨æ˜è¿›ç¨‹æ˜¯CPUå¯†é›†å‹è¿ç®—ï¼Œæ‰§è¡Œä¼˜å…ˆçº§ä¼šé™ä½æ•°å€¼è¶Šå°ï¼Œè¡¨æ˜è¿›ç¨‹æ˜¯I0å¯†é›†å‹è¿ç®—ï¼Œæ‰§è¡Œä¼˜å…ˆçº§ä¼šæé«˜</td></tr><tr><td align="center">STIME</td><td align="center">è¿›ç¨‹å¯åŠ¨çš„æ—¶é—´</td></tr><tr><td align="center">TTY</td><td align="center">å®Œæ•´çš„ç»ˆç«¯åç§°</td></tr><tr><td align="center">TIME</td><td align="center">CPUæ—¶é—´</td></tr><tr><td align="center">CMD</td><td align="center">å¯åŠ¨è¿›ç¨‹æ‰€ç”¨çš„å‘½ä»¤å’Œå‚æ•°</td></tr></tbody></table></blockquote><h3 id="4-ç»ˆæ­¢è¿›ç¨‹-kill-killall"><a href="#4-ç»ˆæ­¢è¿›ç¨‹-kill-killall" class="headerlink" title="4.ç»ˆæ­¢è¿›ç¨‹-kill killall"></a>4.ç»ˆæ­¢è¿›ç¨‹-kill killall</h3><blockquote><p>ä»‹ç»:</p><ul><li>è‹¥æ˜¯æŸä¸ªè¿›ç¨‹æ‰§è¡Œä¸€åŠéœ€è¦åœæ­¢æ—¶ï¼Œæˆ–æ˜¯å·²æ¶ˆäº†å¾ˆå¤§çš„ç³»ç»Ÿèµ„æºæ—¶ï¼Œæ­¤æ—¶å¯ä»¥è€ƒè™‘åœæ­¢è¯¥è¿›ç¨‹ã€‚ä½¿ç”¨kiå‘½ä»¤æ¥å®Œæˆæ­¤é¡¹ä»»åŠ¡ã€‚</li></ul><p>åŸºæœ¬è¯­æ³•</p><ul><li>kill [é€‰é¡¹]   è¿›ç¨‹å·    :(åŠŸèƒ½æè¿°:é€šè¿‡è¿›ç¨‹å·æ€æ­»&#x2F;ç»ˆæ­¢è¿›ç¨‹)</li><li>killall è¿›ç¨‹åç§°   : (åŠŸèƒ½æè¿°:é€šè¿‡è¿›ç¨‹åç§°æ€æ­»è¿›ç¨‹ï¼ˆ<strong>åŒ…æ‹¬å­è¿›ç¨‹</strong>ï¼‰ï¼Œä¹Ÿæ”¯æŒé€šé…ç¬¦ï¼Œè¿™åœ¨ç³»ç»Ÿå› è´Ÿè½½è¿‡å¤§è€Œå˜å¾—å¾ˆæ…¢æ—¶å¾ˆæœ‰ç”¨)</li></ul><p>å¸¸ç”¨é€‰é¡¹</p><ul><li>-9  è¡¨ç¤ºå¼ºè¿«è¿›ç¨‹ç«‹å³åœæ­¢</li></ul></blockquote><h3 id="5-pstreeæŒ‡ä»¤"><a href="#5-pstreeæŒ‡ä»¤" class="headerlink" title="5.pstreeæŒ‡ä»¤"></a>5.pstreeæŒ‡ä»¤</h3><blockquote><p>è¿›ç¨‹æ ‘å±•ç¤ºè¿›ç¨‹ä¹‹é—´çš„å…³ç³»</p></blockquote><blockquote><p>åŸºæœ¬è¯­æ³•</p><ul><li>pstree  [é€‰é¡¹]             ::å¯ä»¥æ›´åŠ ç›´è§‚çš„æ¥çœ‹è¿›ç¨‹ä¿¡æ¯</li></ul><p>å¸¸ç”¨é€‰é¡¹</p><ul><li>-pæ˜¾ç¤ºè¿›ç¨‹çš„PID</li><li>-u æ˜¾ç¤ºè¿›ç¨‹çš„æ‰€å±ç”¨æˆ·</li></ul><p>åº”ç”¨å®ä¾‹:</p><ul><li>æ¡ˆä¾‹1:è¯·ä½ æ ‘çŠ¶çš„å½¢å¼æ˜¾ç¤ºè¿›ç¨‹çš„pid</li><li><code>pstree -p</code></li><li>æ¡ˆä¾‹2:è¯·ä½ æ ‘çŠ¶çš„å½¢å¼è¿›ç¨‹çš„ç”¨æˆ·</li><li><code>pstree -u</code></li></ul></blockquote><h2 id="25-æœåŠ¡ç®¡ç†"><a href="#25-æœåŠ¡ç®¡ç†" class="headerlink" title="25.æœåŠ¡ç®¡ç†"></a>25.æœåŠ¡ç®¡ç†</h2><h3 id="1-æœåŠ¡åˆæ­¥äº†è§£"><a href="#1-æœåŠ¡åˆæ­¥äº†è§£" class="headerlink" title="1.æœåŠ¡åˆæ­¥äº†è§£"></a>1.æœåŠ¡åˆæ­¥äº†è§£</h3><blockquote><p>ä»‹ç»:</p><p>æœåŠ¡(service)æœ¬è´¨å°±æ˜¯è¿›ç¨‹ä½†æ˜¯æ˜¯è¿è¡Œåœ¨åå°çš„ï¼Œé€šå¸¸éƒ½ä¼šç›‘å¬æŸä¸ªç«¯å£ï¼Œç­‰å¾…å…¶å®ƒç¨‹åºçš„è¯·æ±‚ï¼Œæ¯”å¦‚(mysqldï¼Œsshd é˜²ç«å¢™ç­‰)å› æ­¤æˆ‘ä»¬åˆç§°ä¸ºå®ˆæŠ¤è¿›ç¨‹ï¼Œæ˜¯Linuxä¸­éå¸¸é‡è¦çš„çŸ¥è¯†ç‚¹ã€‚[åŸç†å›¾]</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240909123705242-172585662617114.png" class title="image-20240909123705242"><p>serviceç®¡ç†æŒ‡ä»¤</p><ul><li>1.<code>service æœåŠ¡å  [start|stop|restart |reload |status]</code></li><li>2.åœ¨CentOS7.0åå¾ˆå¤šæœåŠ¡ä¸å†ä½¿ç”¨service,è€Œæ˜¯ systemctl(åé¢ä¸“é—¨è®²)</li><li>3.service æŒ‡ä»¤ç®¡ç†çš„æœåŠ¡åœ¨ &#x2F;etc&#x2F;init.d æŸ¥çœ‹   (è¿™é‡Œå¯ä»¥æŸ¥çœ‹serviceèƒ½ç®¡ç†çš„æœåŠ¡â€”ã€‹ç»¿è‰²çš„æ˜¯æœåŠ¡)<ul><li>æ–¹å¼1ï¼š<code>ls -l /etc/init.d</code> <ul><li><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240909123914266.png" class title="image-20240909123914266"></li></ul></li><li>æ–¹å¼2ï¼š<code>setup</code>   æŸ¥çœ‹æ‰€æœ‰çš„æœåŠ¡<ul><li><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240909124435381-172585707669215.png" class title="image-20240909124435381"></li></ul></li></ul></li></ul></blockquote><h3 id="2-æœåŠ¡çš„è¿è¡Œçº§åˆ«-runlevel"><a href="#2-æœåŠ¡çš„è¿è¡Œçº§åˆ«-runlevel" class="headerlink" title="2.æœåŠ¡çš„è¿è¡Œçº§åˆ«(runlevel):"></a>2.æœåŠ¡çš„è¿è¡Œçº§åˆ«(runlevel):</h3><blockquote><p>1.Linuxç³»ç»Ÿæœ‰7ç§è¿è¡Œçº§åˆ«(runlevel):<strong>å¸¸ç”¨çš„æ˜¯çº§åˆ«3å’Œ5</strong></p><ul><li>è¿è¡Œçº§åˆ«0:ç³»ç»ŸåœæœºçŠ¶æ€ï¼Œç³»ç»Ÿé»˜è®¤è¿è¡Œçº§åˆ«ä¸èƒ½è®¾ä¸º0ï¼Œå¦åˆ™ä¸èƒ½æ­£å¸¸å¯åŠ¨</li><li>è¿è¡Œçº§åˆ«1:å•ç”¨æˆ·å·¥ä½œçŠ¶æ€ï¼Œrootæƒé™ï¼Œç”¨äºç³»ç»Ÿç»´æŠ¤ï¼Œç¦æ­¢è¿œç¨‹ç™»é™†</li><li>è¿è¡Œçº§åˆ«2:å¤šç”¨æˆ·çŠ¶æ€(æ²¡æœ‰NFS)ï¼Œä¸æ”¯æŒç½‘ç»œ</li><li>è¿è¡Œçº§åˆ«3:å®Œå…¨çš„å¤šç”¨æˆ·çŠ¶æ€(æœ‰NFS)ï¼Œç™»é™†åè¿›å…¥æ§åˆ¶å°å‘½ä»¤è¡Œæ¨¡å¼</li><li>è¿è¡Œçº§åˆ«4:ç³»ç»Ÿæœªä½¿ç”¨ï¼Œä¿ç•™</li><li>è¿è¡Œçº§åˆ«5:X11æ§åˆ¶å°ï¼Œç™»é™†åè¿›å…¥å›¾å½¢GUIæ¨¡å¼</li><li>è¿è¡Œçº§åˆ«6:ç³»ç»Ÿæ­£å¸¸å…³é—­å¹¶é‡å¯ï¼Œé»˜è®¤è¿è¡Œçº§åˆ«ä¸èƒ½è®¾ä¸º6ï¼Œå¦åˆ™ä¸èƒ½æ­£å¸¸å¯åŠ¨</li></ul><p>2.è®¾ç½®å¯¹åº”çº§åˆ«</p><ul><li><blockquote><p>åœ¨centos7ä»¥å‰ï¼Œ&#x2F;etc&#x2F;inittabæ–‡ä»¶ä¸­ä¿®æ”¹</p><p>centos7ä»¥åï¼Œè¿›è¡Œäº†ç®€åŒ–ï¼Œå¦‚ä¸‹å‘½ä»¤</p><ul><li><strong>multi-user.target:ç±»ä¼¼äºè¿è¡Œçº§åˆ«3</strong></li><li>graphical.target:ç±»ä¼¼äºè¿è¡Œçº§åˆ«5</li></ul></blockquote><p>1.æŸ¥çœ‹å½“å‰é»˜è®¤è¿è¡Œçº§åˆ«</p><ul><li><code>systemctl get-default</code></li></ul><p>2.ä¿®æ”¹é»˜è®¤è¿è¡Œçº§åˆ«  (ä¾‹å­ï¼šè¿è¡Œçº§åˆ«5)</p><ul><li><code>systemctl set-default graphical.target</code></li></ul></li></ul><p>3.å¼€æœºçš„æµç¨‹è¯´æ˜</p><p>â€‹å¼€æœº&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;BIOS&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;&#x2F;boot&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;systemdè¿›ç¨‹1&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;è¿è¡Œçº§åˆ«&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;è¿è¡Œçº§å¯¹åº”çš„æœåŠ¡</p></blockquote><h3 id="3-è®¾ç½®æœåŠ¡åœ¨å„ä¸ªçº§åˆ«ä¸­çš„è‡ª-å¯åŠ¨-å…³é—­-chkconfigæŒ‡ä»¤"><a href="#3-è®¾ç½®æœåŠ¡åœ¨å„ä¸ªçº§åˆ«ä¸­çš„è‡ª-å¯åŠ¨-å…³é—­-chkconfigæŒ‡ä»¤" class="headerlink" title="3.è®¾ç½®æœåŠ¡åœ¨å„ä¸ªçº§åˆ«ä¸­çš„è‡ª å¯åŠ¨&#x2F;å…³é—­-chkconfigæŒ‡ä»¤"></a>3.è®¾ç½®æœåŠ¡åœ¨å„ä¸ªçº§åˆ«ä¸­çš„è‡ª å¯åŠ¨&#x2F;å…³é—­-chkconfigæŒ‡ä»¤</h3><p>1.chkconfigæŒ‡ä»¤  ï¼Œä¸€ä¸ªæœåŠ¡åœ¨ä¸åŒçš„å¯åŠ¨çº§åˆ«ï¼Œè‡ªå¯åŠ¨æ˜¯ä¸åŒçš„</p><blockquote><p>ä»‹ç»</p><ul><li>é€šè¿‡chkconfig å‘½ä»¤å¯ä»¥ç»™æœåŠ¡çš„å„ä¸ªè¿è¡Œçº§åˆ«è®¾ç½®è‡ª å¯åŠ¨&#x2F;å…³é—­</li><li>chkconfig æŒ‡ä»¤ç®¡ç†çš„æœåŠ¡åœ¨ &#x2F;etc&#x2F;init.d æŸ¥çœ‹</li><li>æ³¨æ„:Centos7.0åï¼Œå¾ˆå¤šæœåŠ¡ä½¿å›¾aystemctlç®¡ç†(åé¢é©¬ä¸Šè®²)</li></ul><p>chkconfigåŸºæœ¬è¯­æ³•</p><ul><li>æŸ¥çœ‹æœåŠ¡ chkconfig â€“list [| grep xxx]   #æŸ¥çœ‹å„ä¸ªçº§åˆ«ï¼ŒæœåŠ¡çš„æƒ…å†µ</li><li>chkconfig æœåŠ¡å â€“list       #æŸ¥çœ‹æŸä¸ªæœåŠ¡åœ¨å„ä¸ªçº§åˆ«çš„æƒ…å†µ</li><li>chkconfig â€“level 5 æœåŠ¡å on&#x2F;off      #è®¾ç½®æŸä¸ªæœåŠ¡åœ¨æŸä¸ªçº§åˆ«æ˜¯è‡ªå¯åŠ¨&#x2F;å…³é—­</li></ul><p>æ¡ˆä¾‹æ¼”ç¤º:å¯¹networkæœåŠ¡ è¿›è¡Œå„ç§æ“ä½œï¼šï¼šæŠŠnetwork åœ¨3è¿è¡Œçº§åˆ«,å…³é—­è‡ªå¯åŠ¨</p><ul><li><p><code>chkconfig --level 3 network off</code>     #3çº§åˆ«å…³é—­</p></li><li><p><code>chkconfig --level 3 network on </code>     #3çº§åˆ«æ‰“å¼€</p></li></ul><blockquote><p>**ä½¿ç”¨ç»†èŠ‚:**chkconfigé‡æ–°è®¾ç½®æœåŠ¡åè‡ªå¯åŠ¨æˆ–å…³é—­ï¼Œéœ€è¦é‡å¯æœºå™¨rebootç”Ÿæ•ˆ</p></blockquote></blockquote><h3 id="4-systemctlçš„ä½¿ç”¨"><a href="#4-systemctlçš„ä½¿ç”¨" class="headerlink" title="4.systemctlçš„ä½¿ç”¨"></a>4.systemctlçš„ä½¿ç”¨</h3><p>systemctlç®¡ç†æŒ‡ä»¤</p><blockquote><p>1.åŸºæœ¬è¯­æ³•:</p><ul><li><p><code>systemctl [start | stop | restart | status] æœåŠ¡å</code></p></li><li><p>systemctlæŒ‡ä»¤ç®¡ç†çš„æœåŠ¡åœ¨<code>/usr/lib/systemd/system</code> æŸ¥çœ‹</p></li></ul><p>2.systemctlè®¾ç½®æœåŠ¡çš„è‡ªå¯åŠ¨çŠ¶æ€ (Centos7ä»¥åï¼Œé»˜è®¤æ˜¯3å’Œ5)</p><ul><li><p><code>systemctl list-unit-files [| grep æœåŠ¡å] </code>(æŸ¥çœ‹æœåŠ¡å¼€æœºå¯åŠ¨çŠ¶æ€,grep å¯ä»¥è¿›è¡Œè¿‡æ»¤)</p></li><li><p><code>systemctl enable æœåŠ¡å</code>     (è®¾ç½®æœåŠ¡å¼€æœºå¯åŠ¨)</p></li><li><p><code>systemctl disable æœåŠ¡å </code>    (å…³å›¢æœåŠ¡å¼€æœºå¯åŠ¨)</p></li><li><p><code>systemctl is-enabled æœåŠ¡å</code>    (æŸ¥è¯¢æŸä¸ªæœåŠ¡æ˜¯å¦æ˜¯è‡ªå¯åŠ¨çš„)</p></li></ul><p>3.åº”ç”¨æ¡ˆä¾‹:</p><ul><li>æŸ¥çœ‹å½“å‰é˜²ç«å¢™çš„çŠ¶å†µï¼Œå…³é—­é˜²ç«å¢™å’Œé‡å¯é˜²ç«å¢™ã€‚<ul><li><code>systemctl status firewall</code></li><li><code>systemctl stop firewall</code></li><li><code>systemctl start firewall</code></li></ul></li></ul><p>4.ç»†èŠ‚è®¨è®º:</p><ul><li>1.å…³é—­æˆ–è€…å¯ç”¨é˜²ç«å¢™åï¼Œä¼šç«‹å³ç”Ÿæ•ˆã€‚[teInet æµ‹è¯• æŸä¸ªç«¯å£å³å¯]</li><li>2.<strong>æ¡ˆä¾‹è¿™ç§æ–¹å¼åªæ˜¯ä¸´æ—¶ç”Ÿæ•ˆ</strong>ï¼Œå½“é‡å¯ç³»ç»Ÿåï¼Œè¿˜æ˜¯å›å½’ä»¥å‰å¯¹æœåŠ¡çš„è®¾ç½®ã€‚</li><li>3.å¦‚æœå¸Œæœ›<strong>è®¾ç½®æŸä¸ªæœåŠ¡è‡ªå¯åŠ¨æˆ–å…³é—­æ°¸ä¹…ç”Ÿæ•ˆ</strong>ï¼Œè¦ä½¿ç”¨ <code>systemctl [enable|disable] æœåŠ¡å</code>ã€‚</li></ul><p>5.telnetçš„ä½¿ç”¨</p><ul><li>åœ¨winç³»ç»Ÿä¸­çš„cmdé‡Œæ‰§è¡Œtelnetæµ‹è¯•æŸä¸ªæœåŠ¡çš„ç«¯å£èƒ½ä¸èƒ½è¿æ¥<ul><li><code>telnet ip ç«¯å£</code></li></ul></li></ul><p>6.çœ‹çœ‹ç½‘ç»œçŠ¶æ€-netstat</p><ul><li><code>netstat -anp </code></li></ul></blockquote><h3 id="5-é˜²ç«å¢™"><a href="#5-é˜²ç«å¢™" class="headerlink" title="5.é˜²ç«å¢™"></a>5.é˜²ç«å¢™</h3><blockquote><p>1.é˜²ç«å¢™æ‰“å¼€æˆ–è€…å…³é—­æŒ‡å®šç«¯å£</p><blockquote><p>åœ¨çœŸæ­£çš„ç”Ÿäº§ç¯å¢ƒï¼Œå¾€å¾€éœ€è¦å°†é˜²ç«å¢™æ‰“å¼€ï¼Œä½†é—®é¢˜æ¥äº†ï¼Œï¼Œå¦‚æœæˆ‘ä»¬æŠŠé˜²ç«å¢™æ‰“å¼€ï¼Œé‚£ä¹ˆå¤–éƒ¨è¯·æ±‚æ•°æ®åŒ…å°±ä¸èƒ½è·ŸæœåŠ¡å™¨ç›‘å¬ç«¯å£é€šè®¯ã€‚è¿™æ—¶ï¼Œéœ€è¦æ‰“å¼€æŒ‡å®šçš„ç«¯å£ã€‚æ¯”å¦‚80ã€22ã€8080ç­‰ï¼Œè¿™ä¸ªåˆæ€ä¹ˆåšå‘¢?è€éŸ©ç»™ç»™å¤§å®¶è®²ä¸€è®²ã€‚</p><p>ç†è§£å›¾ï¼š</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240909160229620.png" class title="image-20240909160229620"></blockquote><p>2.firewallæŒ‡ä»¤</p><ul><li>æ‰“å¼€ç«¯å£:<code>firewall-cmd --permanent --add-port=ç«¯å›—å·/åè®®</code></li><li>å…³å›¢ç«¯å£:<code>firewall-cmd --permanent --remove-port=ç«¯å›—å·/åè®®</code></li><li>é‡æ–°è½½å…¥,æ‰èƒ½ç”Ÿæ•ˆ:<code>firewall-cmd --reload</code></li><li>æŸ¥è¯¢ç«¯å£æ˜¯å¦å¼€æ”¾:<code>firewall-cmd --query-port=ç«¯å£/åè®®</code></li><li>æŸ¥çœ‹å·²ç»å¼€æ”¾çš„ç«¯å›—å·ï¼š<code>firewall-cmd --zone=public --list-ports</code></li></ul><p>3.æ€ä¹ˆçŸ¥é“ç«¯å£çš„åè®®æ˜¯ä»€ä¹ˆåè®®å‘¢  #ä¸‹é¢å‘½ä»¤ç¬¬ä¸€åˆ—å°±æ˜¯åè®®</p><ul><li><code>netstat -anp</code></li></ul><p>4.åº”ç”¨æ¡ˆä¾‹:</p><ul><li>å¯ç”¨é˜²ç«å¢™ï¼Œæµ‹è¯• 111ç«¯å£æ˜¯å¦èƒ½ telnet</li><li>å¼€æ”¾111ç«¯å£ï¼Œä¸‹é¢éƒ½è¦æ‰§è¡Œ<ul><li><code>firewall-cmd --permanent --add-port=111/tcp</code></li><li><code>firewall-cmd --reload</code></li></ul></li><li>å†æ¬¡å…³é—­111ç«¯å£<ul><li><code>firewall-cmd --permanent --remove-port=111/tcp</code></li><li><code>firewall-cmd --reload</code></li></ul></li></ul></blockquote><h2 id="26-åŠ¨æ€ç›‘æ§è¿›ç¨‹-top"><a href="#26-åŠ¨æ€ç›‘æ§è¿›ç¨‹-top" class="headerlink" title="26.åŠ¨æ€ç›‘æ§è¿›ç¨‹-top"></a>26.åŠ¨æ€ç›‘æ§è¿›ç¨‹-top</h2><h3 id="1-ä»‹ç»"><a href="#1-ä»‹ç»" class="headerlink" title="1.ä»‹ç»:"></a>1.ä»‹ç»:</h3><blockquote><p>ä»‹ç»:</p><blockquote><p>topä¸pså‘½ä»¤å¾ˆç›¸ä¼¼ã€‚å®ƒä»¬éƒ½ç”¨æ¥æ˜¾ç¤ºæ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹ã€‚Topä¸psæœ€å¤§çš„ä¸åŒä¹‹å¤„ï¼Œåœ¨äºtopåœ¨æ‰§è¡Œä¸€æ®µæ—¶é—´å¯ä»¥æ›´æ–°æ­£åœ¨è¿è¡Œçš„çš„è¿›ç¨‹ã€‚</p></blockquote><p>åŸºæœ¬è¯­æ³•</p><ul><li>top [é€‰é¡¹]</li></ul><p>é€‰é¡¹è¯´æ˜</p><ul><li><table><thead><tr><th align="center">é€‰é¡¹</th><th align="center">åŠŸèƒ½</th></tr></thead><tbody><tr><td align="center">-d ç§’æ•°</td><td align="center">æŒ‡å®štopå‘½ä»¤æ¯éš”å‡ ç§’æ›´æ–°ã€‚é»˜è®¤æ˜¯3ç§’    ä¾‹å¦‚top -d 5  #æ¯5såˆ·æ–°ä¸€æ¬¡</td></tr><tr><td align="center">-i</td><td align="center">ä½¿topä¸æ˜¾ç¤ºä»»ä½•é—²ç½®æˆ–è€…æ­»è¿›ç¨‹</td></tr><tr><td align="center">-p</td><td align="center">é€šè¿‡æŒ‡å®šç›‘æ§è¿›ç¨‹IDæ¥ä»…ä»…ç›‘æ§æŸä¸ªè¿›ç¨‹çš„çŠ¶æ€ã€‚</td></tr></tbody></table></li></ul><p>ç»“æœè®²è§£ï¼š</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240909142927058-172586336876816.png" class title="image-20240909142927058"></blockquote><h3 id="2-äº¤æ¢æ“ä½œ-top"><a href="#2-äº¤æ¢æ“ä½œ-top" class="headerlink" title="2.äº¤æ¢æ“ä½œ-top"></a>2.äº¤æ¢æ“ä½œ-top</h3><blockquote><p>äº¤äº’æ“ä½œè¯´æ˜:</p><table><thead><tr><th align="center">æ“ä½œ</th><th align="center">åŠŸèƒ½</th></tr></thead><tbody><tr><td align="center">P</td><td align="center">ä»¥CPUä½¿ç”¨ç‡æ’åºï¼Œé»˜è®¤å°±æ˜¯æ­¤é¡¹</td></tr><tr><td align="center">M</td><td align="center">ä»¥å†…å­˜çš„ä½¿ç”¨ç‡æ’åº</td></tr><tr><td align="center">N</td><td align="center">ä»¥PIDæ’åº</td></tr><tr><td align="center">q</td><td align="center">é€€å‡ºtop</td></tr></tbody></table><p>åº”ç”¨å®ä¾‹</p><ul><li><p>æ¡ˆä¾‹1.ç›‘è§†ç‰¹å®šç”¨æˆ·</p><ul><li><p>1.è¾“å…¥<code>top</code>å‘½ä»¤ï¼ŒæŒ‰å›è½¦é”®ï¼ŒæŸ¥çœ‹æ‰§è¡Œçš„è¿›ç¨‹</p></li><li><p>2.ç„¶åè¾“å…¥â€œuâ€å›è½¦ï¼Œå†è¾“å…¥ç”¨æˆ·åï¼Œå³å¯</p></li></ul></li><li><p>æ¡ˆä¾‹2:ç»ˆæ­¢æŒ‡å®šçš„è¿›ç¨‹ã€‚</p><ul><li>1.è¾“å…¥<code>top</code>å‘½ä»¤ï¼ŒæŒ‰å›è½¦é”®ï¼ŒæŸ¥çœ‹æ‰§è¡Œçš„è¿›ç¨‹ã€‚</li><li>2.ç„¶åè¾“å…¥<code>k</code>å›è½¦ï¼Œå†è¾“å…¥è¦ç»“æŸçš„è¿›ç¨‹IDå·ï¼Œè‹¥è¦æ±‚è¾“å…¥ä¿¡å·é‡åˆ™è¾“å…¥ <code>9</code>   (9ä¸ºå¼ºåˆ¶æ€æ­»è¿›ç¨‹)</li></ul></li><li><p>æ¡ˆä¾‹3:æŒ‡å®šç³»ç»ŸçŠ¶æ€æ›´æ–°çš„æ—¶é—´(æ¯éš”10ç§’è‡ªåŠ¨æ›´æ–°)</p><ul><li><code>top -d 10</code></li></ul></li></ul></blockquote><h2 id="27-ç›‘æ§ç½‘ç»œçŠ¶æ€-netstat"><a href="#27-ç›‘æ§ç½‘ç»œçŠ¶æ€-netstat" class="headerlink" title="27.ç›‘æ§ç½‘ç»œçŠ¶æ€-netstat"></a>27.ç›‘æ§ç½‘ç»œçŠ¶æ€-netstat</h2><p>æŸ¥çœ‹ç³»ç»Ÿç½‘ç»œæƒ…å†µnetstat</p><blockquote><p>1.åŸºæœ¬è¯­æ³•</p><p><code>netstat [é€‰é¡¶]</code></p><p>2.é€‰é¡¹è¯´æ˜</p><ul><li><p>-an   æŒ‰ä¸€å®šé¡ºåºæ’åˆ—è¾“å‡º</p></li><li><p>-p    æ˜¾ç¤ºå“ªä¸ªè¿›ç¨‹åœ¨è°ƒç”¨ (ä¼šæ˜¾ç¤ºè¿›ç¨‹idå’Œåç§°)</p></li></ul><p>3.åº”ç”¨æ¡ˆä¾‹</p><ul><li>è¯·æŸ¥çœ‹æœåŠ¡åä¸º sshd çš„æœåŠ¡çš„ä¿¡æ¯ã€‚<ul><li><code>netstat -anp | grep sshd</code></li></ul></li></ul><p>4.æ£€æµ‹ä¸»æœºè¿æ¥å‘½ä»¤</p><ul><li>ping:æ˜¯-ç§ç½‘ç»œæ£€æµ‹å·¥å…·ï¼Œå®ƒä¸»è¦æ˜¯ç”¨æ£€æµ‹è¿œç¨‹ä¸»æœºæ˜¯å¦æ­£å¸¸ï¼Œæˆ–æ˜¯ä¸¤éƒ¨ä¸»æœºé—´çš„ç½‘çº¿æˆ–ç½‘å¡æ•…éšœã€‚å¦‚: ping å¯¹æ–¹ipåœ°å€<ul><li>ping <a href="http://www.baidu.com/">www.baidu.com</a></li></ul></li></ul><p>5.ç»“æœè¯´æ˜ï¼š</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240909152837908-172586691964017.png" class title="image-20240909152837908"></blockquote><h2 id="28-rpmç®¡ç†"><a href="#28-rpmç®¡ç†" class="headerlink" title="28.rpmç®¡ç†"></a>28.rpmç®¡ç†</h2><h3 id="1-ä»‹ç»-1"><a href="#1-ä»‹ç»-1" class="headerlink" title="1.ä»‹ç»"></a>1.ä»‹ç»</h3><blockquote><p>ä»‹ç»</p><blockquote><p>rpmç”¨äºäº’è”ç½‘ä¸‹è½½åŒ…çš„æ‰“åŒ…åŠå®‰è£…å·¥å…·ï¼Œå®ƒåŒ…å«åœ¨æŸäº›Linuxåˆ†å‘ç‰ˆä¸­ã€‚å®ƒç”Ÿæˆå…·æœ‰.RPMæ‰©å±•åçš„æ–‡ä»¶ã€‚RPMæ˜¯RedHat Package Manager(RedHatè½¯ä»¶åŒ…ç®¡ç†å·¥å…·)çš„ç¼©å†™ï¼Œç±»ä¼¼windowsçš„setup.exeï¼Œè¿™ä¸€æ–‡ä»¶æ ¼å¼åç§°è™½ç„¶æ‰“ä¸Šäº†RedHatçš„æ ‡å¿—ï¼Œä½†ç†å¿µæ˜¯é€šç”¨çš„</p></blockquote><blockquote><p>Linuxçš„åˆ†å‘ç‰ˆæœ¬éƒ½æœ‰é‡‡ç”¨(suse,redhat,centos ç­‰ç­‰)ï¼Œå¯ä»¥ç®—æ˜¯å…¬è®¤çš„è¡Œä¸šæ ‡å‡†äº†</p></blockquote></blockquote><h3 id="2-rpmåŒ…çš„ç®€å•æŸ¥è¯¢æŒ‡ä»¤"><a href="#2-rpmåŒ…çš„ç®€å•æŸ¥è¯¢æŒ‡ä»¤" class="headerlink" title="2.rpmåŒ…çš„ç®€å•æŸ¥è¯¢æŒ‡ä»¤"></a>2.rpmåŒ…çš„ç®€å•æŸ¥è¯¢æŒ‡ä»¤</h3><blockquote><p>1.rpmåŒ…çš„ç®€å•æŸ¥è¯¢æŒ‡ä»¤</p><ul><li>æŸ¥è¯¢å·²å®‰è£…çš„rpmåˆ—è¡¨ <ul><li><code>rpm -qa |  grep xx</code></li></ul></li></ul><p>2.ä¸¾ä¾‹:çœ‹çœ‹å½“å‰ç³»ç»Ÿï¼Œæ˜¯å¦å®‰è£…äº†firefox</p><ul><li><code>rpm -qa |  grep firefox</code></li></ul><p>3.rpmåŒ…ååŸºæœ¬æ ¼å¼</p><ul><li><p>ä¸€ä¸ªrpmåŒ…å:   firefox-60.2.2-1.el7.centos.x86 64ï¼Œå¦‚ä¸‹è§£é‡Š</p><ul><li><p>åç§°:firefox</p></li><li><p>ç‰ˆæœ¬å·:60.2.2-1</p></li></ul></li><li><p>é€‚ç”¨æ“ä½œç³»ç»Ÿ:el7.centos.x86 64</p><ul><li><p>è¡¨ç¤ºcentos7.xçš„64ä½ç³»ç»Ÿ</p></li><li><p>å¦‚æœæ˜¯i686ã€i386è¡¨ç¤º32ä½ç³»ç»Ÿï¼Œnoarchè¡¨ç¤ºé€šç”¨</p></li></ul></li></ul></blockquote><h3 id="3-rpmåŒ…çš„å…¶ä»–æŸ¥è¯¢æŒ‡ä»¤ï¼š"><a href="#3-rpmåŒ…çš„å…¶ä»–æŸ¥è¯¢æŒ‡ä»¤ï¼š" class="headerlink" title="3.rpmåŒ…çš„å…¶ä»–æŸ¥è¯¢æŒ‡ä»¤ï¼š"></a>3.rpmåŒ…çš„å…¶ä»–æŸ¥è¯¢æŒ‡ä»¤ï¼š</h3><blockquote><p>1.rpmåŒ…çš„å…¶å®ƒæŸ¥è¯¢æŒ‡ä»¤:</p><ul><li><p><code>rpm -qa</code> :æŸ¥è¯¢æ‰€å®‰è£…çš„æ‰€æœ‰rpmè½¯ä»¶åŒ…</p></li><li><p><code>rpm -qa | more</code></p></li><li><p><code>rpm -qa | grep X </code>     :æ¯”å¦‚ï¼š<code>rpm -qa | grep firefox </code></p></li></ul><p>2.<code>rpm -q è½¯ä»¶åŒ…å </code>    :æŸ¥è¯¢è½¯ä»¶åŒ…æ˜¯å¦å®‰è£…</p><ul><li>æ¡ˆä¾‹:   <code>rpm -q firefox</code></li></ul><p>3.<code>rpm -qi è½¯ä»¶åŒ…å</code>   :æŸ¥è¯¢è½¯ä»¶åŒ…ä¿¡æ¯</p><ul><li>æ¡ˆä¾‹: <code>rpm -qi firefox </code></li></ul><p>4.<code>rpm -ql è½¯ä»¶åŒ…å</code>     :æŸ¥è¯¢è½¯ä»¶åŒ…ä¸­çš„æ–‡ä»¶</p><ul><li>æ¯”å¦‚:<code>rpm -ql firefox</code></li></ul><p><code>rpm -qf æ–‡ä»¶å…¨è·¯å¾„å </code>     æŸ¥è¯¢æ–‡ä»¶æ‰€å±çš„è½¯ä»¶åŒ…</p><ul><li><p><code>rpm -qf /etc/passwd</code></p></li><li><p><code>rpm -qf /root/install.log</code></p></li></ul></blockquote><h3 id="4-å¸è½½rpmåŒ…"><a href="#4-å¸è½½rpmåŒ…" class="headerlink" title="4.å¸è½½rpmåŒ…"></a>4.å¸è½½rpmåŒ…</h3><p>å¸è½½rpmåŒ…</p><blockquote><p>1.åŸºæœ¬è¯­æ³•</p><ul><li>rpm -e RPMåŒ…çš„åç§° &#x2F;&#x2F;erase</li></ul><p>2.åº”ç”¨æ¡ˆä¾‹</p><ul><li>åˆ é™¤firefox è½¯ä»¶åŒ…(ä¸ç”¨å†™å¾ˆå…¨çš„åç§°ï¼ŒåŒ…çš„å¼€å¤´å°±è¡Œï¼Œä½†åŒ…åè¦å†™æ¸…æ¥š)<ul><li><code>rpm -e firefox</code></li></ul></li></ul><p>3.ç»†èŠ‚è®¨è®º</p><ul><li><p>1.å¦‚æœå…¶å®ƒè½¯ä»¶åŒ…ä¾èµ–äºæ‚¨è¦å¸è½½çš„è½¯ä»¶åŒ…ï¼Œå¸è½½æ—¶åˆ™ä¼šäº§ç”Ÿé”™è¯¯ä¿¡æ¯</p><ul><li><p>å¦‚ï¼š<code>rpm -e foo</code></p><ul><li><blockquote><p>removing these packages would break dependencies:foo is needed by bar-1.0-1</p></blockquote></li></ul></li></ul></li><li><p>2.å¦‚æœæˆ‘ä»¬å°±æ˜¯è¦åˆ é™¤ fooè¿™ä¸ªrpm åŒ…ï¼Œå¯ä»¥å¢åŠ å‚æ•° â€“nodeps,å°±å¯ä»¥å¼ºåˆ¶åˆ é™¤ï¼Œä½†æ˜¯ä¸€èˆ¬ä¸æ¨èè¿™æ ·åšï¼Œå› ä¸ºä¾èµ–äºè¯¥è½¯ä»¶åŒ…çš„ç¨‹åºå¯èƒ½æ— æ³•è¿è¡Œ</p><ul><li>å¦‚: <code>rpm -e --nodeps foo</code></li></ul></li></ul></blockquote><h3 id="5-å®‰è£…rpm"><a href="#5-å®‰è£…rpm" class="headerlink" title="5.å®‰è£…rpm"></a>5.å®‰è£…rpm</h3><p>å®‰è£…rpmåŒ…</p><blockquote><p>1.åŸºæœ¬è¯­æ³•</p><ul><li><code>rpm -ivh RPMåŒ…å…¨è·¯å¾„åç§°</code></li></ul><p>2.å‚æ•°è¯´æ˜</p><ul><li><p>i&#x3D;install å®‰è£…</p></li><li><p>v&#x3D;verbose æç¤º</p></li><li><p>h&#x3D;hash è¿›åº¦æ¡</p></li></ul></blockquote><h2 id="29-yum"><a href="#29-yum" class="headerlink" title="29.yum"></a>29.yum</h2><h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><blockquote><p>1.ä»‹ç»:</p><blockquote><p>Yum æ˜¯ä¸€ä¸ªShellå‰ç«¯è½¯ä»¶åŒ…ç®¡ç†å™¨ã€‚åŸºäºRPMåŒ…ç®¡ç†ï¼Œèƒ½å¤Ÿä»æŒ‡å®šçš„æœåŠ¡å™¨è‡ªåŠ¨ä¸‹è½½RPMåŒ…å¹¶ä¸”å®‰è£…ï¼Œå¯ä»¥<strong>è‡ªåŠ¨å¤„ç†ä¾èµ–æ€§å…³ç³»</strong>ï¼Œå¹¶ä¸”ä¸€æ¬¡å®‰è£…æ‰€æœ‰ä¾èµ–çš„è½¯ä»¶åŒ…</p><ul><li>åŸç†å›¾<ul><li><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240909165101473.png" class title="image-20240909165101473"></li></ul></li></ul></blockquote><p>2.yumçš„åŸºæœ¬æŒ‡ä»¤</p><ul><li><p>1.æŸ¥è¯¢yumæœåŠ¡å™¨æ˜¯å¦æœ‰éœ€è¦å®‰è£…çš„è½¯ä»¶</p><ul><li><code>yum list | grep xx</code>  #è½¯ä»¶åˆ—è¡¨</li></ul></li><li><p>2.å®‰è£…æŒ‡å®šçš„yumåŒ…</p><ul><li><code>yum install xxx </code>   #ä¸‹è½½å®‰è£…</li></ul></li></ul><p>3.yumåº”ç”¨å®ä¾‹</p><ul><li>æ¡ˆä¾‹:è¯·ä½¿ç”¨yumçš„æ–¹å¼æ¥å®‰è£…firefox<ul><li><code>rpm -e firefox</code>     #å…ˆåˆ é™¤å·²æœ‰çš„firefox</li><li><code>rpm list | grep firefox </code>    #æŸ¥çœ‹yumæœåŠ¡ä¸Šæœ‰é‚£äº›firefox</li><li><code>yum install firefox</code>    #ä¸‹è½½å®‰è£…æƒ³è¦çš„ç‰ˆæœ¬</li></ul></li></ul></blockquote><h1 id="å®‰è£…javaç¯å¢ƒ"><a href="#å®‰è£…javaç¯å¢ƒ" class="headerlink" title="å®‰è£…javaç¯å¢ƒ"></a>å®‰è£…javaç¯å¢ƒ</h1><h3 id="1-jdk"><a href="#1-jdk" class="headerlink" title="1.jdk"></a>1.jdk</h3><blockquote><p>1.<code>mkdir /opt/jdk</code></p><p>2.å°†jdkåŒ…é€šè¿‡xftp6 ä¸Šä¼ åˆ° &#x2F;opt&#x2F;jdkä¸‹</p><p>3.<code>cd /opt/jdk</code></p><p>4.è§£å‹ <code>tar -zxvf jdk-8u261-linux-x64.tar.gz</code></p><p>5.<code>mkdir /usr/local/java</code></p><p>6.<code>mv /opt/jdk/jdk1.8.0_261 /usr/local/java</code></p><p>7.é…ç½®ç¯å¢ƒå˜é‡çš„é…ç½®æ–‡ä»¶  <code>vim /etc/profile</code></p><p>8.å†é…ç½®æ–‡ä»¶çš„æœ€åé¢è¾“å…¥ä¸‹é¢å†…å®¹</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">export</span> <span class="hljs-attribute">JAVA_HOME</span>=/usr/local/java/jdk1.8.0 261<br><span class="hljs-built_in">export</span> <span class="hljs-attribute">PATH</span>=<span class="hljs-variable">$JAVA_HOME</span>/bin:$PATH<br></code></pre></td></tr></table></figure><p>9.<code>source /etc/profile</code>  [è®©æ–°çš„ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ]</p></blockquote><h3 id="2-tomcat8"><a href="#2-tomcat8" class="headerlink" title="2.tomcat8"></a>2.tomcat8</h3><h3 id="3-idea2020"><a href="#3-idea2020" class="headerlink" title="3.idea2020"></a>3.idea2020</h3><h3 id="4-mysql5-7"><a href="#4-mysql5-7" class="headerlink" title="4.mysql5.7"></a>4.mysql5.7</h3><blockquote><p><strong>æ³¨ï¼šcentos7.6è‡ªå¸¦çš„ç±»mysqlæ•°æ®åº“æ˜¯mariadbï¼Œä¼šè·Ÿ mysqlå†²çªï¼Œè¦å…ˆåˆ é™¤</strong></p><ul><li><code>rpm -qa | grep mari</code></li><li><code>rpm -e --nodeps mariadb-libs</code></li></ul></blockquote><h1 id="å¤§æ•°æ®-shellç¼–ç¨‹"><a href="#å¤§æ•°æ®-shellç¼–ç¨‹" class="headerlink" title="å¤§æ•°æ®-shellç¼–ç¨‹"></a>å¤§æ•°æ®-shellç¼–ç¨‹</h1><h2 id="1-å…¥é—¨"><a href="#1-å…¥é—¨" class="headerlink" title="1.å…¥é—¨"></a>1.å…¥é—¨</h2><blockquote><p>shellæ˜¯ä»€ä¹ˆ</p><blockquote><p>Shellæ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œè§£é‡Šå™¨ï¼Œå®ƒä¸ºç”¨æˆ·æä¾›äº†ä¸€ä¸ªå‘Linuxå†…æ ¸å‘é€è¯·æ±‚ä»¥ä¾¿è¿è¡Œç¨‹åºçš„ç•Œé¢ç³»ç»Ÿçº§ç¨‹åºç”¨æˆ·å¯ä»¥ç”¨Shellæ¥å¯åŠ¨ã€æŒ‚èµ·ã€åœæ­¢ç”šè‡³æ˜¯ç¼–å†™ä¸€äº›ç¨‹åºã€‚çœ‹ä¸€ä¸ªç¤ºæ„å›¾</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240910142303731.png" class title="image-20240910142303731"></blockquote></blockquote><blockquote><p>Shellè„šæœ¬çš„æ‰§è¡Œæ–¹å¼</p><p>1.è„šæœ¬æ ¼å¼è¦æ±‚</p><ul><li>è„šæœ¬ä»¥#!&#x2F;bin&#x2F;bashå¼€å¤´</li><li>è„šæœ¬éœ€è¦æœ‰å¯æ‰§è¡Œæƒé™</li></ul><p>2.ç¼–å†™ç¬¬ä¸€ä¸ªShellè„šæœ¬</p><ul><li><p>éœ€æ±‚è¯´æ˜:åˆ›å»ºä¸€ä¸ªShellè„šæœ¬ï¼Œè¾“å‡ºhello world!</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br>echo &quot;hello,world~&quot;<br></code></pre></td></tr></table></figure></li></ul><p>3.è„šæœ¬çš„å¸¸ç”¨æ‰§è¡Œæ–¹å¼</p><ul><li><p>æ–¹å¼1(è¾“å…¥è„šæœ¬çš„ç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹è·¯å¾„)</p><ul><li>è¯´æ˜:é¦–å…ˆè¦èµ‹äºˆhelloworld.sh è„šæœ¬çš„+xæƒé™(<code>chmod u+x xxx.sh</code>)ï¼Œå†æ‰§è¡Œè„šæœ¬ã€‚å¦‚ï¼š<code>./xxx.sh</code>  æˆ–  <code>/root/shcode/xxx.sh</code></li></ul></li><li><p>æ–¹å¼2(sh+è„šæœ¬)è¯´æ˜:ä¸ç”¨èµ‹äºˆè„šæœ¬+xæƒé™ï¼Œç›´æ¥æ‰§è¡Œå³å¯ã€‚å¦‚ï¼š<code>sh xxx.sh</code></p></li></ul></blockquote><h2 id="2-Shell-å˜é‡"><a href="#2-Shell-å˜é‡" class="headerlink" title="2.Shell å˜é‡"></a>2.Shell å˜é‡</h2><p>1.Shellå˜é‡</p><blockquote><p>1.Shellå˜é‡</p><ul><li><p>ä»‹ç»Linux Shellä¸­çš„å˜é‡åˆ†ä¸ºï¼Œç³»ç»Ÿå˜é‡å’Œç”¨æˆ·è‡ªå®šä¹‰å˜é‡</p></li><li><p>ç³»ç»Ÿå˜é‡:<code>$HOMEã€$PWDã€$SHELLã€$USER</code>ç­‰ç­‰ï¼Œæ¯”å¦‚:<code>echo $HOME </code>ç­‰ç­‰</p></li><li><p>æ˜¾ç¤ºå½“å‰shellä¸­æ‰€æœ‰å˜é‡:<code>set</code></p></li></ul><p>2.shellå˜é‡çš„å®šä¹‰</p><ul><li><p>åŸºæœ¬è¯­æ³•</p><ul><li><p>å®šä¹‰å˜é‡:å˜é‡&#x3D;å€¼</p></li><li><p>æ’¤é”€å˜é‡:<code>unset å˜é‡</code>.</p></li><li><p>å£°æ˜é™æ€å˜é‡:<code>readonly å˜é‡ </code>ï¼Œæ³¨æ„ï¼šä¸èƒ½<code>unset</code></p></li></ul></li><li><p>å¿«é€Ÿå…¥é—¨</p><ul><li><p>æ¡ˆä¾‹1:å®šä¹‰å˜é‡A</p></li><li><p>æ¡ˆä¾‹2:æ’¤é”€å˜é‡A</p></li><li><p>æ¡ˆä¾‹3:å£°æ˜é™æ€çš„å˜é‡B&#x3D;2ï¼Œä¸èƒ½unset</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ä¸€</span><br>A=100<br>echo A=$A<br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹äºŒ</span><br>unset A<br>echo A=$A<br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ä¸‰</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ä¸èƒ½<span class="hljs-built_in">unset</span> B</span><br>readonly B=2<br><br></code></pre></td></tr></table></figure></li><li><p>æ¡ˆä¾‹4:å¯æŠŠå˜é‡æå‡ä¸ºå…¨å±€ç¯å¢ƒå˜é‡ï¼Œå¯ä¾›å…¶ä»–shelç¨‹åºä½¿ç”¨[è¯¥æ¡ˆä¾‹åé¢è®²]</p></li></ul></li></ul></blockquote><p>2.shellå˜é‡çš„å®šä¹‰</p><blockquote><p>1.å®šä¹‰å˜é‡çš„è§„åˆ™</p><ul><li><p>å˜é‡åç§°å¯ä»¥ç”±å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ç»„æˆï¼Œä½†æ˜¯ä¸èƒ½ä»¥æ•°å­—å¼€å¤´ã€‚5A&#x3D;200(x)</p></li><li><p>ç­‰å·ä¸¤ä¾§ä¸èƒ½æœ‰ç©ºæ ¼</p></li><li><p>å˜é‡åç§°ä¸€èˆ¬ä¹ æƒ¯ä¸ºå¤§å†™</p></li></ul><p>2.å°†<strong>å‘½ä»¤</strong>çš„è¿”å›å€¼èµ‹ç»™å˜é‡</p><ul><li><p>A&#x3D;`date`åå¼•å·ï¼Œè¿è¡Œé‡Œé¢çš„å‘½ä»¤ï¼Œå¹¶æŠŠç»“æœè¿”å›ç»™å˜é‡A</p></li><li><p>A&#x3D;$(date)ç­‰ä»·äºåå¼•å·</p></li></ul></blockquote><h2 id="3-è®¾ç½®ç¯å¢ƒå˜é‡"><a href="#3-è®¾ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="3.è®¾ç½®ç¯å¢ƒå˜é‡"></a>3.è®¾ç½®ç¯å¢ƒå˜é‡</h2><p>å…¥é—¨</p><blockquote><p>1.åŸºæœ¬è¯­æ³•</p><ul><li><p>1.export å˜é‡å&#x3D;å˜é‡å€¼   (åŠŸèƒ½æè¿°:å°†shellå˜é‡è¾“å‡ºä¸ºç¯å¢ƒå˜é‡&#x2F;å…¨å±€å˜é‡)</p></li><li><p>2.source é…ç½®æ–‡ä»¶   (åŠŸèƒ½æè¿°:è®©ä¿®æ”¹åçš„é…ç½®ä¿¡æ¯ç«‹å³ç”Ÿæ•ˆ)</p></li><li><p>3.echo $å˜é‡å    (åŠŸèƒ½æè¿°:æŸ¥è¯¢ç¯å¢ƒå˜é‡çš„å€¼)</p></li></ul><p>2.å¿«é€Ÿå…¥é—¨</p><ul><li><p>1.åœ¨<code>/etc/profile</code>æ–‡ä»¶ä¸­å®šä¹‰TOMCAT_HOMEç¯å¢ƒå˜é‡</p></li><li><p>2.æŸ¥çœ‹ç¯å¢ƒå˜é‡TOMCAT HOMEçš„å€¼</p></li><li><p>3.åœ¨å¦å¤–ä¸€ä¸ªshellç¨‹åºä¸­ä½¿ç”¨ TOMCAT_HOME</p></li></ul><p>æ³¨æ„:åœ¨è¾“å‡ºTOMCAT_HOME ç¯å¢ƒå˜é‡å‰ï¼Œéœ€è¦è®©å…¶ç”Ÿæ•ˆ</p><p><code>source /etc/profile</code></p><p>3.ä¸ºä»€ä¹ˆè®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆçœ‹å›¾ï¼‰</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240910145933992.png" class title="image-20240910145933992"><p>4.æ³¨é‡Š</p><ul><li><p>å•è¡Œæ³¨é‡Šï¼š<code>#</code></p></li><li><p>å¤šè¡Œæ³¨é‡Šï¼š<code>:&lt;&lt;!</code>  <code>!</code> å¿…é¡»å•ç‹¬ä¸€è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">:&lt;&lt;!<br>å†…å®¹~<br>!<br></code></pre></td></tr></table></figure></li></ul></blockquote><h2 id="4-ä½ç½®å‚æ•°å˜é‡"><a href="#4-ä½ç½®å‚æ•°å˜é‡" class="headerlink" title="4.ä½ç½®å‚æ•°å˜é‡"></a>4.ä½ç½®å‚æ•°å˜é‡</h2><blockquote><p>1.ä»‹ç»</p><blockquote><p>å½“æˆ‘ä»¬æ‰§è¡Œä¸€ä¸ªshelè„šæœ¬æ—¶ï¼Œå¦‚æœå¸Œæœ›è·å–åˆ°å‘½ä»¤è¡Œçš„å‚æ•°ä¿¡æ¯ï¼Œå°±å¯ä»¥ä½¿ç”¨åˆ°<strong>ä½ç½®å‚æ•°å˜é‡</strong></p><p>æ¯”å¦‚ :<code>./myshell.sh 100 200</code>,è¿™ä¸ªå°±æ˜¯ä¸€ä¸ªæ‰§è¡Œshellçš„å‘½ä»¤è¡Œï¼Œå¯ä»¥åœ¨myshell è„šæœ¬ä¸­è·å–åˆ°å‚æ•°ä¿¡æ¯</p></blockquote><p>2.åŸºæœ¬è¯­æ³•</p><ul><li><p><code>$n</code> (åŠŸèƒ½æè¿°:nä¸ºæ•°å­—ï¼Œ$0ä»£è¡¨å‘½ä»¤æœ¬èº«ï¼Œ$1-$9ä»£è¡¨ç¬¬ä¸€åˆ°ç¬¬ä¹ä¸ªå‚æ•°ï¼Œåä»¥ä¸Šçš„å‚æ•°ï¼Œåä»¥ä¸Šçš„å‚æ•°éœ€è¦ç”¨å¤§æ‹¬å·åŒ…å«ï¼Œå¦‚${10})</p></li><li><p><code>$*</code>(åŠŸèƒ½æè¿°:è¿™ä¸ªå˜é‡ä»£è¡¨å‘½ä»¤è¡Œä¸­æ‰€æœ‰çš„å‚æ•°ï¼Œ$*æŠŠæ‰€æœ‰çš„å‚æ•°çœ‹æˆä¸€ä¸ªæ•´ä½“,æ‰€ä»¥å¾ªç¯çš„æ—¶å€™æ˜¯ä¸€æ¬¡)</p></li><li><p><code>$@</code>(åŠŸèƒ½æè¿°:è¿™ä¸ªå˜é‡ä¹Ÿä»£è¡¨å‘½ä»¤è¡Œä¸­æ‰€æœ‰çš„å‚æ•°ï¼Œä¸è¿‡<code>$@</code>æŠŠæ¯ä¸ªå‚æ•°åŒºåˆ†å¯¹å¾…ï¼Œè¿™é‡Œæ˜¯æœ‰å¤šå°‘å¾ªç¯å¤šå°‘)</p></li><li><p><code>$#</code>(åŠŸèƒ½æè¿°:è¿™ä¸ªå˜é‡ä»£è¡¨å‘½ä»¤è¡Œä¸­æ‰€æœ‰å‚æ•°çš„ä¸ªæ•°)</p></li></ul><p>3.ä½ç½®å‚æ•°å˜é‡</p><p>æ¡ˆä¾‹:ç¼–å†™ä¸€ä¸ªshellè„šæœ¬ position.sh ï¼Œåœ¨è„šæœ¬ä¸­è·å–åˆ°å‘½ä»¤è¡Œçš„å„ä¸ªå‚æ•°ä¿¡æ¯ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br>echo &quot;0=$0 1=$1 2=$2&quot;<br>echo &quot;æ‰€æœ‰å‚æ•°=$*&quot;<br>echo &quot;$@&quot;<br>echo &quot;å‚æ•°çš„ä¸ªæ•°=$#&quot;<br></code></pre></td></tr></table></figure></blockquote><h2 id="5-é¢„å®šä¹‰å˜é‡"><a href="#5-é¢„å®šä¹‰å˜é‡" class="headerlink" title="5.é¢„å®šä¹‰å˜é‡"></a>5.é¢„å®šä¹‰å˜é‡</h2><p>ä»‹ç»ï¼ˆç”¨çš„ä¸å¤šï¼‰</p><blockquote><p>1.åŸºæœ¬ä»‹ç»</p><blockquote><p>å°±æ˜¯shellè®¾è®¡è€…äº‹å…ˆå·²ç»å®šä¹‰å¥½çš„å˜é‡ï¼Œå¯ä»¥ç›´æ¥åœ¨shelè„šæœ¬ä¸­ä½¿ç”¨</p></blockquote><p>2.åŸºæœ¬è¯­æ³•</p><ul><li><p><code>$$</code>   (åŠŸèƒ½æè¿°:å½“å‰è¿›ç¨‹çš„è¿›ç¨‹å·(PID))</p></li><li><p><code>$!</code>    (åŠŸèƒ½æè¿°:åå°è¿è¡Œçš„æœ€åä¸€ä¸ªè¿›ç¨‹çš„è¿›ç¨‹å·(PID))</p></li><li><p><code>$?</code>    (åŠŸèƒ½æè¿°:æœ€åä¸€æ¬¡æ‰§è¡Œçš„å‘½ä»¤çš„è¿”å›çŠ¶æ€ã€‚å¦‚æœè¿™ä¸ªå˜é‡çš„å€¼ä¸º0ï¼Œè¯æ˜ä¸Šä¸€ä¸ªå‘½ä»¤æ­£ç¡®æ‰§è¡Œå¦‚æœè¿™ä¸ªå˜é‡çš„å€¼ä¸ºé0(å…·ä½“æ˜¯å“ªä¸ªæ•°ï¼Œç”±å‘½ä»¤è‡ªå·±æ¥å†³å®š)ï¼Œåˆ™è¯æ˜ä¸Šä¸€ä¸ªå‘½ä»¤æ‰§è¡Œä¸æ­£ç¡®äº†ã€‚)</p></li></ul><p>3.åº”ç”¨å®ä¾‹</p><ul><li>åœ¨ä¸€ä¸ªshellè„šæœ¬ä¸­ç®€å•ä½¿ç”¨ä¸€ä¸‹é¢„å®šä¹‰å˜é‡</li><li><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240910155833833.png" class title="image-20240910155833833"></li></ul></blockquote><h2 id="6-è¿ç®—ç¬¦"><a href="#6-è¿ç®—ç¬¦" class="headerlink" title="6.è¿ç®—ç¬¦"></a>6.è¿ç®—ç¬¦</h2><blockquote><p>1.åŸºæœ¬ä»‹ç»</p><blockquote><p>å­¦ä¹ å¦‚ä½•åœ¨shelä¸­è¿›è¡Œå„ç§è¿ç®—æ“ä½œã€‚</p></blockquote><p>2.åŸºæœ¬è¯­æ³•</p><ul><li><p>1.<code>$((è¿ç®—å¼))</code>æˆ–<code>$[è¿ç®—å¼]</code>æˆ–è€… <code>expr m + n </code>        #å…¶ä¸­expræ˜¯expressionè¿™ä¸ªå•è¯çš„ç¼©å†™ï¼Œä¸­æ–‡æ˜¯è¡¨è¾¾å¼çš„æ„æ€</p><ul><li>æ³¨æ„exprè¿ç®—ç¬¦é—´è¦æœ‰ç©ºæ ¼ï¼Œå¦‚æœå¸Œæœ›å°† expr çš„ç»“æœèµ‹ç»™æŸä¸ªå˜é‡ï¼Œä½¿ç”¨``</li></ul></li><li><p>3.<code>expr m - n</code></p></li><li><p>4.<code>expr</code>  <code>\*</code>ï¼Œ<code>/</code>ï¼Œ<code>% </code>      #åˆ†åˆ«æ˜¯&#x3D;&#x3D;ã€‹<strong>ä¹˜</strong>ï¼ˆè¦æ³¨æ„ï¼‰ï¼Œé™¤ï¼Œå–ä½™</p></li></ul><p>3.åº”ç”¨å®ä¾‹</p><ul><li>æ¡ˆä¾‹1:è®¡ç®—(2+3*4çš„å€¼</li><li>æ¡ˆä¾‹2:è¯·æ±‚å‡ºå‘½ä»¤è¡Œçš„ä¸¤ä¸ªå‚æ•°[æ•´æ•°]çš„å’Œ<ul><li><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240910161209247.png" class title="image-20240910161209247"></li></ul></li></ul></blockquote><h2 id="7-æ¡ä»¶åˆ¤æ–­"><a href="#7-æ¡ä»¶åˆ¤æ–­" class="headerlink" title="7.æ¡ä»¶åˆ¤æ–­"></a>7.æ¡ä»¶åˆ¤æ–­</h2><p>1.åˆ¤æ–­è¯­å¥</p><blockquote><p>1.åŸºæœ¬è¯­æ³•</p><ul><li><code>[ condition ]</code>(æ³¨æ„conditionå‰åè¦æœ‰ç©ºæ ¼)  <ul><li>#condition ä¸ºä½ è¾“å…¥çš„æ¡ä»¶ï¼Œéç©ºè¿”å›trueï¼Œå¯ä½¿ç”¨$?éªŒè¯(0ä¸ºtrueï¼Œ&gt;1ä¸ºfalse)</li></ul></li></ul><p>åº”ç”¨å®ä¾‹</p><ul><li>[ hspEdu ]    è¿™ä¸ªæ¡ä»¶è¿”å›true</li><li>[ ]è¿™ä¸ªæ¡ä»¶è¿”å›false</li><li><code>[ condition  ] &amp;&amp; echo OK || echo notok</code>    æ¡ä»¶æ»¡è¶³ï¼Œæ‰§è¡Œåé¢çš„è¯­å¥<ul><li>ä¾‹å¦‚ï¼šç¡®ä¿å¤‡ä»½ç›®å½•å­˜åœ¨,åˆ›å»ºå¤‡ä»½ç›®å½•ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå°±åˆ›å»º<code>[ ! -d &quot;$&#123;BACKUP&#125;/$&#123;DATETIME&#125;&quot; ] &amp;&amp; mkdir -p &quot;$&#123;BACKUP&#125;/$&#123;DATETIME&#125;&quot;</code></li></ul></li></ul></blockquote><p>2.æ¡ä»¶åˆ¤æ–­</p><blockquote><p>1.åˆ¤æ–­è¯­å¥å¸¸ç”¨åˆ¤æ–­æ¡ä»¶</p><ul><li><p>1.&#x3D; å­—ç¬¦ä¸²æ¯”è¾ƒ</p></li><li><p>2.ä¸¤ä¸ªæ•´æ•°çš„æ¯”è¾ƒ</p><ul><li>-lt å°äº</li><li>-le å°äºç­‰äº    # little equalçš„ç®€å†™</li><li>-eq ç­‰äº-gt å¤§äº</li><li>-ge å¤§äºç­‰äº</li><li>-ne ä¸ç­‰äº</li></ul></li><li><p>3.æŒ‰ç…§æ–‡ä»¶æƒé™è¿›è¡Œåˆ¤æ–­</p><ul><li>-r æœ‰è¯»çš„æƒé™</li><li>-w æœ‰å†™çš„æƒé™</li><li>-x æœ‰æ‰§è¡Œçš„æƒé™</li></ul></li><li><p>4.æŒ‰ç…§æ–‡ä»¶ç±»å‹è¿›è¡Œåˆ¤æ–­</p><ul><li>-f  æ–‡ä»¶å­˜åœ¨å¹¶ä¸”æ˜¯ä¸€ä¸ªå¸¸è§„çš„æ–‡ä»¶</li><li>-e  æ–‡ä»¶å­˜åœ¨</li><li>-d  æ–‡ä»¶å­˜åœ¨å¹¶æ˜¯ä¸€ä¸ªç›®å½•</li></ul></li></ul><p>2.åº”ç”¨å®ä¾‹</p><ul><li>æ¡ˆä¾‹1:â€@kâ€æ˜¯å¦ç­‰äºâ€okâ€<ul><li>åˆ¤æ–­è¯­å¥:  ä½¿ç”¨ <code>=</code></li></ul></li><li>æ¡ˆä¾‹2:23æ˜¯å¦å¤§äºç­‰äº22<ul><li>åˆ¤æ–­è¯­å¥: ä½¿ç”¨ <code>-ge</code></li></ul></li><li>æ¡ˆä¾‹3:&#x2F;root&#x2F;shcode&#x2F;aaa.txtç›®å½•ä¸­çš„æ–‡ä»¶æ˜¯å¦å­˜åœ¨<ul><li>åˆ¤æ–­è¯­å¥: ä½¿ç”¨ <code>-f</code></li></ul></li><li>ä¸Šé¢æ¡ˆä¾‹çš„ç»“æœ<ul><li><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240910163042552.png" class title="image-20240910163042552"></li></ul></li></ul></blockquote><h2 id="8-å•åˆ†æ”¯å¤šåˆ†æ”¯"><a href="#8-å•åˆ†æ”¯å¤šåˆ†æ”¯" class="headerlink" title="8.å•åˆ†æ”¯å¤šåˆ†æ”¯"></a>8.å•åˆ†æ”¯å¤šåˆ†æ”¯</h2><p>1.æµç¨‹æ§åˆ¶</p><blockquote><p>1.if åˆ¤æ–­  åŸºæœ¬è¯­æ³•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">if [ æ¡ä»¶åˆ¤æ–­å¼ ]<br>then<br>ç¨‹åº<br>fi<br></code></pre></td></tr></table></figure><p>æˆ–å¤šåˆ†æ”¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">if [ æ¡ä»¶åˆ¤æ–­å¼ ]<br>then<br>ç¨‹åº<br>elif [ æ¡ä»¶åˆ¤æ–­å¼ ]<br>then<br>ç¨‹åº<br>fi<br></code></pre></td></tr></table></figure><p>2.æ³¨æ„äº‹é¡¹:</p><ul><li><p>(1)[æ¡ä»¶åˆ¤æ–­å¼]ï¼Œä¸­æ‹¬å·å’Œæ¡ä»¶åˆ¤æ–­å¼ä¹‹é—´å¿…é¡»æœ‰ç©ºæ ¼</p></li><li><p>(2)æ¨èä½¿ç”¨ç¬¬äºŒç§æ–¹å¼</p></li></ul><p>3.åº”ç”¨å®ä¾‹</p><ul><li>æ¡ˆä¾‹:è¯·ç¼–å†™-ä¸€ä¸ªshellç¨‹åºï¼Œå¦‚æœè¾“å…¥çš„å‚æ•°ï¼Œå¤§äºç­‰äº60ï¼Œåˆ™è¾“å‡ºâ€åŠæ ¼äº†â€,å¦‚æœå°äº60,åˆ™è¾“å‡ºä¸åŠæ ¼<ul><li><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240910164143965.png" class title="image-20240910164143965"></li></ul></li></ul></blockquote><h2 id="9-caseè¯­å¥"><a href="#9-caseè¯­å¥" class="headerlink" title="9.caseè¯­å¥"></a>9.caseè¯­å¥</h2><blockquote><p>caseè¯­å¥æ˜¯åŸºæœ¬è¯­æ³•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs shell">case $å˜é‡å in<br>&quot;å€¼1â€)<br>å¦‚æœå˜é‡çš„å€¼ç­‰äºå€¼1ï¼Œåˆ™æ‰§è¡Œç¨‹åº1<br>;;<br>&quot;å€¼2â€)<br>å¦‚æœå˜é‡çš„å€¼ç­‰äºå€¼2ï¼Œåˆ™æ‰§è¡Œç¨‹åº2<br>;;<br>*)<br>å¦‚æœå˜é‡çš„å€¼éƒ½ä¸æ˜¯ä»¥ä¸Šçš„å€¼ï¼Œåˆ™æ‰§è¡Œæ­¤ç¨‹åº<br>;;<br>esac<br></code></pre></td></tr></table></figure><p>åº”ç”¨å®ä¾‹ testCase.sh</p><ul><li>æ¡ˆä¾‹1 :å½“å‘½ä»¤è¡Œå‚æ•°æ˜¯ 1 æ—¶ï¼Œè¾“å‡ºâ€å‘¨ä¸€â€,æ˜¯2 æ—¶ï¼Œå°±è¾“å‡ºâ€å‘¨äºŒâ€ï¼Œå…¶å®ƒæƒ…å†µè¾“å‡ºâ€œotherâ€<ul><li><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240910164808477.png" class title="image-20240910164808477"></li></ul></li></ul></blockquote><h2 id="10-forå¾ªç¯"><a href="#10-forå¾ªç¯" class="headerlink" title="10.forå¾ªç¯"></a>10.forå¾ªç¯</h2><p>forå¾ªç¯</p><blockquote><p>1.åŸºæœ¬è¯­æ³•1ï¼Œè¿™ä¸ªæ˜¯ä¸€äº›å…·ä½“å€¼å¾ªç¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">for å˜é‡ in å€¼1 å€¼2 å€¼3..<br>do<br>ç¨‹åº<br>done<br></code></pre></td></tr></table></figure><p>2.åº”ç”¨å®ä¾‹ </p><ul><li>æ¡ˆä¾‹1:æ‰“å°å‘½ä»¤è¡Œè¾“å…¥çš„å‚æ•°  [<strong>è¿™é‡Œå¯ä»¥çœ‹å‡º<code>$* </code>å’Œ<code>$@</code>çš„åŒºåˆ«</strong>]<ul><li><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240910165433283.png" class title="image-20240910165433283"></li></ul></li></ul><p>3.åŸºæœ¬è¯­æ³•2ï¼Œæ¡ä»¶æ˜¯ä¸€ä¸ªèŒƒå›´</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">for((åˆå§‹å€¼;å¾ªç¯æ§åˆ¶æ¡ä»¶;å˜é‡å˜åŒ– ))<br>do<br>ç¨‹åº<br>done<br></code></pre></td></tr></table></figure><p>4.åº”ç”¨å®ä¾‹ </p><ul><li>æ¡ˆä¾‹1:ä»1åŠ åˆ°100çš„å€¼è¾“å‡ºæ˜¾ç¤º<ul><li><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240910165853874.png" class title="image-20240910165853874"></li></ul></li></ul></blockquote><h2 id="11-whileå¾ªç¯"><a href="#11-whileå¾ªç¯" class="headerlink" title="11.whileå¾ªç¯"></a>11.whileå¾ªç¯</h2><blockquote><p>whileå¾ªç¯<br>åŸºæœ¬è¯­æ³•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">while [ æ¡ä»¶åˆ¤æ–­å¼ ]do<br>ç¨‹åº<br>done<br></code></pre></td></tr></table></figure><ul><li>æ³¨æ„ï¼š<code>while</code>å’Œ<code>[</code>æœ‰ç©ºæ ¼ï¼Œæ¡ä»¶åˆ¤æ–­å¼å’Œ<code>[</code>ä¹Ÿæœ‰ç©ºæ ¼</li></ul><p>åº”ç”¨å®ä¾‹</p><ul><li><p>æ¡ˆä¾‹1 :ä»å‘½ä»¤è¡Œè¾“å…¥ä¸€ä¸ªæ•°nï¼Œç»Ÿè®¡ä» 1+..+n çš„å€¼æ˜¯å¤šå°‘?</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br>SUM=0<br>i=0<br>while [ $i -le $1 ]<br>do<br>SUM=$[$SUM+$I]<br>i=$[$i+1]<br>done<br>echo &quot;æ‰§è¡Œç»“æŸ=$SUM&quot;<br></code></pre></td></tr></table></figure></li></ul></blockquote><h2 id="12-readè·å–è¾“å…¥"><a href="#12-readè·å–è¾“å…¥" class="headerlink" title="12.readè·å–è¾“å…¥"></a>12.readè·å–è¾“å…¥</h2><blockquote><p>readè¯»å–æ§åˆ¶å°è¾“å…¥</p></blockquote><blockquote><p>1.åŸºæœ¬è¯­æ³•</p><ul><li>read(é€‰é¡¹)(å‚æ•°)</li></ul><p>2.é€‰é¡¹:</p><ul><li>-p:æŒ‡å®šè¯»å–å€¼æ—¶çš„æç¤ºçš„å†…å®¹;</li><li>-t:æŒ‡å®šè¯»å–å€¼æ—¶ç­‰å¾…çš„æ—¶é—´(ç§’)ï¼Œå¦‚æœæ²¡æœ‰åœ¨æŒ‡å®šçš„æ—¶é—´å†…è¾“å…¥ï¼Œå°±ä¸å†ç­‰å¾…äº†</li></ul><p>3.å‚æ•°</p><ul><li>å˜é‡:æŒ‡å®šè¯»å–å€¼çš„å˜é‡å</li></ul><p>4.åº”ç”¨å®ä¾‹</p><ul><li>æ¡ˆä¾‹1:è¯»å–æ§åˆ¶å°è¾“å…¥ä¸€ä¸ªnumå€¼</li><li>æ¡ˆä¾‹2:è¯»å–æ§åˆ¶å°è¾“å…¥ä¸€ä¸ªnumå€¼ï¼Œåœ¨10ç§’å†…è¾“å…¥ã€‚<ul><li><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240911095034654.png" class title="image-20240911095034654"></li></ul></li></ul></blockquote><h2 id="13-ç³»ç»Ÿå‡½æ•°"><a href="#13-ç³»ç»Ÿå‡½æ•°" class="headerlink" title="13.ç³»ç»Ÿå‡½æ•°"></a>13.ç³»ç»Ÿå‡½æ•°</h2><p>å‡½æ•°ä»‹ç»</p><blockquote><p>1.ä»‹ç»</p><blockquote><p>shellç¼–ç¨‹å’Œå…¶å®ƒç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼Œæœ‰ç³»ç»Ÿå‡½æ•°ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰å‡½æ•°ã€‚ç³»ç»Ÿå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬è¿™é‡Œå°±ä»‹ç»ä¸¤ä¸ªã€‚</p></blockquote><p>2.ç³»ç»Ÿå‡½æ•°(å¯ä»¥ç”¨åˆ°shellè„šæœ¬ä¸­)</p><ul><li><p>basenameåŸºæœ¬è¯­æ³•</p><ul><li><p>åŠŸèƒ½:è¿”å›å®Œæ•´è·¯å¾„æœ€å&#x2F;çš„éƒ¨åˆ†ï¼Œ<strong>å¸¸ç”¨äºè·å–æ–‡ä»¶å</strong></p></li><li><p><code>basename  [pathname] [suffix]</code></p></li><li><p><code>basename [string] [suffix]</code></p><ul><li>(åŠŸèƒ½æè¿°:basenameå‘½ä»¤ä¼šåˆ æ‰æ‰€æœ‰çš„å‰ç¼€åŒ…æ‹¬æœ€åä¸ª(â€˜&#x2F;â€™)å­—ç¬¦ï¼Œç„¶åå°†å­—ç¬¦ä¸²æ˜¾ç¤ºå‡ºæ¥ã€‚</li></ul></li></ul></li></ul><p>3.é€‰é¡¹:</p><ul><li><p>pathname&#x2F;stringï¼Œä¸ºæˆ‘ä»¬æƒ³è¦å¤„ç†çš„è·¯å¾„&#x2F;å­—ç¬¦ä¸²</p></li><li><p>suffixä¸ºåç¼€ï¼Œå¦‚æœsuffixè¢«æŒ‡å®šäº†ï¼Œbasenameä¼šå°†pathnameæˆ–stringä¸­çš„suffixå»æ‰</p></li></ul><p>4.åº”ç”¨å®ä¾‹</p><blockquote><p>æ¡ˆä¾‹1:è¯·è¿”å› &#x2F;home&#x2F;aaa&#x2F;test.txt çš„â€test.txtâ€éƒ¨åˆ†</p></blockquote><ul><li><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240911100007185.png" class title="image-20240911100007185"></li></ul></blockquote><blockquote><p>dirnameåŸºæœ¬è¯­æ³•</p><p>åŠŸèƒ½:è¿”å›å®Œæ•´è·¯å¾„æœ€å&#x2F;çš„å‰é¢çš„éƒ¨åˆ†ï¼Œ<strong>å¸¸ç”¨äºè¿”å›è·¯å¾„éƒ¨åˆ†</strong></p><p>dirname æ–‡ä»¶ç»å¯¹è·¯å¾„(åŠŸèƒ½æè¿°:ä»ç»™å®šçš„åŒ…å«ç»å¯¹è·¯å¾„çš„æ–‡ä»¶åä¸­å»é™¤æ–‡ä»¶å(éç›®å½•çš„éƒ¨åˆ†)ï¼Œç„¶åè¿”å›å‰©ä¸‹çš„è·¯å¾„(ç›®å½•çš„éƒ¨åˆ†))</p><p>åº”ç”¨å®ä¾‹</p><p>æ¡ˆä¾‹1:è¯·è¿”å›&#x2F;home&#x2F;aaa&#x2F;test.txtçš„&#x2F;home&#x2F;aaa</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240911100249291.png" class title="image-20240911100249291"></blockquote><h2 id="14-è‡ªå®šä¹‰å‡½æ•°"><a href="#14-è‡ªå®šä¹‰å‡½æ•°" class="headerlink" title="14.è‡ªå®šä¹‰å‡½æ•°"></a>14.è‡ªå®šä¹‰å‡½æ•°</h2><blockquote><p>1.è‡ªå®šä¹‰å‡½æ•°åŸºæœ¬è¯­æ³•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">[ function ] funname[0]<br>&#123;<br>ç¨‹åº;<br>[return int;]<br>&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">è°ƒç”¨ç›´æ¥å†™å‡½æ•°å:funname [å€¼]</span><br></code></pre></td></tr></table></figure><p>2.åº”ç”¨å®ä¾‹</p><ul><li>æ¡ˆä¾‹1:è®¡ç®—è¾“å…¥ä¸¤ä¸ªå‚æ•°çš„å’Œï¼Œgetsum</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell">function getsum()<br>&#123;<br>SUM=$[$n1+$n2];<br>echo &quot;å’Œæ˜¯=$SUM&quot;<br>&#125;<br><br>read -p â€è¯·è¾“å…¥ä¸€ä¸ªæ•° n1=â€œ n1<br>read -p â€è¯·è¾“å…¥ä¸€ä¸ªæ•° n2=â€œ n2<br><span class="hljs-meta prompt_">#</span><span class="language-bash">è°ƒç”¨</span><br>getSUM $n1 $n2<br></code></pre></td></tr></table></figure><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240911102511054.png" class title="image-20240911102511054"></blockquote><h2 id="15-å†™ä¸€ä¸ªå®šæ—¶å¤‡ä»½æ•°æ®åº“è„šæœ¬"><a href="#15-å†™ä¸€ä¸ªå®šæ—¶å¤‡ä»½æ•°æ®åº“è„šæœ¬" class="headerlink" title="15.å†™ä¸€ä¸ªå®šæ—¶å¤‡ä»½æ•°æ®åº“è„šæœ¬"></a>15.å†™ä¸€ä¸ªå®šæ—¶å¤‡ä»½æ•°æ®åº“è„šæœ¬</h2><blockquote><p>1.éœ€æ±‚åˆ†æ</p><ul><li><p>1.æ¯å¤©å‡Œæ™¨ 2:30 å¤‡ä»½ æ•°æ®åº“ hspEduDBåˆ° &#x2F;data&#x2F;backup&#x2F;db</p></li><li><p>2.å¤‡ä»½å¼€å§‹å’Œå¤‡ä»½ç»“æŸèƒ½å¤Ÿç»™å‡ºç›¸åº”çš„æç¤ºä¿¡æ¯</p></li><li><p>3.å¤‡ä»½åçš„æ–‡ä»¶è¦æ±‚ä»¥å¤‡ä»½æ—¶é—´ä¸ºæ–‡ä»¶åï¼Œå¹¶æ‰“åŒ…æˆ.tar.gzçš„å½¢å¼ï¼Œæ¯”å¦‚:2021-03-12 230201.tar.gz</p></li><li><p>4.åœ¨å¤‡ä»½çš„åŒæ—¶ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰10å¤©å‰å¤‡ä»½çš„æ•°æ®åº“æ–‡ä»¶ï¼Œå¦‚æœæœ‰å°±å°†å…¶åˆ é™¤ã€‚</p></li></ul><p>2.æ€è·¯åˆ†æå›¾</p><ul><li><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240911103014606.png" class title="image-20240911103014606"></li><li><p>å°†è„šæœ¬æ”¾åˆ°<code>/usr/sbin</code>ç›®å½•ä¸‹ï¼Œå› ä¸ºè¿™ä¸ªç›®å½•æ˜¯rootæ‰§è¡Œçš„æƒé™ï¼Œè€Œä»»åŠ¡è°ƒåº¦ä¹Ÿæ˜¯rootç”¨æˆ·ï¼Œæ‰€ä»¥æ”¾åˆ°è¿™ä¸ªç›®å½•ä¸­</p><ul><li><p>1.è„šæœ¬å¦‚ä¸‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">å¤‡ä»½ç›®å½•</span><br>BACKUP=/data/backup/db<br><span class="hljs-meta prompt_">#</span><span class="language-bash">å½“å‰æ—¶é—´</span><br>DATETIME=$(date +%Y-%m-%d_%H%M%S)<br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ•°æ®åº“åœ°å€</span><br>HOST=localhost<br>      #æ•°æ®åº“ç”¨æˆ·å<br>DB_USER=root<br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ•°æ®åº“å¯†ç </span><br>DB_PW=123456<br><span class="hljs-meta prompt_">#</span><span class="language-bash">å¤‡ä»½çš„æ•°æ®åº“å</span><br>DATABASE=test<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">åˆ›å»ºå¤‡ä»½ç›®å½•ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå°±åˆ›å»º</span><br>[ ! -d &quot;$&#123;BACKUP&#125;/$&#123;DATETIME&#125;&quot; ] &amp;&amp; mkdir -p &quot;$&#123;BACKUP&#125;/$&#123;DATETIME&#125;&quot;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">å¤‡ä»½æ•°æ®åº“(è¿™é‡Œæœ‰é£é™©ï¼Œæ•°æ®åº“å¯†ç æ³„éœ²)</span><br>mysqldump -u$&#123;DB_USER&#125; -p$&#123;DB_PW&#125; --host=$&#123;HOST&#125; -q -R --databases $&#123;DATABASE&#125; | gzip &gt; $&#123;BACKUP&#125;/$&#123;DATETIME&#125;/$DATETIME.sql.gz<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">å°†æ–‡ä»¶å¤„ç†æˆ tar.gz</span><br>cd $&#123;BACKUP&#125;<br>      tar -zcvf $DATETIME.tar.gz $&#123;DATETIME&#125;<br><span class="hljs-meta prompt_">#</span><span class="language-bash">åˆ é™¤å¯¹åº”çš„å¤‡ä»½ç›®å½•</span><br>rm -rf $&#123;BACKUP&#125;/$&#123;DATETIME&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">åˆ é™¤10å¤©å‰çš„å¤‡ä»½æ–‡ä»¶</span><br>find $&#123;BACKUP&#125; -mtime +10 -name &quot;*.tar.gz&quot; -exec rm -rf &#123;&#125; \;<br>echo &quot;$&#123;DATETIME&#125;===å¼€å§‹å¤‡ä»½æ•°æ®åº“===$&#123;DATABASE&#125;====æˆåŠŸ&quot;<br></code></pre></td></tr></table></figure><ul><li>2.è®¾ç½®å¾ªç¯æ‰§è¡Œå‘½ä»¤</li></ul></li><li><p>crontab -e </p></li><li><p><code>30 2 * * * /usr/sbin/mysql_db_backup.sh</code></p></li></ul></li></ul></blockquote><p>è„šæœ¬å‚è€ƒï¼š</p><blockquote><p>å¤šäº†æ¯æ¬¡çš„æ—¥å¿—ä¿¡æ¯</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">å¤‡ä»½ç›®å½•</span><br>BACKUP=/data/backup/db<br><span class="hljs-meta prompt_"># </span><span class="language-bash">æ—¥å¿—æ–‡ä»¶</span><br>LOGFILE=$&#123;BACKUP&#125;/backup.log<br><span class="hljs-meta prompt_">#</span><span class="language-bash">å½“å‰æ—¶é—´</span><br>DATETIME=$(date +%Y-%m-%d_%H%M%S)<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ•°æ®åº“åœ°å€</span><br>HOST=localhost<br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ•°æ®åº“ç”¨æˆ·å</span><br>DB_USER=root<br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ•°æ®åº“å¯†ç </span><br>DB_PW=123456<br><span class="hljs-meta prompt_">#</span><span class="language-bash">å¤‡ä»½çš„æ•°æ®åº“å</span><br>DATABASE=mydatebase<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">åˆ›å»ºå¤‡ä»½ç›®å½•ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå°±åˆ›å»º</span><br>[ ! -d &quot;$&#123;BACKUP&#125;/$&#123;DATETIME&#125;&quot; ] &amp;&amp; mkdir -p &quot;$&#123;BACKUP&#125;/$&#123;DATETIME&#125;&quot;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">å°†æ‰€æœ‰è¾“å‡ºï¼ˆåŒ…æ‹¬é”™è¯¯ä¿¡æ¯ï¼‰è®°å½•åˆ°æ—¥å¿—æ–‡ä»¶ä¸­</span><br>exec &gt; &gt;(tee -a $&#123;LOGFILE&#125;) 2&gt;&amp;1<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">å¤‡ä»½æ•°æ®åº“(è¿™é‡Œæœ‰é£é™©ï¼Œæ•°æ®åº“å¯†ç æ³„éœ²)</span><br>mysqldump -u$&#123;DB_USER&#125; -p$&#123;DB_PW&#125; --host=$&#123;HOST&#125; -q -R --databases $&#123;DATABASE&#125; | gzip &gt; $&#123;BACKUP&#125;/$&#123;DATETIME&#125;/$DATETIME.sql.gz<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">å°†æ–‡ä»¶å¤„ç†æˆ tar.gz</span><br>cd $&#123;BACKUP&#125;<br>tar -zcvf $DATETIME.tar.gz $&#123;DATETIME&#125;<br><span class="hljs-meta prompt_">#</span><span class="language-bash">åˆ é™¤å¯¹åº”çš„å¤‡ä»½ç›®å½•</span><br>rm -rf $&#123;BACKUP&#125;/$&#123;DATETIME&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">åˆ é™¤10å¤©å‰çš„å¤‡ä»½æ–‡ä»¶</span><br>find $&#123;BACKUP&#125; -mtime +10 -name &quot;*.tar.gz&quot; -exec rm -rf &#123;&#125; \;<br>echo &quot;$&#123;DATETIME&#125;===å¼€å§‹å¤‡ä»½æ•°æ®åº“===$&#123;DATABASE&#125;====æˆåŠŸ&quot;<br></code></pre></td></tr></table></figure><p>è„šæœ¬2</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">é…ç½®éƒ¨åˆ†</span><br>BACKUP_DIR=&quot;/data/backup/db&quot;<br>LOG_FILE=&quot;$&#123;BACKUP_DIR&#125;/backup.log&quot;<br>DATETIME=$(date +%Y-%m-%d_%H%M%S)<br>HOST=&quot;localhost&quot;<br>DB_USER=&quot;root&quot;<br>DB_PW_FILE=&quot;/opt/db_password_file&quot; # éœ€è¦ç¡®ä¿è¯¥æ–‡ä»¶æƒé™å®‰å…¨,å­˜æ”¾å¯†ç çš„åœ°æ–¹<br>DATABASE=&quot;mydatabase&quot;<br>RETENTION_DAYS=10<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">ç¡®ä¿å¤‡ä»½ç›®å½•å­˜åœ¨,åˆ›å»ºå¤‡ä»½ç›®å½•ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå°±åˆ›å»º</span><br>[ ! -d &quot;$&#123;BACKUP&#125;/$&#123;DATETIME&#125;&quot; ] &amp;&amp; mkdir -p &quot;$&#123;BACKUP&#125;/$&#123;DATETIME&#125;&quot;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">å°†æ‰€æœ‰è¾“å‡ºï¼ˆåŒ…æ‹¬é”™è¯¯ä¿¡æ¯ï¼‰è®°å½•åˆ°æ—¥å¿—æ–‡ä»¶ä¸­</span><br>exec &gt; &gt;(tee -a &quot;$&#123;LOG_FILE&#125;&quot;) 2&gt;&amp;1<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">æ£€æŸ¥å¯†ç æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span><br>if [ -f &quot;$&#123;DB_PW_FILE&#125;&quot; ]; then<br>    DB_PW=$(cat &quot;$&#123;DB_PW_FILE&#125;&quot;)<br>else<br>    DB_PW=&quot;&quot;<br>fi<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">å¤‡ä»½æ•°æ®åº“</span><br>echo &quot;$&#123;DATETIME&#125; - å¼€å§‹å¤‡ä»½æ•°æ®åº“ $&#123;DATABASE&#125;...&quot;<br>if [ -z &quot;$&#123;DB_PW&#125;&quot; ]; then<br>    # å¦‚æœå¯†ç ä¸ºç©ºï¼Œåˆ™ä¸ä½¿ç”¨ -p é€‰é¡¹<br>    mysqldump -u&quot;$&#123;DB_USER&#125;&quot; --host=&quot;$&#123;HOST&#125;&quot; -q -R --databases &quot;$&#123;DATABASE&#125;&quot; | gzip &gt; &quot;$&#123;BACKUP_DIR&#125;/$&#123;DATETIME&#125;.sql.gz&quot;<br>else<br>    # å¦‚æœå¯†ç ä¸ä¸ºç©ºï¼Œåˆ™ä½¿ç”¨ -p é€‰é¡¹<br>    mysqldump -u&quot;$&#123;DB_USER&#125;&quot; -p&quot;$&#123;DB_PW&#125;&quot; --host=&quot;$&#123;HOST&#125;&quot; -q -R --databases &quot;$&#123;DATABASE&#125;&quot; | gzip &gt; &quot;$&#123;BACKUP_DIR&#125;/$&#123;DATETIME&#125;.sql.gz&quot;<br>fi<br><br>if [ $? -ne 0 ]; then<br>    echo &quot;$&#123;DATETIME&#125; - æ•°æ®åº“å¤‡ä»½å¤±è´¥ï¼&quot;<br>    exit 1<br>fi<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">åˆ›å»º tar.gz åŒ…</span><br>echo &quot;$&#123;DATETIME&#125; - åˆ›å»ºå¤‡ä»½åŒ…...&quot;<br>tar -zcvf &quot;$&#123;BACKUP_DIR&#125;/$&#123;DATETIME&#125;.tar.gz&quot; -C &quot;$&#123;BACKUP_DIR&#125;&quot; &quot;$&#123;DATETIME&#125;.sql.gz&quot;<br><br>if [ $? -ne 0 ]; then<br>    echo &quot;$&#123;DATETIME&#125; - åˆ›å»ºå¤‡ä»½åŒ…å¤±è´¥ï¼&quot;<br>    exit 1<br>fi<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">åˆ é™¤ä¸´æ—¶çš„å¤‡ä»½æ–‡ä»¶</span><br>rm -f &quot;$&#123;BACKUP_DIR&#125;/$&#123;DATETIME&#125;.sql.gz&quot;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">åˆ é™¤è¿‡æœŸçš„å¤‡ä»½æ–‡ä»¶</span><br>echo &quot;$&#123;DATETIME&#125; - åˆ é™¤è¿‡æœŸå¤‡ä»½æ–‡ä»¶...&quot;<br>find &quot;$&#123;BACKUP_DIR&#125;&quot; -type f -name &quot;*.tar.gz&quot; -mtime +$&#123;RETENTION_DAYS&#125; -exec rm -f &#123;&#125; \;<br><br>if [ $? -ne 0 ]; then<br>    echo &quot;$&#123;DATETIME&#125; - åˆ é™¤è¿‡æœŸå¤‡ä»½æ–‡ä»¶å¤±è´¥ï¼&quot;<br>    exit 1<br>fi<br><br>echo &quot;$&#123;DATETIME&#125; - æ•°æ®åº“å¤‡ä»½å®Œæˆï¼&quot;<br><br></code></pre></td></tr></table></figure><h1 id="py-Ubuntu"><a href="#py-Ubuntu" class="headerlink" title="py-Ubuntu"></a>py-Ubuntu</h1><h2 id="1-ä»‹ç»-2"><a href="#1-ä»‹ç»-2" class="headerlink" title="1.ä»‹ç»"></a>1.ä»‹ç»</h2><blockquote><blockquote><p>Ubuntu(å‹å¸®æ‹“ã€ä¼˜èˆ¬å›¾ã€ä¹Œç­å›¾)æ˜¯ä¸€ä¸ªä»¥é¢åº”ç”¨ä¸ºä¸»çš„å¼€æºGNU&#x2F;Linuxæ“ä½œç³»ç»Ÿæ”¯æŒx86ã€amd64(å³x64)å’Œpæ¶æ„ï¼Œç”±å…¨çƒåŒ–çš„ä¸“ä¸šå¼€Ubuntu æ˜¯åŸºäº GNU&#x2F;Liuå‘å›¢é˜Ÿ(Canonical Ltd)æ‰“é€ çš„ã€‚</p></blockquote><p><strong>ä¸“ä¸šçš„Pythonå¼€å‘è€…ä¸€èˆ¬ä¼šé€‰æ‹© Ubuntu è¿™æ¬¾Linuxç³»ç»Ÿä½œä¸ºç”Ÿäº§å¹³å°</strong></p><p><strong>æ¸©é¦¨æç¤º:</strong></p><p>Ubuntu å’Œ Centos éƒ½æ˜¯åŸºäº GNU&#x2F;Linux å†…æ ¸çš„ï¼Œå› æ­¤åŸºæœ¬ä½¿ç”¨å’ŒCentosæ˜¯å‡ ä¹ä¸€æ ·çš„å®ƒä»¬çš„å„ç§æŒ‡ä»¤å¯ä»¥é€šç”¨ï¼ŒåŒå­¦ä»¬åœ¨å­¦ä¹ å’Œä½¿ç”¨Ubuntuçš„è¿‡ç¨‹ä¸­ï¼Œä¼šå‘ç°å„ç§æ“ä½œæŒ‡ä»¤åœ¨é¢å­¦ä¹ Centoséƒ½ä½¿ç”¨è¿‡ã€‚åªæ˜¯ç•Œé¢å’Œé¢„å®‰è£…çš„è½¯ä»¶æœ‰æ‰€å·®åˆ«ã€‚</p></blockquote><h2 id="2-å®‰è£…ï¼ˆè‡ªå·±æœå§ï¼‰"><a href="#2-å®‰è£…ï¼ˆè‡ªå·±æœå§ï¼‰" class="headerlink" title="2.å®‰è£…ï¼ˆè‡ªå·±æœå§ï¼‰"></a>2.å®‰è£…ï¼ˆè‡ªå·±æœå§ï¼‰</h2><blockquote><p>ubuntuå®‰è£…æ¯”centosè¿˜ç®€å•ä¸€ç‚¹</p></blockquote><h2 id="3-ubuntuæ±‰åŒ–"><a href="#3-ubuntuæ±‰åŒ–" class="headerlink" title="3.ubuntuæ±‰åŒ–"></a>3.ubuntuæ±‰åŒ–</h2><blockquote><p>1.è®¾ç½®Ubuntuæ”¯æŒä¸­æ–‡</p><blockquote><p>é»˜è®¤å®‰è£…çš„ubuntu ä¸­åªæœ‰è‹±æ–‡è¯­è¨€ï¼Œå› æ­¤æ˜¯ä¸èƒ½æ˜¾ç¤ºæ±‰å­—çš„ã€‚è¦æ­£ç¡®æ˜¾ç¤ºæ±‰å­—ï¼Œéœ€è¦å®‰è£…ä¸­æ–‡è¯­è¨€åŒ…ã€‚</p></blockquote><p>2.å®‰è£…ä¸­æ–‡æ”¯æŒæ­¥éª¤:</p><ul><li><p>1.å•å‡»å·¦ä¾§å›¾æ ‡æ æ‰“å¼€ Language support èœå•ï¼Œç‚¹å‡»æ‰“å¼€Language Support(è¯­è¨€æ”¯æŒ)é€‰é¡¹å¡ã€‚</p></li><li><p>2.ç‚¹å‡»Install&#x2F;Remove Languagesï¼Œåœ¨å¼¹å‡ºçš„é€‰é¡¹å¡ä¸­ä¸‹æ‹‰æ‰¾åˆ°Chinese(Simplified)ï¼Œå³ä¸­æ–‡ç®€ä½“ï¼Œåœ¨åé¢çš„é€‰é¡¹æ¡†ä¸­æ‰“å‹¾ã€‚ç„¶åç‚¹å‡»Apply Changes æäº¤ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è”ç½‘ä¸‹è½½ä¸­æ–‡è¯­è¨€åŒ…ã€‚(ä¿è¯ubuntu æ˜¯è”ç½‘çš„)ã€‚</p></li><li><p>3.è¿™æ—¶â€œæ±‰è¯­(ä¸­å›½)â€åœ¨æœ€åä¸€ä½å› ä¸ºå½“å‰ç¬¬ä¸€ä½æ˜¯â€Englishâ€ï¼Œæ‰€ä»¥é»˜è®¤æ˜¾ç¤ºéƒ½æ˜¯è‹±æ–‡ã€‚æˆ‘ä»¬å¦‚æœå¸Œæœ›é»˜è®¤æ˜¾ç¤ºç”¨ä¸­æ–‡ï¼Œåˆ™åº”è¯¥å°†â€œæ±‰è¯­(ä¸­å›½)â€è®¾ç½®ä¸ºç¬¬ä¸€ä½ã€‚è®¾ç½®æ–¹æ³•æ˜¯æ‹–åŠ¨ï¼Œé¼ æ ‡å•å‡»â€œæ±‰è¯­(ä¸­å›½)å½“åº•è‰²å˜åŒ–(è¡¨ç¤ºé€‰ä¸­äº†åï¼ŒæŒ‰ä½é¼ æ ‡å·¦é”®ä¸æ¾æ‰‹ï¼Œå‘ä¸Šæ‹–åŠ¨æ”¾ç½®åˆ°ç¬¬ä¸€ä½ã€‚</p></li><li><p>4.è®¾ç½®åä¸ä¼šå³åˆ»ç”Ÿæ•ˆï¼Œéœ€è¦ä¸‹æ¬¡ç™»å½•æ—¶æ‰ä¼šç”Ÿæ•ˆ</p></li></ul></blockquote><h2 id="4-ubuntuçš„root"><a href="#4-ubuntuçš„root" class="headerlink" title="4.ubuntuçš„root"></a>4.ubuntuçš„root</h2><blockquote><p>ubuntuçš„ç”¨æˆ·æ˜¯å¼±ç”¨æˆ·</p></blockquote><blockquote><p>ä»‹ç»</p><blockquote><p> å®‰è£…ubuntuæˆåŠŸåï¼Œéƒ½æ˜¯æ™®é€šç”¨æˆ·æƒé™ï¼Œå¹¶æ²¡æœ‰æœ€é«˜rootæƒé™ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨rootæƒé™çš„æ—¶å€™ï¼Œé€šå¸¸éƒ½ä¼šåœ¨å‘½ä»¤å‰é¢åŠ ä¸Š sudo ã€‚æœ‰çš„æ—¶å€™æ„Ÿè§‰å¾ˆéº»çƒ¦ã€‚</p></blockquote><p>è§£å†³æ–¹æ³•</p><blockquote><p><strong>æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨suå‘½ä»¤æ¥ç›´æ¥åˆ‡æ¢åˆ°rootç”¨æˆ·çš„ï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰ç»™rootè®¾ç½®åˆå§‹å¯†ç å°±ä¼šæŠ›å‡º <code>su:Authentication failure</code> è¿™æ ·çš„é—®é¢˜ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åªè¦ç»™rootç”¨æˆ·è®¾ç½®ä¸€ä¸ªåˆå§‹å¯†ç å°±å¥½äº†ã€‚</strong></p></blockquote><ul><li><p>ç»™rootç”¨æˆ·è®¾ç½®å¯†ç å¹¶ä½¿ç”¨</p><ul><li><p>1.è¾“å…¥ <code>sudo passwd root</code> &#x2F;<code>su -</code>å‘½ä»¤ï¼Œè®¾å®šrootç”¨æˆ·å¯†ç </p></li><li><p>2.è®¾å®šrootå¯†ç æˆåŠŸåï¼Œè¾“å…¥su å‘½ä»¤ï¼Œå¹¶è¾“å…¥åˆšæ‰è®¾å®šçš„rootå¯†ç ï¼Œå°±å¯ä»¥åˆ‡æ¢æˆrootäº†ã€‚æç¤ºç¬¦$ä»£è¡¨ä¸€èˆ¬ç”¨æˆ·ï¼Œæç¤ºç¬¦#ä»£è¡¨rootç”¨æˆ·ã€‚</p></li><li><p>3.ä»¥åå°±å¯ä»¥ä½¿ç”¨rootç”¨æˆ·äº†</p></li><li><p>4.è¾“å…¥ exit å‘½ä»¤ï¼Œé€€å‡ºrootå¹¶è¿”å›ä¸€èˆ¬ç”¨æˆ·</p></li></ul></li></ul></blockquote><h2 id="5-python"><a href="#5-python" class="headerlink" title="5.python"></a>5.python</h2><blockquote><p>1.è¯´æ˜</p><blockquote><p>å®‰è£…å¥½Ubuntuåï¼Œé»˜è®¤å°±å·²ç»å®‰è£…å¥½Pythonçš„å¼€å‘ç¯å¢ƒ</p></blockquote><p>2.åœ¨Ubuntuä¸‹å¼€å‘ä¸€ä¸ªPythonç¨‹åº</p><p><code>vi hello.py </code>    &#x3D;&#x3D;&#x3D;&gt;[ç¼–å†™hello.py] </p><p><code>python3 hello.py</code>    &#x3D;&#x3D;&#x3D;&#x3D;&gt;  [è¿è¡Œhello.py]</p></blockquote><h2 id="6-aptåŸç†"><a href="#6-aptåŸç†" class="headerlink" title="6.aptåŸç†"></a>6.aptåŸç†</h2><h3 id="1-ä»‹ç»-3"><a href="#1-ä»‹ç»-3" class="headerlink" title="1.ä»‹ç»"></a>1.ä»‹ç»</h3><blockquote><p>aptæ˜¯Advanced Packaging Toolçš„ç®€ç§°ï¼Œæ˜¯ä¸€æ¬¾å®‰è£…åŒ…ç®¡ç†å·¥å…·ã€‚åœ¨Ubuntuä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨aptå‘½ä»¤è¿›è¡Œè½¯ä»¶åŒ…çš„å®‰è£…ã€åˆ é™¤ã€æ¸…ç†ç­‰ï¼Œç±»ä¼¼äºWindowsä¸­çš„è½¯ä»¶ç®¡ç†å·¥å…·ã€‚åŸç†å›¾å¦‚ä¸‹ï¼š</p><p>unbuntu è½¯ä»¶ç®¡ç†çš„åŸç†ç¤ºæ„å›¾</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240911160448119.png" class title="image-20240911160448119"></blockquote><h3 id="2-æ›´æ–°aptæºï¼Œå’Œå®ä¾‹"><a href="#2-æ›´æ–°aptæºï¼Œå’Œå®ä¾‹" class="headerlink" title="2.æ›´æ–°aptæºï¼Œå’Œå®ä¾‹"></a>2.æ›´æ–°aptæºï¼Œå’Œå®ä¾‹</h3><h4 id="1-å®ä¾‹å‘½ä»¤"><a href="#1-å®ä¾‹å‘½ä»¤" class="headerlink" title="1.å®ä¾‹å‘½ä»¤"></a>1.å®ä¾‹å‘½ä»¤</h4><blockquote><p><code>sudo apt-get update</code> <strong>æ›´æ–°æº</strong></p><p><code>sudo apt-get install package</code> <strong>å®‰è£…åŒ…</strong></p><p><code>sudo apt-get remove package</code> <strong>åˆ é™¤åŒ…</strong></p><p><code>sudo apt-cache search package</code> æœç´¢è½¯ä»¶åŒ…</p><p><code>sudo apt-cache show paIkage</code> <strong>è·å–åŒ…çš„ç›¸å…³ä¿¡æ¯ï¼Œå¦‚è¯´æ˜ã€å¤§å°ã€ç‰ˆæœ¬ç­‰</strong></p><p><code>sudo apt-get install package --reinstall</code>é‡æ–°å®‰è£…åŒ…</p><p><code>sudo apt-get -f install</code> ä¿®å¤å®‰è£…</p><p><code>sudo apt-get remove package --purge</code> åˆ é™¤åŒ…ï¼ŒåŒ…æ‹¬é…ç½®æ–‡ä»¶ç­‰</p><p><code>sudo apt-get build-dep package</code> å®‰è£…ç›¸å…³çš„ç¼–è¯‘ç¯å¢ƒ</p><p><code>sudo apt-get upgrade</code> æ›´æ–°å·²å®‰è£…çš„åŒ…</p><p><code>sudo apt-get dist-upgrade</code> å‡çº§ç³»ç»Ÿ</p><p><code>sudo apt-cache depends package</code> äº†è§£ä½¿ç”¨è¯¥åŒ…ä¾èµ–é‚£äº›åŒ…</p><p><code>sudo apt-cache rdepends package</code> æŸ¥çœ‹è¯¥åŒ…è¢«å“ªäº›åŒ…ä¾èµ–</p><p><code>sudo apt-get source package</code> <strong>ä¸‹è½½è¯¥åŒ…çš„æºä»£ç </strong></p></blockquote><h4 id="2-ä¿®æ”¹æºï¼ˆè¿™é‡Œæ¼”ç¤ºçš„ç‰ˆæœ¬æ˜¯20-04ï¼‰"><a href="#2-ä¿®æ”¹æºï¼ˆè¿™é‡Œæ¼”ç¤ºçš„ç‰ˆæœ¬æ˜¯20-04ï¼‰" class="headerlink" title="2.ä¿®æ”¹æºï¼ˆè¿™é‡Œæ¼”ç¤ºçš„ç‰ˆæœ¬æ˜¯20.04ï¼‰"></a>2.ä¿®æ”¹æºï¼ˆè¿™é‡Œæ¼”ç¤ºçš„ç‰ˆæœ¬æ˜¯20.04ï¼‰</h4><blockquote><p>1.å…ˆå¤‡ä»½ä¸€ä»½åŸæ–‡ä»¶</p><ul><li><code>sudo cp /etc/apt/sources.list /etc/apt/sources.list.backup</code></li></ul><p>2.åˆ‡æ¢rootç”¨æˆ·ï¼Œåœ¨<code>/etc/apt</code>ç›®å½•ä¸‹ï¼Œå¹¶æ¸…ç©ºæºæ–‡ä»¶</p><ul><li><code>su root</code></li><li><code>cd /etc/apt</code></li><li><code>echo &#39;&#39; &gt; sources.list</code></li></ul><p>3.å…ˆæ‰¾åˆ°<code>https://mirrors.tuna.tsinghua.edu.cn/</code>æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240911162216281.png" class title="image-20240911162216281"></li><li><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240911162547654.png" class title="image-20240911162547654"></li><li><p>å°†å†…å®¹å¤åˆ¶åˆ°å¯¹åº”çš„æºæ–‡ä»¶åï¼Œæ›´æ–°æºå³å¯</p></li></ul><p>4.æ›´æ–°æºï¼ˆåˆ·æ–°ï¼‰</p><ul><li><code>sudo apt-get update</code></li></ul><p>5.æ¡ˆä¾‹è¯´æ˜:ä½¿ç”¨aptå®Œæˆå®‰è£…å’Œå¸è½½vim è½¯ä»¶ï¼Œå¹¶æŸ»è¯¢ vim è½¯ä»¶çš„ä¿¡æ¯:(å› ä¸ºä½¿ç”¨äº†é•œåƒç½‘ç«™ ï¼Œé€Ÿåº¦å¾ˆå¿«)</p><ul><li><p><code>sudo apt-get remove vim</code>  #åˆ é™¤</p></li><li><p><code>sudo apt-get install vim</code>  #å®‰è£…</p></li><li><p><code>sudo apt-cache show vim</code>  #è·å–vimçš„ä¿¡æ¯</p></li></ul></blockquote><h2 id="7-è¿œç¨‹ç™»å½•"><a href="#7-è¿œç¨‹ç™»å½•" class="headerlink" title="7.è¿œç¨‹ç™»å½•"></a>7.è¿œç¨‹ç™»å½•</h2><h3 id="1-ssh"><a href="#1-ssh" class="headerlink" title="1.ssh"></a>1.ssh</h3><blockquote><p>1.sshä»‹ç»</p><blockquote><p>SSHä¸ºSecure Shellçš„ç¼©å†™ï¼Œç”±IETF çš„ç½‘ç»œå·¥ä½œå°ç»„(Network Working Group)æ‰€åˆ¶å®š;SSH ä¸ºå»ºç«‹åœ¨åº”ç”¨å±‚å’Œä¼ è¾“å±‚åŸºç¡€ä¸Šçš„å®‰å…¨åè®®ã€‚</p></blockquote><blockquote><p>SSHæ˜¯ç›®å‰è¾ƒå¯é ï¼Œä¸“ä¸ºè¿œç¨‹ç™»å½•ä¼šè¯å’Œå…¶ä»–ç½‘ç»œæœåŠ¡æä¾›å®‰å…¨æ€§çš„åè®®ã€‚å¸¸ç”¨äºè¿œç¨‹ç™»å½•å‡ ä¹æ‰€æœ‰UNIX&#x2F;LInux å¹³å°éƒ½å¯è¿è¡ŒSSHã€‚</p></blockquote><blockquote><p>ä½¿ç”¨SSHæœåŠ¡ï¼Œéœ€è¦å®‰è£…ç›¸åº”çš„æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ã€‚å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„å…³ç³»:å¦‚æœï¼ŒAæœºå™¨æƒ³è¢«Bæœºå™¨è¿œç¨‹æ§åˆ¶ï¼Œé‚£ä¹ˆï¼ŒAæœºå™¨éœ€è¦å®‰è£…SSHæœåŠ¡å™¨ï¼ŒBæœºå™¨éœ€è¦å®‰è£…SSHå®¢æˆ·ç«¯ã€‚</p></blockquote><p>2.åŸç†å›¾</p><blockquote><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240911163744354.png" class title="image-20240911163744354"></blockquote><p>3.æ³¨æ„ï¼š</p><p><strong>å’ŒCentOSä¸ä¸€æ ·ï¼ŒUbuntué»˜è®¤æ²¡æœ‰å®‰è£…SSHDæœåŠ¡(ä½¿ç”¨<code>netstat</code> æŒ‡ä»¤æŸ¥çœ‹22ç«¯å£ï¼Œè‹¥æ²¡å®‰è£…netstatåˆ™æ‰§è¡Œ <code>apt installnet-tools</code>è¿›è¡Œå®‰è£…å†æ‰§è¡Œ<code>netstat</code>æŸ¥çœ‹),å‘ç°æ²¡æœ‰22ç«¯å£ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬ä¸èƒ½è¿›è¡Œè¿œç¨‹ç™»å½•ã€‚</strong></p><p>4.å®‰è£…SSHå’Œå¯ç”¨</p><ul><li><p>1.<code>sudo apt-get install openssh-server</code></p><ul><li>æ‰§è¡Œä¸Šé¢æŒ‡ä»¤åï¼Œ<strong>åœ¨å½“å‰è¿™å°Linuxä¸Šå°±å®‰è£…äº†SSHæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯</strong></li><li>è‹¥ä¸æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼Œåˆ™ç°åœ¨åªæœ‰sshå®¢æˆ·ç«¯</li></ul></li><li><p>2.<code>service sshd restart</code></p><ul><li>æ‰§è¡Œä¸Šé¢çš„æŒ‡ä»¤ï¼Œå°±å¯åŠ¨äº† sshd æœåŠ¡ã€‚ä¼šç›‘å¬ç«¯å£22</li></ul></li></ul></blockquote><h3 id="2-é›†ç¾¤"><a href="#2-é›†ç¾¤" class="headerlink" title="2.é›†ç¾¤"></a>2.é›†ç¾¤</h3><p>1.ä»ä¸€å°linuxç³»ç»Ÿè¿œç¨‹ç™»é™†å¦å¤–ä¸€å°linuxç³»ç»Ÿ</p><blockquote><blockquote><p>åœ¨åˆ›å»ºæœåŠ¡å™¨é›†ç¾¤æ—¶ï¼Œä¼šä½¿ç”¨åˆ°è¯¥æŠ€æœ¯</p></blockquote><p>1.åŸºæœ¬è¯­æ³•:</p><ul><li>ssh ç”¨æˆ·å@IP</li><li>ä¾‹å¦‚:ssh <a href="mailto:&#x68;&#115;&#112;&#x65;&#x64;&#x75;&#x40;&#x31;&#57;&#50;&#46;&#x31;&#54;&#x38;&#x2e;&#x32;&#48;&#x30;&#46;&#50;&#x32;&#x32;">&#x68;&#115;&#112;&#x65;&#x64;&#x75;&#x40;&#x31;&#57;&#50;&#46;&#x31;&#54;&#x38;&#x2e;&#x32;&#48;&#x30;&#46;&#50;&#x32;&#x32;</a></li></ul><blockquote><p>ä½¿ç”¨sshè®¿é—®ï¼Œå¦‚è®¿é—®å‡ºç°é”™è¯¯ã€‚å¯æŸ¥çœ‹æ˜¯å¦æœ‰è¯¥æ–‡ä»¶~&#x2F;.ssh&#x2F;known ssh å°è¯•åˆ é™¤è¯¥æ–‡ä»¶è§£å†³ï¼Œä¸€èˆ¬ä¸ä¼šæœ‰é—®é¢˜</p></blockquote><p>2.ç™»å‡º</p><ul><li>ç™»å‡ºå‘½ä»¤:<code>exit</code>æˆ–è€…<code>logout</code></li></ul></blockquote><h1 id="centos8å®‰è£…å’Œä»‹ç»"><a href="#centos8å®‰è£…å’Œä»‹ç»" class="headerlink" title="centos8å®‰è£…å’Œä»‹ç»"></a>centos8å®‰è£…å’Œä»‹ç»</h1><h2 id="1-å®‰è£…"><a href="#1-å®‰è£…" class="headerlink" title="1.å®‰è£…"></a>1.å®‰è£…</h2><h2 id="2-CentOS8-0-vs-CentOS7-0çš„åŒºåˆ«"><a href="#2-CentOS8-0-vs-CentOS7-0çš„åŒºåˆ«" class="headerlink" title="2.CentOS8.0 vs CentOS7.0çš„åŒºåˆ«"></a>2.CentOS8.0 vs CentOS7.0çš„åŒºåˆ«</h2><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240912121818091.png" class title="image-20240912121818091"><h1 id="æ—¥å¿—"><a href="#æ—¥å¿—" class="headerlink" title="æ—¥å¿—"></a>æ—¥å¿—</h1><h2 id="1-ä»‹ç»-4"><a href="#1-ä»‹ç»-4" class="headerlink" title="1.ä»‹ç»"></a>1.ä»‹ç»</h2><blockquote><p>æ—¥å¿—æ–‡ä»¶æ˜¯é‡è¦çš„ç³»ç»Ÿä¿¡æ¯æ–‡ä»¶ï¼Œå…¶ä¸­è®°å½•äº†è®¸å¤šé‡è¦çš„ç³»ç»Ÿäº‹ä»¶åŒ…æ‹¬ç”¨æˆ·çš„ç™»å½•ä¿¡æ¯ã€ç³»ç»Ÿçš„å¯åŠ¨ä¿¡æ¯ã€ç³»ç»Ÿçš„å®‰å…¨ä¿¡æ¯ã€é‚®ä»¶ç›¸å…³ä¿¡æ¯ã€å„ç§æœåŠ¡ç›¸å…³ä¿¡æ¯ç­‰ã€‚</p><p>æ—¥å¿—å¯¹äºå®‰å…¨æ¥è¯´ä¹Ÿå¾ˆé‡è¦ï¼Œå®ƒè®°å½•äº†ç³»ç»Ÿæ¯å¤©å‘ç”Ÿçš„å„å’Œäº‹æƒ…ï¼Œé€šè¿‡æ—¥å¿—æ¥æ£€æŸ¥é”™è¯¯å‘ç”Ÿçš„åŸå› æˆ–è€…å—åˆ°æ”»å‡»æ—¶æ”»å‡»è€…ç•™ä¸‹çš„ç—•è¿¹ã€‚</p><p>å¯ä»¥è¿™æ ·ç†è§£ æ—¥å¿—æ˜¯ç”¨æ¥è®°å½•é‡å¤§äº‹ä»¶çš„å·¥å…·</p></blockquote><p>2.<code>/var/log/ </code>ç›®å½•å°±æ˜¯ç³»ç»Ÿæ—¥å¿—æ–‡ä»¶çš„ä¿å­˜ä½ç½®ï¼Œçœ‹å¼ å›¾</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240912122039064.png" class title="image-20240912122039064"><p>3.ç³»ç»Ÿå¸¸ç”¨çš„æ—¥å¿—</p><table><thead><tr><th align="center">æ—¥å¿—æ–‡ä»¶</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td align="center"><strong>&#x2F;var&#x2F;log&#x2F;boot.log</strong></td><td>ç³»ç»Ÿå¯åŠ¨æ—¥å¿—</td></tr><tr><td align="center"><strong>&#x2F;var&#x2F;log&#x2F;cron</strong></td><td>è®°å½•ä¸ç³»ç»Ÿå®šæ—¶ä»»åŠ¡ç›¸å…³çš„æ—¥å¿—</td></tr><tr><td align="center">&#x2F;var&#x2F;log&#x2F;cups&#x2F;</td><td>è®°å½•æ‰“å°ä¿¡æ¯çš„æ—¥å¿—</td></tr><tr><td align="center">&#x2F;var&#x2F;log&#x2F;dmesg</td><td>è®°å½•äº†ç³»ç»Ÿåœ¨å¼€æœºæ—¶å†…æ ¸è‡ªæ£€çš„ä¿¡æ€»ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨dmesgå‘½ä»¤ç›´æ¥æŸ¥çœ‹å†…æ ¸è‡ªæ£€ä¿¡æ¯</td></tr><tr><td align="center">&#x2F;var&#x2F;log&#x2F;btmp</td><td>è®°å½•é”™è¯¯ç™»é™†çš„æ—¥å¿—ã€‚è¿™ä¸ªæ–‡ä»¶æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¸èƒ½ç›´æ¥ç”¨ViæŸ¥çœ‹ï¼Œè€Œè¦ä½¿ç”¨<code>lastb</code>å‘½ä»¤æŸ¥çœ‹ã€‚å‘½ä»¤å¦‚ä¸‹<code>[root@localhost log]# lastb</code></td></tr><tr><td align="center"><strong>&#x2F;var&#x2F;log&#x2F;lastlog</strong></td><td>è®°å½•ç³»ç»Ÿä¸­æ‰€æœ‰ç”¨æˆ·æœ€åä¸€æ¬¡çš„ç™»å½•æ—¶é—´çš„æ—¥å¿—ã€‚è¿™ä¸ªæ–‡ä»¶ä¹Ÿæ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ‰€ä»¥ç›´æ¥ä½¿ç”¨<code>lastlog</code>å‘½ä»¤æŸ¥çœ‹ï¼Œè¿™ä¸ªå‘½ä»¤ä¼šç›´æ¥æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶æŸ¥çœ‹</td></tr><tr><td align="center"><strong>&#x2F;var&#x2F;log&#x2F;mailog</strong></td><td>è®°å½•é‚®ä»¶ä¿¡æ¯çš„æ—¥å¿—</td></tr><tr><td align="center"><strong>&#x2F;var&#x2F;log&#x2F;message</strong></td><td>è®°å½•ç³»ç»Ÿé‡è¦æ¶ˆæ¯çš„æ—¥å¿—ï¼Œè¿™ä¸ªæ—¥å¿—æ–‡ä»¶ä¸­ä¼šè®°å½•Linuxç³»ç»Ÿçš„ç»å¤§å¤šæ•°é‡è¦ä¿¡æ¯ã€‚<strong>å¦‚æœç³»ç»Ÿå‡ºç°é—®é¢˜ï¼Œé¦–å…ˆè¦æŸ¥çš„åº”è¯¥å°±æ˜¯è¿™ä¸ªæ—¥å¿—æ–‡ä»¶</strong></td></tr><tr><td align="center"><strong>&#x2F;var&#x2F;log&#x2F;secure</strong></td><td>è®°å½•éªŒè¯å’Œæˆæƒæ–¹é¢çš„ä¿¡æ¯ï¼Œåªè¦æ¶‰åŠè´¦æˆ·å’Œå¯†ç çš„ç¨‹åºéƒ½ä¼šè®°å½•ï¼Œæ¯”å¦‚<strong>ç³»ç»Ÿçš„ç™»å½•ã€sshçš„ç™»å½•</strong>ã€suåˆ‡æ¢ç”¨æˆ·sudoæˆæƒï¼Œç”šè‡³æ·»åŠ ç”¨æˆ·å’Œä¿®æ”¹ç”¨æˆ·å¯†ç éƒ½ä¼šè®°å½•åœ¨è¿™ä¸ªæ—¥å¿—æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨<code>cat /var/log/secure</code>æŸ¥çœ‹</td></tr><tr><td align="center">&#x2F;var&#x2F;log&#x2F;wtmp</td><td>æ°¸ä¹…è®°å½•æ‰€æœ‰ç”¨æˆ·çš„ç™»é™†ã€æ³¨é”€ä¿¡æ¯ï¼ŒåŒæ—¶è®°å½•ç³»ç»Ÿçš„ååŠ¨ã€é‡å¯ã€å…³æœºäº‹ä»¶ã€‚æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶.è€Œè¦ä½¿ç”¨<code>last</code>çš„ä»¤æŸ¥çœ‹</td></tr><tr><td align="center"><strong>&#x2F;var&#x2F;tun&#x2F;ulmp</strong></td><td>è®°å½•å½“å‰å·²ç»ç™»å½•çš„ç”¨æˆ·çš„ä¿¡æ¯ã€‚è¿™ä¸ªæ–‡ä»¶ä¼šéšç€ç”¨æˆ·çš„ç™»å½•å’Œæ³¨é”€è€Œä¸æ–­å˜åŒ–ï¼Œåªè®°å½•å½“å‰ç™»å½•ç”¨æˆ·çš„ä¿¡æ¯ã€‚è¿™ä¸ªæ–‡ä»¶ä¸èƒ½ç”¨ViæŸ¥çœ‹è€Œè¦ä½¿ç”°<code>w</code>  <code>who</code> <code>users</code>ç­‰å‘½ä»¤æŸ¥çœ‹ï¼Œè¿™äº›å‘½ä»¤ç›´æ¥å–çš„è¿™ä¸ªæ–‡ä»¶çš„ä¿¡æ¯</td></tr></tbody></table><h2 id="2-æ—¥å¿—ç®¡ç†æœåŠ¡-rsyslogd"><a href="#2-æ—¥å¿—ç®¡ç†æœåŠ¡-rsyslogd" class="headerlink" title="2.æ—¥å¿—ç®¡ç†æœåŠ¡-rsyslogd"></a>2.æ—¥å¿—ç®¡ç†æœåŠ¡-rsyslogd</h2><blockquote><ul><li>1.ä»‹ç»</li></ul><blockquote><p>CentOs7.6æ—¥å¿—æœåŠ¡æ˜¯rsyslogdï¼ŒCentOs6.xæ—¥å¿—æœåŠ¡æ˜¯syslogdã€‚rsyslogd åŠŸèƒ½æ›´å¼ºå¤§ï¼Œrsyslogd çš„ä½¿ç”¨ã€æ—¥å¿—æ–‡ä»¶çš„æ ¼å¼ï¼Œå’Œ syslogd æœåŠ¡å…¼å®¹çš„ã€‚åŸç†ç¤ºæ„å›¾ï¼ˆè¿™ä¸ªæœåŠ¡å’Œæ—¥å¿—çš„å…³ç³»ï¼‰</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240912124749075.png" class title="image-20240912124749075"></blockquote><ul><li><p>2.æŸ¥è¯¢ Linux ä¸­çš„ rsyslogd æœåŠ¡æ˜¯å¦å¯åŠ¨</p><ul><li><code>ps aux | grep &quot;rsyslog&quot; | grep -v &quot;grep</code> æˆ– <code>ps aux | grep &quot;rsyslog&quot;</code></li></ul></li><li><p>3.æŸ¥è¯¢ rsyslogd æœåŠ¡çš„è‡ªå¯åŠ¨çŠ¶æ€</p><ul><li><code>systemctl list-unit-files | grep rsyslog</code></li></ul></li></ul></blockquote><h2 id="3-æ—¥å¿—æœåŠ¡é…ç½®æ–‡ä»¶"><a href="#3-æ—¥å¿—æœåŠ¡é…ç½®æ–‡ä»¶" class="headerlink" title="3.æ—¥å¿—æœåŠ¡é…ç½®æ–‡ä»¶"></a>3.æ—¥å¿—æœåŠ¡é…ç½®æ–‡ä»¶</h2><p>1.äº†è§£</p><blockquote><p>é…ç½®æ–‡ä»¶: <code>/etc/rsyslog.conf</code></p><blockquote><p>ç¼–è¾‘æ–‡ä»¶æ—¶çš„æ ¼å¼ä¸º: <code>*.* </code>  å­˜æ”¾æ—¥å¿—æ–‡ä»¶</p></blockquote><blockquote><p> <strong>å…¶ä¸­ç¬¬ä¸€ä¸ª*ä»£è¡¨æ—¥å¿—ç±»å‹ï¼Œç¬¬äºŒä¸ª*ä»£è¡¨æ—¥å¿—çº§åˆ«</strong></p></blockquote><ul><li>1.ç¬¬ä¸€ä¸ª*ï¼Œä»£è¡¨æ—¥å¿—ç±»å‹ï¼Œæ—¥å¿—ç±»å‹åˆ†ä¸º:</li></ul><table><thead><tr><th>ç±»åˆ«</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>auth</td><td>pamäº§ç”Ÿçš„æ—¥å¿—</td></tr><tr><td>authpriv</td><td>sshã€ftpç­‰ç™»å½•ä¿¡æ¯çš„éªŒè¯ä¿¡æ¯</td></tr><tr><td>corn</td><td>æ—¶é—´ä»»åŠ¡ç›¸å…³</td></tr><tr><td>kern</td><td>å†…æ ¸</td></tr><tr><td>lpr</td><td>æ‰“å°</td></tr><tr><td>mail</td><td>é‚®ä»¶</td></tr><tr><td>mark(syslog)-rsyslog</td><td>æœåŠ¡å†…éƒ¨çš„ä¿¡æ¯ï¼Œæ—¶é—´æ ‡è¯†##æ–°é—»ç»„</td></tr><tr><td>news</td><td>æ–°é—»ç»„</td></tr><tr><td>user</td><td>ç”¨æˆ·ç¨‹åºäº§ç”Ÿçš„ç›¸å…³ä¿¡æ¯</td></tr><tr><td>uucp</td><td>unix to nuix copyä¸»æœºä¹‹é—´ç›¸å…³çš„é€šä¿¡</td></tr><tr><td>local 1-7</td><td>è‡ªå®šä¹‰çš„æ—¥å¿—è®¾å¤‡</td></tr></tbody></table><ul><li>2.ç¬¬äºŒä¸ª*ï¼Œè¡¨æ—¥å¿—çº§åˆ«ï¼Œæ—¥å¿—çº§åˆ«åˆ†ä¸º:</li></ul><table><thead><tr><th>çº§åˆ«</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>debug</td><td>æœ‰è°ƒè¯•ä¿¡æ¯çš„ï¼Œæ—¥å¿—é€šä¿¡æœ€å¤š</td></tr><tr><td>info</td><td>ä¸€èˆ¬ä¿¡æ¯æ—¥å¿—ï¼Œæœ€å¸¸ç”¨</td></tr><tr><td>notice</td><td>æœ€å…·æœ‰é‡è¦æ€§çš„æ™®é€šæ¡ä»¶çš„ä¿¡æ¯</td></tr><tr><td>warning</td><td>è­¦å‘Šçº§åˆ«</td></tr><tr><td>err</td><td>é”™è¯¯çº§åˆ«é˜»æ­¢æŸä¸ªåŠŸèƒ½æˆ–è€…æ¨¡å—ä¸èƒ½æ­£å¸¸å·¥ä½œçš„ä¿¡æ¯</td></tr><tr><td>crit</td><td>ä¸¥é‡çº§åˆ«ï¼Œé˜»æ­¢æ•´ä¸ªç³»ç»Ÿæˆ–è€…æ•´ä¸ªè½¯ä»¶ä¸èƒ½æ­£å¸¸å·¥ä½œçš„ä¿¡æ¯</td></tr><tr><td>alert</td><td>éœ€è¦ç«‹åˆ»ä¿®æ”¹çš„ä¿¡æ¯</td></tr><tr><td>emerg</td><td>å†…æ ¸å´©æºƒç­‰é‡è¦ä¿¡æ¯</td></tr><tr><td>none</td><td>ä»€ä¹ˆéƒ½ä¸è®°å½•</td></tr></tbody></table><p><strong>æ³¨æ„:ä»ä¸Šåˆ°ä¸‹ï¼Œçº§åˆ«ä»ä½åˆ°é«˜ï¼Œè®°å½•ä¿¡æ¯è¶Šæ¥è¶Šå°‘</strong></p><p>çœ‹å›¾åˆ†äº«ï¼šçº¢è‰²ç®­å¤´è¡¨ç¤ºé‚®ä»¶çš„æ‰€æœ‰è®°å½•éƒ½è®°å½•åˆ°æ—¥å¿—æ–‡ä»¶ä¸­</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240912130043684.png" class title="image-20240912130043684"></blockquote><p>2.æ—¥å¿—æ–‡ä»¶ä¸­çš„å†…å®¹æ ¼å¼</p><blockquote><p>ç”±æ—¥å¿—æœåŠ¡ rsyslogd è®°å½•çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ—¥å¿—æ–‡ä»¶çš„æ ¼å¼åŒ…å«ä»¥ä¸‹4åˆ—:</p><ul><li>1.äº‹ä»¶äº§ç”Ÿçš„æ—¶é—´</li><li>2.äº§ç”Ÿäº‹ä»¶çš„æœåŠ¡å™¨çš„ä¸»æœºå</li><li>3.äº§ç”Ÿäº‹ä»¶çš„æœåŠ¡åæˆ–ç¨‹åºå</li><li>4.äº‹ä»¶çš„å…·ä½“ä¿¡æ¯</li></ul><p>æ—¥å¿—å¦‚ä½•æŸ¥çœ‹å®ä¾‹</p><ul><li>æŸ¥çœ‹ä¸€ä¸‹ &#x2F;var&#x2F;log&#x2F;secure æ—¥å¿—ï¼Œè¿™ä¸ªæ—¥å¿—ä¸­è®°å½•çš„æ˜¯ç”¨æˆ·éªŒè¯å’Œæˆæƒæ–¹é¢çš„ä¿¡æ¯ æ¥åˆ†æå¦‚ä½•æŸ»</li><li><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240912132954554.png" class title="image-20240912132954554"></li></ul></blockquote><h2 id="4-è‡ªå®šä¹‰æ—¥å¿—æœåŠ¡"><a href="#4-è‡ªå®šä¹‰æ—¥å¿—æœåŠ¡" class="headerlink" title="4.è‡ªå®šä¹‰æ—¥å¿—æœåŠ¡"></a>4.è‡ªå®šä¹‰æ—¥å¿—æœåŠ¡</h2><blockquote><p>1.æ—¥å¿—ç®¡ç†æœåŠ¡åº”ç”¨å®ä¾‹</p><blockquote><p>åœ¨<code>/etc/rsyslog.conf</code> ä¸­æ·»åŠ ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶<code>/var/log/hsp.log</code>ï¼Œå½“æœ‰äº‹ä»¶å‘é€æ—¶(æ¯”å¦‚sshdæœåŠ¡ç›¸å…³äº‹ä»¶)ï¼Œè¯¥æ–‡ä»¶ä¼šæ¥æ”¶åˆ°ä¿¡æ¯å¹¶ä¿å­˜:ç»™å°ä¼™ä¼´æ¼”ç¤º ï¼Œè­¦é‡ çš„æƒ…å†µï¼Œçœ‹çœ‹æ˜¯å¦æœ‰æ—¥å¿—ä¿å­˜</p></blockquote><p>2.æ­¥éª¤ï¼š</p><ul><li>1.<code>vim /etc/rsyslog.conf</code><ul><li><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240912133423680.png" class title="image-20240912133423680"></li></ul></li><li>2.åˆ›å»ºæ–‡ä»¶ <code>&gt; /var/log/hsp.log</code></li><li>3.é‡å¯ <code>reboot</code></li></ul></blockquote><h2 id="5-æ—¥å¿—è½®æ›¿"><a href="#5-æ—¥å¿—è½®æ›¿" class="headerlink" title="5.æ—¥å¿—è½®æ›¿"></a>5.æ—¥å¿—è½®æ›¿</h2><p>åŸºæœ¬ä»‹ç»</p><blockquote><p>1.åŸºæœ¬ä»‹ç»</p><blockquote><p>æ—¥å¿—è½®æ›¿å°±æ˜¯æŠŠæ—§çš„æ—¥å¿—æ–‡ä»¶ç§»åŠ¨å¹¶æ”¹åï¼ŒåŒæ—¶å»ºç«‹æ–°çš„ç©ºæ—¥å¿—æ–‡ä»¶ï¼Œå½“æ—§æ—¥å¿—æ–‡ä»¶è¶…å‡ºä¿å­˜çš„èŒƒå›´ä¹‹åå°±ä¼šè¿›è¡Œåˆ é™¤</p></blockquote><p>2.æ—¥å¿—è½®æ›¿æ–‡ä»¶å‘½å</p><ul><li><p>centos7ä½¿ç”¨logrotateè¿›è¡Œæ—¥å¿—è½®æ›¿ç®¡ç†ï¼Œè¦æƒ³æ”¹å˜æ—¥å¿—è½®æ›¿æ–‡ä»¶åå­—ï¼Œé€šè¿‡ <code>/etc/logrotate.conf </code>é…ç½®æ–‡ä»¶ä¸­<code>dateext</code>å‚æ•°:</p><ul><li><p>å¦‚æœé…ç½®æ–‡ä»¶ä¸­æœ‰<code>dateext</code>å‚æ•°ï¼Œé‚£ä¹ˆæ—¥å¿—ä¼šç”¨æ—¥æœŸæ¥ä½œä¸ºæ—¥å¿—æ–‡ä»¶çš„åç¼€ï¼Œä¾‹å¦‚<code>secure-20201010</code>ã€‚è¿™æ ·æ—¥å¿—æ–‡ä»¶åä¸ä¼šé‡å ï¼Œä¹Ÿå°±ä¸éœ€è¦æ—¥å¿—æ–‡ä»¶çš„æ”¹åï¼Œåªéœ€è¦æŒ‡å®šä¿å­˜æ—¥å¿—ä¸ªæ•°ï¼Œåˆ é™¤å¤šä½™çš„æ—¥å¿—æ–‡ä»¶å³å¯ã€‚</p></li><li><p>å¦‚æœé…ç½®æ–‡ä»¶ä¸­æ²¡æœ‰<code>dateext</code>å‚æ•°ï¼Œæ—¥å¿—æ–‡ä»¶å°±éœ€è¦è¿›è¡Œæ”¹åäº†ã€‚<strong>å½“ç¬¬ä¸€æ¬¡è¿›è¡Œæ—¥å¿—è½®æ›¿æ—¶ï¼Œå½“å‰çš„â€œsecureæ—¥å¿—ä¼šè‡ªåŠ¨æ”¹secure.1ï¼Œç„¶åä¼šæ–°å»ºâ€œsecureâ€æ—¥å¿—ï¼Œç”¨æ¥ä¿å­˜æ–°çš„æ—¥å¿—ã€‚</strong>å½“ç¬¬äºŒæ¬¡è¿›è¡Œæ—¥å¿—è½®æ›¿æ—¶ï¼Œ<code>secure.1</code>ä¼šè‡ªåŠ¨æ”¹åä¸º<code>secure.2</code>ï¼Œå½“å‰çš„<code>secure</code>æ—¥å¿—ä¼šè‡ªåŠ¨æ”¹åä¸º<code>secure.1</code>ï¼Œç„¶åä¹Ÿä¼šæ–°å»ºâ€œsecureâ€æ—¥å¿—ï¼Œç”¨æ¥ä¿å­˜æ–°çš„æ—¥å¿—ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><ul><li>è§£é‡Šï¼š <code>/etc/logrotate.conf </code>é…ç½®æ–‡ä»¶æ˜¯ï¼š<strong>å…¨å±€çš„æ—¥å¿—è½®æ›¿ç­–ç•¥é…ç½®æ–‡ä»¶ï¼Œå½“ç„¶å¯ä»¥å•ç‹¬ç»™æŸä¸ªæ—¥å¿—æ–‡ä»¶æŒ‡å®šç­–ç•¥</strong></li></ul></li></ul></li></ul></blockquote><p>logrotateé…ç½®æ–‡ä»¶</p><blockquote><p>logrotate é…ç½®æ–‡ä»¶</p><p>&#x2F;etc&#x2F;logrotate.confä¸ºlogrotateçš„å…¨å±€é…ç½®æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">see <span class="hljs-string">&quot;man logrotate&quot;</span> <span class="hljs-keyword">for</span> details</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">rotate <span class="hljs-built_in">log</span> files weekly , æ¯å‘¨å¯¹æ—¥å¿—æ–‡ä»¶è¿›è¡Œä¸€æ¬¡è½®æ›¿</span><br>weekly<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">keep 4 weeks worth of backlogs ,å…±ä¿å­˜4ä»½æ—¥å¿—æ–‡ä»¶ï¼Œå½“å»ºç«‹æ–°çš„æ—¥å¿—æ–‡ä»¶æ—¶ï¼Œæ—§çš„å°†ä¼šè¢«åˆ é™¤</span><br>rotate 4<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">create new (empty) <span class="hljs-built_in">log</span> files after rotating old ones,åˆ›å»ºæ–°çš„ç©ºçš„æ—¥å¿—æ–‡ä»¶ï¼Œåœ¨æ—¥å¿—è½®æ›¿å</span><br>create<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">use <span class="hljs-built_in">date</span> as a suffix of the rotated file,ä½¿ç”¨æ—¥æœŸä½œä¸ºæ—¥å¿—è½®æ›¿æ–‡ä»¶çš„åç¼€</span><br>dateext<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">uncomment this <span class="hljs-keyword">if</span> you want your <span class="hljs-built_in">log</span> files compressed ,æ—¥å¿—æ–‡ä»¶æ˜¯å¦å‹ç¼©ï¼Œå¦‚æœå–æ¶ˆæ³¨é‡Šï¼Œåˆ™æ—¥å¿—ä¼šåœ¨è½¬å‚¨çš„åŒæ—¶è¿›è¡Œå‹ç¼©</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">compress</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">RPM packages drop <span class="hljs-built_in">log</span> rotation information into this directory</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">åŒ…å« /etc/logrotate.d/ ç›®å½•ä¸­æ‰€æœ‰çš„å­é…ç½®æ–‡ä»¶ã€‚ä¹Ÿå°±, æ˜¯è¯´ä¼šæŠŠè¿™ä¸ªç›®å½•ä¸­æ‰€æœ‰å­é…ç½®æ–‡ä»¶è¯»å–è¿›æ¥</span><br>include /etc/logrotate.d<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ä¸‹é¢æ˜¯å•ç‹¬è®¾ç½®ï¼Œä¼˜å…ˆçº§æ›´é«˜</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">no packages own wtmp and btmp -- we<span class="hljs-string">&#x27;ll rotate them here</span></span><br>/var/log/wtmp &#123;<br>    monthly #æ¯æœˆå¯¹æ—¥å¿—æ–‡ä»¶è¿›è¡Œä¸€æ¬¡è½®æ›¿<br>    create 0664 root utmp #å»ºç«‹çš„æ–°æ—¥å¿—æ–‡ä»¶ï¼Œæƒé™æ˜¯0664ï¼Œæ‰€æœ‰è€…æ˜¯rootï¼Œæ‰€å±ç»„æ˜¯ utmp ç»„<br>    minsize 1M  #æ—¥å¿—æ–‡ä»¶æœ€å°è½®æ›¿å¤§å°æ˜¯ 1MBã€‚ä¹Ÿå°±æ˜¯æ—¥å¿—ä¸€å®šè¦è¶…è¿‡ 1MB3 æ‰ä¼šè½®æ›¿ï¼Œå¦åˆ™å°±ç®—æ—¶é—´è¾¾åˆ°ä¸€ä¸ªæœˆï¼Œä¹Ÿä¸è¿›è¡Œæ—¥å¿—è½¬å‚¨<br>    rotate 1 #ä»…ä¿ç•™ä¸€ä¸ªæ—¥å¿—å¤‡ä»½ã€‚ä¹Ÿå°±æ˜¯åªæœ‰wtmpå’Œwtmp.1æ—¥å¿—ä¿ç•™è€Œå·²<br>&#125;<br><br>/var/log/btmp &#123;<br>    missingok #å¦‚æœæ—¥å¿—ä¸å­˜åœ¨ï¼Œåˆ™å¿½è·¯è¯¥æ—¥å¿—çš„è­¦å‘Šä¿¡æ¯<br>    monthly<br>create 0600 root utmp<br>    rotate 1<br>&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-string">system-specific logs may be also be configured here.</span></span><br><br><br><br></code></pre></td></tr></table></figure></blockquote><p>6.æ—¥å¿—è½®æ›¿çš„å‚æ•°è¯´æ˜</p><blockquote><p>logrotateé…ç½®æ–‡ä»¶å‚æ•°è¯´æ˜<br>å‚æ•°è¯´æ˜</p><table><thead><tr><th>å‚ æ•°</th><th>å‚æ•°è¯´æ˜</th></tr></thead><tbody><tr><td>daily</td><td>æ—¥å¿—çš„è½®æ›¿å‘¨æœŸæ˜¯æ¯å¤©</td></tr><tr><td>weekly</td><td>æ—¥å¿—çš„è½®æ›¿å‘¨æœŸæ˜¯æ¯å‘¨</td></tr><tr><td>monthly</td><td>æ—¥å¿—çš„è½®æ›¿å‘¨æœŸæ˜¯æ¯æœˆ</td></tr><tr><td>rotate æ•°å­—</td><td>ä¿ç•™çš„æ—¥å¿—æ–‡ä»¶çš„ä¸ªæ•°ã€‚0æŒ‡æ²¡æœ‰å¤‡ä»½</td></tr><tr><td>compress</td><td>æ—¥å¿—è½®æ›¿æ—¶ï¼Œæ—§çš„æ—¥å¿—è¿›è¡Œå‹ç¼©</td></tr><tr><td>create mode owner group</td><td>å»ºç«‹æ–°æ—¥å¿—ï¼ŒåŒæ—¶æŒ‡å®šæ–°æ—¥å¿—çš„æƒé™ä¸æ‰€æœ‰è€…å’Œæ‰€å±ç»„</td></tr><tr><td>mail address</td><td>å½“æ—¥å¿—è½®æ›¿æ—¶ï¼Œè¾“å‡ºå†…å®¹é€šè¿‡é‚®ä»¶å‘é€åˆ°æŒ‡å®šçš„é‚®ä»¶åœ°å€ã€‚</td></tr><tr><td>missingok</td><td>å¦‚æœæ—¥å¿—ä¸å­˜åœ¨ï¼Œåˆ™å¿½ç•¥è¯¥æ—¥å¿—çš„è­¦å‘Šä¿¡æ¯</td></tr><tr><td>notifempty</td><td>å¦‚æœæ—¥å¿—ä¸ºç©ºæ–‡ä»¶ï¼Œåˆ™ä¸è¿›è¡Œæ—¥å¿—è½®æ›¿</td></tr><tr><td>minsize å¤§å°</td><td>æ—¥å¿—è½®æ›¿çš„æœ€å°å€¼ã€‚ä¹Ÿå°±æ˜¯æ—¥å¿—ä¸€å®šè¦è¾¾åˆ°è¿™ä¸ªæœ€å°å€¼æ‰ä¼šè½®æ›¿ï¼Œå¦åˆ™å°±ç®—æ—¶é—´è¾¾åˆ°ä¹Ÿä¸è½®æ›¿</td></tr><tr><td>size å¤§å°</td><td>æ—¥å¿—åªæœ‰å¤§äºæŒ‡å®šå¤§å°æ‰è¿›è¡Œæ—¥å¿—è½®æ›¿ï¼Œè€Œä¸æ˜¯æŒ‰ç…§æ—¶é—´è½®æ›¿ã€‚</td></tr><tr><td>dateext</td><td>ä½¿ç”¨æ—¥æœŸä½œä¸ºæ—¥å¿—è½®æ›¿æ–‡ä»¶çš„åç¼€ã€‚</td></tr><tr><td>sharedscripts</td><td>åœ¨æ­¤å…³é”®å­—ä¹‹åçš„è„šæœ¬åªæ‰§è¡Œä¸€æ¬¡ã€‚</td></tr><tr><td>prerotate&#x2F;endscript</td><td>åœ¨æ—¥å¿—è½®æ›¿ä¹‹å‰æ‰§è¡Œè„šæœ¬å‘½ä»¤ã€‚</td></tr><tr><td>postrotate&#x2F;endscript</td><td>åœ¨æ—¥å¿—è½®æ›¿ä¹‹åæ‰§è¡Œè„šæœ¬å‘½ä»¤ã€‚</td></tr></tbody></table></blockquote><p>æ¡ˆä¾‹ï¼š</p><blockquote><p>æŠŠè‡ªå·±çš„æ—¥å¿—åŠ å…¥æ—¥å¿—è½®æ›¿</p><ul><li><p>ç¬¬ä¸€ç§æ–¹æ³•æ˜¯ç›´æ¥åœ¨&#x2F;etc&#x2F;logrotate.conf é…ç½®æ–‡ä»¶ä¸­å†™å…¥è¯¥æ—¥å¿—çš„è½®æ›¿ç­–ç•¥</p></li><li><p>ç¬¬äºŒç§æ–¹æ³•æ˜¯åœ¨&#x2F;etc&#x2F;logrotate.d&#x2F;ç›®å½•ä¸­æ–°å»ºç«‹è¯¥æ—¥å¿—çš„è½®æ›¿æ–‡ä»¶ï¼Œåœ¨è¯¥è½®æ›¿æ–‡ä»¶ä¸­å†™å…¥æ­£ç¡®çš„è½®æ›¿ç­–ç•¥ï¼Œå› ä¸ºè¯¥ç›®å½•ä¸­çš„æ–‡ä»¶éƒ½ä¼šè¢«â€œincludeâ€åˆ°ä¸»é…ç½®æ–‡ä»¶ä¸­ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥æŠŠæ—¥å¿—åŠ å…¥è½®æ›¿ã€‚</p></li></ul><blockquote><p><strong>æ¨èä½¿ç”¨ç¬¬äºŒç§æ–¹æ³•ï¼Œå› ä¸ºç³»ç»Ÿä¸­éœ€è¦è½®æ›¿çš„æ—¥å¿—éå¸¸å¤šï¼Œå¦‚æœå…¨éƒ½ç›´æ¥å†™ å…¥&#x2F;etc&#x2F;logrotate.conf é…ç½®æ–‡ä»¶é‚£ä¹ˆè¿™ä¸ªæ–‡ä»¶çš„å¯ç®¡ç†æ€§å°±ä¼šéå¸¸å·®ï¼Œä¸åˆ©äºæ­¤æ–‡ä»¶çš„ç»´æŠ¤ã€‚</strong></p></blockquote><p>åœ¨&#x2F;etc&#x2F;logrotate.d&#x2F; é…ç½®è½®æ›¿æ–‡ä»¶ä¸€è§ˆ</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240912141202444.png" class title="image-20240912141202444"><p>æ¡ˆä¾‹æ“ä½œæµç¨‹</p><p>çœ‹ä¸€ä¸ªæ¡ˆä¾‹,åœ¨<code>/etc/logrotate.conf </code>è¿›è¡Œé…ç½®,æˆ–è€…ç›´æ¥åœ¨ <code>/etc/logrotate.d/</code>ä¸‹åˆ›å»ºæ–‡ä»¶<code>hsplog</code>ç¼–å†™å¦‚<br>ä¸‹å†…å®¹ï¼Œå…·ä½“è½®æ›¿çš„æ•ˆæœ å¯ä»¥å‚è€ƒ <code>/var/log </code>ä¸‹çš„<code>boot.log</code>æƒ…å†µ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">/var/log/hsp.log &#123;<br>    missingok #å¦‚æœæ—¥å¿—ä¸å­˜åœ¨ï¼Œåˆ™å¿½è·¯è¯¥æ—¥å¿—çš„è­¦å‘Šä¿¡æ¯<br>    daily<br>copytruncate #copyæ›¿æ¢<br>    rotate 7<br>    notifempty  #æ–‡ä»¶ç©ºçš„ä¸è½®æ›¿<br>&#125;<br></code></pre></td></tr></table></figure><p>æœ€ç»ˆä¼šå¦‚ä¸‹æ˜¾ç¤ºæ¨¡æ¿</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240912141524512.png" class title="image-20240912141524512"></blockquote><h2 id="6-æ—¥å¿—è½®æ›¿æœºåˆ¶"><a href="#6-æ—¥å¿—è½®æ›¿æœºåˆ¶" class="headerlink" title="6.æ—¥å¿—è½®æ›¿æœºåˆ¶"></a>6.æ—¥å¿—è½®æ›¿æœºåˆ¶</h2><blockquote><p>æ—¥å¿—è½®æ›¿æœºåˆ¶åŸç†</p><blockquote><p>æ—¥å¿—è½®æ›¿ä¹‹æ‰€ä»¥å¯ä»¥åœ¨æŒ‡å®šçš„æ—¶é—´å¤‡ä»½æ—¥å¿—ï¼Œæ˜¯ä¾èµ–ç³»ç»Ÿå®šæ—¶ä»»åŠ¡ã€‚åœ¨<code>/etc/cron.daily/</code>ç›®å½•ï¼Œå°±ä¼šå‘ç°è¿™ä¸ªç›®å½•ä¸­æ˜¯æœ‰<code>logrotate </code>æ–‡ä»¶(å¯æ‰§è¡Œ)ï¼Œ<code>logrotate</code> é€šè¿‡è¿™ä¸ªæ–‡ä»¶ä¾èµ–å®šæ—¶ä»»åŠ¡æ‰§è¡Œçš„ã€‚</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240912141853558.png" class title="image-20240912141853558"></blockquote><p>æ•´ä½“è®²è§£å›¾</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240912142231959.png" class title="image-20240912142231959"></blockquote><h2 id="7-æŸ¥çœ‹å†…å­˜æ—¥å¿—"><a href="#7-æŸ¥çœ‹å†…å­˜æ—¥å¿—" class="headerlink" title="7.æŸ¥çœ‹å†…å­˜æ—¥å¿—"></a>7.æŸ¥çœ‹å†…å­˜æ—¥å¿—</h2><blockquote><p>ç‰¹ç‚¹ï¼šé‡å¯åå†…å­˜æ—¥å¿—æ¸…ç©º</p></blockquote><blockquote><p>journalctl å¯ä»¥æŸ¥çœ‹å†…å­˜æ—¥å¿—,è¿™é‡Œæˆ‘ä»¬çœ‹çœ‹å¸¸ç”¨çš„æŒ‡ä»¤</p><ul><li><code>journalctl</code>##æŸ¥çœ‹å…¨éƒ¨</li><li><code>journalctl -n 3 </code>   ##æŸ¥çœ‹æœ€æ–°3æ¡</li><li><code>journalctl --since 19:00 --until 19:10:10 </code>#æŸ¥çœ‹èµ·å§‹æ—¶é—´åˆ°ç»“æŸæ—¶é—´çš„æ—¥å¿—å¯åŠ æ—¥æœŸ</li><li><code>journalctl -p err</code> ##æŠ¥é”™æ—¥å¿—</li><li><code>journalctl -o verbose</code> ##æ—¥å¿—è¯¦ç»†å†…å®¹</li><li><code>journalctl PID=1245 _COMM=sshd</code> ##æŸ¥çœ‹åŒ…å«è¿™äº›å‚æ•°çš„æ—¥å¿—(åœ¨è¯¦ç»†æ—¥å¿—æŸ¥çœ‹)æˆ–è€…<code>journalctl | grep sshd</code></li></ul><p><strong>æ³¨æ„:<code>journalctl</code>æŸ¥çœ‹çš„æ˜¯å†…å­˜æ—¥å¿—ï¼Œé‡å¯æ¸…ç©º</strong></p><p>æ¼”ç¤ºæ¡ˆä¾‹:</p><ul><li>ä½¿ç”¨<code>journalctl | grep sshd </code>æ¥çœ‹çœ‹ç”¨æˆ·ç™»å½•æ¸…ç©ºï¼Œ<strong>é‡å¯ç³»ç»Ÿ</strong>ï¼Œå†æ¬¡æŸ¥è¯¢,çœ‹çœ‹æ—¥å¿—æœ‰ä»€ä¹ˆå˜åŒ–æ²¡æœ‰</li></ul></blockquote><h1 id="å®šåˆ¶è‡ªå·±çš„Linux"><a href="#å®šåˆ¶è‡ªå·±çš„Linux" class="headerlink" title="å®šåˆ¶è‡ªå·±çš„Linux"></a>å®šåˆ¶è‡ªå·±çš„Linux</h1><h2 id="1-åŸºæœ¬åŸç†"><a href="#1-åŸºæœ¬åŸç†" class="headerlink" title="1.åŸºæœ¬åŸç†"></a>1.åŸºæœ¬åŸç†</h2><blockquote><p>å¯åŠ¨æµç¨‹ä»‹ç»:</p><p>åˆ¶ä½œLinuxå°ç³»ç»Ÿä¹‹å‰ï¼Œå†äº†è§£-ä¸‹Linuxçš„å¯åŠ¨æµç¨‹:</p><ul><li><p>1.é¦–å…ˆLinuxè¦é€šè¿‡è‡ªæ£€ï¼Œæ£€æŸ¥ç¡¬ä»¶è®¾å¤‡æœ‰æ²¡æœ‰æ•…éšœ</p></li><li><p>2.å¦‚æœæœ‰å¤šå—å¯åŠ¨ç›˜çš„è¯ï¼Œéœ€è¦åœ¨BIOSä¸­é€‰æ‹©å¯åŠ¨ç£ç›˜</p></li><li><p>3.å¯åŠ¨MBRä¸­çš„bootloaderå¼•å¯¼ç¨‹åº</p></li><li><p>4.åŠ è½½å†…æ ¸æ–‡ä»¶</p></li><li><p>5.æ‰§è¡Œæ‰€æœ‰è¿›ç¨‹çš„çˆ¶è¿›ç¨‹ã€è€ç¥–å®—systemd</p></li><li><p>6.æ¬¢è¿ç•Œé¢</p></li></ul><p>åœ¨Linuxçš„å¯åŠ¨æµç¨‹ä¸­ï¼ŒåŠ è½½å†…æ ¸æ–‡ä»¶æ—¶å…³é”®æ–‡ä»¶</p><ul><li><p>1)kernelæ–‡ä»¶:vmlinuz-3.10.0-957.el7.x86 64</p></li><li><p>2 )initrdæ–‡ä»¶: initramfs-3.10.0-957.el7.x86 64.img</p></li></ul></blockquote><h2 id="2-åˆ¶å®šmin-Linuxæ€è·¯åˆ†æ"><a href="#2-åˆ¶å®šmin-Linuxæ€è·¯åˆ†æ" class="headerlink" title="2.åˆ¶å®šmin Linuxæ€è·¯åˆ†æ"></a>2.åˆ¶å®šmin Linuxæ€è·¯åˆ†æ</h2><blockquote><blockquote><p>1.åœ¨ç°æœ‰çš„Linuxç³»ç»Ÿ(centos7.6)ä¸ŠåŠ ä¸€å—ç¡¬ç›˜&#x2F;dev&#x2F;sdbï¼Œåœ¨ç¡¬ç›˜ä¸Šåˆ†ä¸¤ä¸ªåˆ†åŒºï¼Œä¸€ä¸ªæ˜¯&#x2F;bootï¼Œä¸€ä¸ªæ˜¯&#x2F;ï¼Œå¹¶å°†å…¶æ ¼å¼åŒ–ã€‚éœ€è¦æ˜ç¡®çš„æ˜¯ï¼Œç°åœ¨åŠ çš„è¿™ä¸ªç¡¬ç›˜åœ¨ç°æœ‰çš„Linuxç³»ç»Ÿä¸­æ˜¯&#x2F;dev&#x2F;sdbï¼Œä½†æ˜¯ï¼Œå½“æˆ‘ä»¬æŠŠä¸œè¥¿å…¨éƒ¨è®¾ç½®å¥½æ—¶ï¼Œè¦æŠŠè¿™ä¸ªç¡¬ç›˜æ‹”é™¤ï¼Œæ”¾åœ¨æ–°ç³»ç»Ÿä¸Šï¼Œæ­¤æ—¶ï¼Œå°±æ˜¯&#x2F;dev&#x2F;sda</p></blockquote><blockquote><p>2.åœ¨&#x2F;dev&#x2F;sdbç¡¬ç›˜ä¸Šï¼Œå°†å…¶æ‰“é€ æˆç‹¬ç«‹çš„Linuxç³»ç»Ÿï¼Œé‡Œé¢çš„æ‰€æœ‰æ–‡ä»¶æ˜¯éœ€è¦æ‹·è´è¿›å»çš„</p></blockquote><blockquote><p>3.ä½œä¸ºèƒ½ç‹¬ç«‹è¿è¡Œçš„Linuxç³»ç»Ÿï¼Œå†…æ ¸æ˜¯ä¸€å®šä¸èƒ½å°‘ï¼Œè¦æŠŠå†…æ ¸æ–‡ä»¶å’Œinitramfsæ–‡ä»¶ä¹Ÿä¸€èµ·æ‹·åˆ°&#x2F;dev&#x2F;sdbä¸Š</p></blockquote><blockquote><p>4.ä»¥ä¸Šæ­¥éª¤å®Œæˆï¼Œæˆ‘ä»¬çš„è‡ªåˆ¶Linuxå°±å®Œæˆ,åˆ›å»ºä¸€ä¸ªæ–°çš„linuxè™šæ‹Ÿæœºï¼Œå°†å…¶ç¡¬ç›˜æŒ‡å‘æˆ‘ä»¬åˆ›å»ºçš„ç¡¬ç›˜ï¼Œå¯åŠ¨å³å¯</p></blockquote><p>åŸç†å›¾ï¼ˆæ€»ä¹‹å°±æ˜¯sdaçš„ä¸œè¥¿æ‹·è´åˆ°sdbä¸­ ï¼Œsdbåˆ™å°±æ˜¯å°å‹çš„linuxï¼‰</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240912144448180.png" class title="image-20240912144448180"></blockquote><h2 id="æ­¥éª¤ï¼š"><a href="#æ­¥éª¤ï¼š" class="headerlink" title="æ­¥éª¤ï¼š"></a>æ­¥éª¤ï¼š</h2><h3 id="1"><a href="#1" class="headerlink" title="1."></a>1.</h3><p>é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨ç°æœ‰çš„linuxæ·»åŠ ä¸€å—å¤§å°ä¸º20gçš„ç¡¬ç›˜</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240912144701955.png" class title="image-20240912144701955"><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240912144801109.png" class title="image-20240912144801109"><h3 id="2"><a href="#2" class="headerlink" title="2."></a>2.</h3><p>æ·»åŠ å®Œæˆåï¼Œç‚¹å‡»ç¡®å®šï¼Œç„¶åå¯åŠ¨ç°æœ‰çš„linux(centos7.6)ã€‚é€šè¿‡<code>fdisk</code>æ¥ç»™æˆ‘ä»¬çš„&#x2F;dev&#x2F;sdbè¿›è¡Œåˆ†åŒº</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">å…ˆçœ‹çœ‹ç¡¬ç›˜ï¼Œå‘ç°sdbæ²¡æœ‰åˆ†åŒºå’Œæ ¼å¼åŒ–ä¹Ÿæ²¡æœ‰æŒ‚è½½</span><br>lsblk<br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ ¼å¼åŒ–ç¡¬ç›˜</span><br>fdisk /dev/sdb<br>n<br>p<br>å›è½¦<br>+500M<br>n<br>p<br>å›è½¦<br>å›è½¦<br>w<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">å…ˆçœ‹çœ‹ç¡¬ç›˜ï¼Œå‘ç°sdbåˆ†åŒºäº†</span><br>lsblk<br></code></pre></td></tr></table></figure><h3 id="3"><a href="#3" class="headerlink" title="3."></a>3.</h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬å¯¹&#x2F;dev&#x2F;sdbçš„åˆ†åŒºè¿›è¡Œæ ¼å¼åŒ–</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">mkfs.ext4 /dev/sdb1<br>mkfs.ext4 /dev/sdb2<br></code></pre></td></tr></table></figure><h3 id="4"><a href="#4" class="headerlink" title="4."></a>4.</h3><p>åˆ›å»ºç›®å½•ï¼Œå¹¶æŒ‚è½½æ–°çš„ç£ç›˜</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">mkdir -p /mnt/boot /mnt/sysroot<br>mount /dev/sdb1 /mnt/boot<br>mount /dev/sdb2 /mnt/sysroot<br><br></code></pre></td></tr></table></figure><h3 id="5"><a href="#5" class="headerlink" title="5."></a>5.</h3><p>å®‰è£…grub,å†…æ ¸æ–‡ä»¶æ‹·è´è‡³ç›®æ ‡ç£ç›˜ï¼ˆcentos7.6å®‰è£…çš„æ˜¯grub2ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">grub2-install --root-directory=/mnt/dev/sdb<br><span class="hljs-meta prompt_">#</span><span class="language-bash">æˆ‘ä»¬å¯ä»¥æ¥çœ‹ä¸€ä¸‹äºŒè¿›åˆ¶ç¡®è®¤æˆ‘ä»¬æ˜¯å¦å®‰è£…æˆåŠŸ</span><br>hexdump -C -n 512 /dev/sdb<br>cp -rf /boot/* /mnt/boot/<br></code></pre></td></tr></table></figure><h3 id="6"><a href="#6" class="headerlink" title="6."></a>6.</h3><p>ä¿®æ”¹grub2&#x2F;grub.cfg æ–‡ä»¶ï¼Œæ ‡çº¢çš„éƒ¨åˆ† æ˜¯éœ€è¦ä½¿ç”¨çš„ æŒ‡ä»¤æ¥æŸ¥çœ‹ (æœ€éº»çƒ¦çš„)</p><blockquote><p>è¿™ä¸ªæ–‡ä»¶æ˜¯ç”¨æ¥æŒ‡å®šé‚£ä¸ªç›˜æ˜¯å¯åŠ¨ç›˜ï¼Œé‚£ä¸ªæ˜¯æ ¹ç›®å½•ç›˜</p></blockquote><p>1.å…ˆæŸ¥çœ‹åˆ†åŒºçš„uuidï¼Œä¸€ä¼šåœ¨grub.cfgè¦ç”¨</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240912150642488.png" class title="image-20240912150642488"><p>2.åœ¨ gmnub.cæ–‡ä»¶ä¸­ ,çº¢è‰²éƒ¨åˆ†ç”¨ ä¸Šé¢ sdb1 çš„ UUID æ›¿æ¢ï¼Œè“è‰²éƒ¨åˆ†ç”¨ sdb2çš„ UUID æ¥æ›¿æ¢ï¼Œç´«è‰²éƒ¨åˆ†æ˜¯æ·»åŠ çš„ï¼Œè¡¨ç¤ºselinux ç»™å…³æ‰ï¼ŒåŒæ—¶è®¾å®šä¸€ä¸‹ initï¼Œå‘Šè¯‰å†…æ ¸ä¸è¦å†å»æ‰¾è¿™ä¸ªç¨‹åºäº†ï¼Œä¸ç„¶å¼€æœºçš„æ—¶å€™ä¼šå‡ºç°é”™è¯¯çš„</p><p>æ“ä½œï¼šè¿›å…¥gurb.cfgæ–‡ä»¶ï¼ŒæŒ‰ç…§ä¸Šé¢ä¿®æ”¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd /mnt/boot<br>cd grub2<br>vim grub.cfg<br><br></code></pre></td></tr></table></figure><blockquote><p>1.ä¿®æ”¹uuid  </p></blockquote><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240912151220960.png" class title="image-20240912151220960"><p>ç¬¬äºŒå¤„</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240912151554988.png" class title="image-20240912151554988"><blockquote><p>2.åŠ ä¸€å¥è¯</p></blockquote><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240912151459728.png" class title="image-20240912151459728"><p>ç¬¬äºŒå¤„</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240912151635175.png" class title="image-20240912151635175"><h3 id="7"><a href="#7" class="headerlink" title="7."></a>7.</h3><p>åˆ›å»ºç›®æ ‡ä¸»æœºæ ¹æ–‡ä»¶ç³»ç»Ÿ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">mkdir -pv /mnt/sysroot/&#123;etc/rc.d,usr,var,proc,sys,dev,lib,lib64,bin,sbin,boot,srv,mnt,media,home,root&#125;<br></code></pre></td></tr></table></figure><h3 id="8"><a href="#8" class="headerlink" title="8."></a>8.</h3><p>æ‹·è´éœ€è¦çš„bash(ä¹Ÿå¯ä»¥æ‹·è´ä½ éœ€è¦çš„æŒ‡ä»¤)å’Œåº“æ–‡ä»¶ç»™æ–°çš„ç³»ç»Ÿä½¿ç”¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">ä¸€äº›ä¾èµ–çš„åº“æ–‡ä»¶</span><br>cp /lib64/*.* /mnt/sysroot/lib64<br><span class="hljs-meta prompt_">#</span><span class="language-bash">bashæ–‡ä»¶ï¼Œä¸ç„¶ç³»ç»Ÿéƒ½è¿›ä¸å»  è¿™é‡ŒæŒ‡ä»¤åªæ‹·è´äº†bash ï¼Œ<span class="hljs-built_in">ls</span>éƒ½æ²¡æœ‰</span><br>cp /bin/bash /mnt/sysroot/bin/<br></code></pre></td></tr></table></figure><h3 id="9"><a href="#9" class="headerlink" title="9."></a>9.</h3><p>ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„è™šæ‹Ÿæœºï¼Œç„¶åå°†é»˜è®¤åˆ†é…çš„ç¡¬ç›˜ ç§»é™¤æ‰ï¼ŒæŒ‡å‘æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„ç£ç›˜å³å¯.</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240912152513638.png" class title="image-20240912152513638"><h3 id="10"><a href="#10" class="headerlink" title="10."></a>10.</h3><p>è¿™æ—¶ï¼Œå¾ˆå¤šæŒ‡ä»¤éƒ½ä¸èƒ½ä½¿ç”¨ï¼Œæ¯”å¦‚ ls,reboot ç­‰ï¼Œå¯ä»¥å°†éœ€è¦çš„æŒ‡ä»¤æ‹·è´åˆ°å¯¹åº”çš„ç›®å½•å³å¯</p><h3 id="11"><a href="#11" class="headerlink" title="11."></a>11.</h3><p>å¦‚æœè¦æ‹·è´æŒ‡ä»¤ï¼Œ<strong>é‡æ–°è¿›å…¥åˆ°åŸæ¥çš„ Linuxç³»ç»Ÿæ‹·è´ç›¸åº”çš„æŒ‡ä»¤å³å¯</strong>ï¼Œæ¯”å¦‚ï¼šå°† <code>/bin/ls </code>æ‹·è´åˆ° <code>/mnt/sysroot/bin</code> ï¼Œå°†<code>/sbin/reboot </code>æ‹·è´åˆ°<code>/mnt/sysroot/sbin</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">mount /dev/sdb2 /mnt/sysroot/<br>cp /bin/ls /mnt/sysroot/bin/<br>cp /bin/systemctl /mnt/sysroot/bin/<br>cp /sbin/reboot /mnt/sysroot/sbin/<br></code></pre></td></tr></table></figure><h3 id="12"><a href="#12" class="headerlink" title="12."></a>12.</h3><p>å†é‡æ–°å¯åŠ¨æ–°çš„ 1inuxç³»ç»Ÿï¼Œå°±å¯ä»¥ä½¿ç”¨<code>ls</code>ï¼Œ<code>reboot</code>æŒ‡ä»¤äº†</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">ä½¿ç”¨æ–¹å¼æ˜¯/bin/lsï¼Œå› ä¸ºæ²¡æœ‰ç¯å¢ƒ</span><br>/bin/ls /home<br></code></pre></td></tr></table></figure><h1 id="é˜…è¯»Linuxæºç "><a href="#é˜…è¯»Linuxæºç " class="headerlink" title="é˜…è¯»Linuxæºç "></a>é˜…è¯»Linuxæºç </h1><blockquote><p>é˜…è¯»linux0.01ç‰ˆçš„å†…æ ¸ï¼Œè¿˜è½»æ¾</p></blockquote><p>æºç ç›®å½•å±•ç¤º</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240913090148835-17261893102051.png" class title="image-20240913090148835"><p>minå‡½æ•°ä¸­æ–¹æ³•çš„è°ƒç”¨</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240913091249337.png" class title="image-20240913091249337"><h2 id="1-å†…æ ¸å‡çº§"><a href="#1-å†…æ ¸å‡çº§" class="headerlink" title="1.å†…æ ¸å‡çº§"></a>1.å†…æ ¸å‡çº§</h2><blockquote><p>å†…æ ¸åœ°å€ï¼š<a href="https://www.kernel.org/">https://www.kernel.org/</a> æŸ¥çœ‹</p></blockquote><p>å®ä¾‹ï¼š</p><p>ä¸‹è½½&amp;è§£å‹æœ€æ–°ç‰ˆï¼ˆ<strong>ä¸æ˜¯éšä¾¿å‡çº§çš„ï¼Œæœ‰å…¼å®¹é—®é¢˜</strong>ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">1.ä¸‹è½½</span><br>wget https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.8.16.tar.gz<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">2.è§£å‹</span><br>tar -zxvf linux-5.8.16.tar.gz<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">3.æŸ¥çœ‹å½“å‰çš„å†…æ ¸ç‰ˆæœ¬</span><br>uname -a <br><span class="hljs-meta prompt_">#</span><span class="language-bash">4.æŸ¥çœ‹ç³»ç»Ÿå†…æ ¸,æ˜¾ç¤ºå¯ä»¥å‡çº§çš„å†…æ ¸</span><br>yum info kernel -q<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">5.å‡çº§å†…æ ¸</span><br>yun update kernel <br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">6.æŸ¥çœ‹å·²ç»å®‰è£…çš„å†…æ ¸</span><br>yum list kernel -q<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">7.ç°åœ¨æŸ¥çœ‹å†…æ ¸ä¿¡æ¯è¿˜æ˜¯åŸæ¥é‚£ä¸ª`<span class="hljs-built_in">uname</span> -a`</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">8.éœ€è¦é‡æ–°å¯åŠ¨ï¼Œç„¶åä¼šæç¤ºï¼Œä½ è¦è¿›å…¥é‚£ä¸ªå†…æ ¸</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">9.å› ä¸ºæ˜¯å…¼å®¹çš„ ä½ ä¹‹å‰å®‰è£…çš„ä¸œè¥¿ï¼Œç”¨æˆ·ä¿¡æ¯ éƒ½è¿˜åœ¨ï¼Œåªæ˜¯å†…æ ¸ç‰ˆæœ¬å˜é«˜äº†</span><br></code></pre></td></tr></table></figure><h1 id="linuxå¤‡ä»½å’Œæ¢å¤"><a href="#linuxå¤‡ä»½å’Œæ¢å¤" class="headerlink" title="linuxå¤‡ä»½å’Œæ¢å¤"></a>linuxå¤‡ä»½å’Œæ¢å¤</h1><h2 id="1-ä»‹ç»-5"><a href="#1-ä»‹ç»-5" class="headerlink" title="1.ä»‹ç»"></a>1.ä»‹ç»</h2><blockquote><blockquote><p>å®ä½“æœºæ— æ³•åšå¿«ç…§ï¼Œå¦‚æœç³»ç»Ÿå‡ºç°å¼‚å¸¸æˆ–è€…æ•°æ®æŸåï¼Œåæœä¸¥é‡ï¼Œè¦é‡åšç³»ç»Ÿï¼Œæ‰€ä»¥æˆ‘è¿˜ä¼šé€ æˆæ•°æ®ä¸¢å¤±ã€‚ä»¬å¯ä»¥ä½¿ç”¨å¤‡ä»½å’Œæ¢å¤æŠ€æœ¯</p></blockquote><p>Linuxçš„å¤‡ä»½å’Œæ¢å¤å¾ˆç®€å•ï¼Œæœ‰ä¸¤ç§æ–¹å¼:</p><ul><li><p>1.æŠŠéœ€è¦çš„æ–‡ä»¶(æˆ–è€…åˆ†åŒº)ç”¨TARæ‰“åŒ…å°±è¡Œï¼Œä¸‹æ¬¡éœ€è¦æ¢å¤çš„æ—¶å€™ï¼Œå†è§£å‹å¼€è¦†ç›–å³å¯</p></li><li><p>2.ä½¿ç”¨dumpå’Œrestoreå‘½ä»¤</p></li></ul></blockquote><h2 id="2-dumpæ“ä½œè¯´æ˜"><a href="#2-dumpæ“ä½œè¯´æ˜" class="headerlink" title="2.dumpæ“ä½œè¯´æ˜"></a>2.dumpæ“ä½œè¯´æ˜</h2><h3 id="1-å®‰è£…å·¥å…·ï¼š"><a href="#1-å®‰è£…å·¥å…·ï¼š" class="headerlink" title="1.å®‰è£…å·¥å…·ï¼š"></a>1.å®‰è£…å·¥å…·ï¼š</h3><blockquote><blockquote><p>å¦‚æœlinuxä¸Šæ²¡æœ‰ dump å’Œ restore æŒ‡ä»¤ï¼Œéœ€è¦å…ˆæŒ‰ç…§</p></blockquote><ul><li><p><code>yum -y install dump</code></p></li><li><p><code>yum -yinstall restore</code></p></li></ul></blockquote><h3 id="2-dumpå®Œæˆå¤‡ä»½çš„è¯­æ³•"><a href="#2-dumpå®Œæˆå¤‡ä»½çš„è¯­æ³•" class="headerlink" title="2.dumpå®Œæˆå¤‡ä»½çš„è¯­æ³•"></a>2.dumpå®Œæˆå¤‡ä»½çš„è¯­æ³•</h3><blockquote><ul><li><p>åŸºæœ¬ä»‹ç»</p><ul><li>dump æ”¯æŒåˆ†å·å’Œå¢é‡å¤‡ä»½(æ‰€è°“å¢é‡å¤‡ä»½æ˜¯æŒ‡å¤‡ä»½ä¸Šæ¬¡å¤‡ä»½å ä¿®æ”¹&#x2F;å¢åŠ è¿‡çš„æ–‡ä»¶,ä¹Ÿç§°å·®å¼‚å¤‡ä»½)ã€‚</li></ul></li><li><p>dumpè¯­æ³•è¯´æ˜</p><ul><li>dump[-cu]  [-f &lt;å¤‡ä»½åæ–‡ä»¶å&gt;] [-T &lt;æ—¥æœŸ&gt;] [ç›®å½•æˆ–æ–‡ä»¶ç³»ç»Ÿ] <ul><li>è¿™ä¸ªcæ˜¯çœŸæ­£çš„æ•°å­— 0 1 2 3 4 5 6 7 8 9  ï¼Œ9ä¹‹ååˆæ˜¯0 é‡æ–°å¢åŠ ã€‚ä¾‹å¦‚ï¼š<code>dump -0uj -f /opt/boot.bak.bz2 /boot</code></li></ul></li><li>dump [] -wW</li><li>å‚æ•°è¯´æ˜ï¼š<ul><li>-c : åˆ›å»ºæ–°çš„å½’æ¡£æ–‡ä»¶ï¼Œå¹¶å°†ç”±ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶å‚æ•°æ‰€æŒ‡å®šçš„å†…å®¹å†™å…¥å½’æ¡£æ–‡ä»¶çš„å¼€å¤´<ul><li>-0 1 2 3 4 5 6 7 8 9 : å¤‡ä»½çš„å±‚çº§ã€‚0ä¸ºæœ€å®Œæ•´å¤‡ä»½ï¼Œä¼šå¤‡ä»½æ‰€æœ‰æ–‡ä»¶ã€‚è‹¥æŒ‡å®š0ä»¥ä¸Šçš„å±‚çº§ï¼Œåˆ™å¤‡ä»½è‡³ä¸Šä¸€æ¬¡å¤‡ä»½ä»¥æ¥ä¿®æ”¹æˆ–æ–°å¢çš„æ–‡ä»¶,åˆ°9åï¼Œå¯ä»¥å†æ¬¡è½®æ›¿.</li></ul></li><li>-f&lt;å¤‡ä»½åæ–‡ä»¶å&gt;:æŒ‡å®šå¤‡ä»½åæ–‡ä»¶å</li><li>-j:<strong>è°ƒç”¨ bzlibåº“å‹ç¼©å¤‡ä»½æ–‡ä»¶</strong>ï¼Œä¹Ÿå°±æ˜¯å°†å¤‡ä»½åçš„æ–‡ä»¶å‹ç¼©æˆbz2æ ¼å¼ï¼Œè®©æ–‡ä»¶æ›´å°</li><li>-T&lt;æ—¥æœŸ&gt;:æŒ‡å®šå¼€å§‹å¤‡ä»½çš„æ—¶é—´ä¸æ—¥æœŸ</li><li><strong>-u</strong>:å¤‡ä»½å®Œæ¯•åï¼Œåœ¨<code>/etc/dumpdares</code>ä¸­è®°å½•å¤‡ä»½çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå±‚çº§ï¼Œæ—¥æœŸä¸æ—¶é—´ç­‰ã€‚</li><li>-t:æŒ‡å®šæ–‡ä»¶åï¼Œè‹¥è¯¥æ–‡ä»¶å·²å­˜åœ¨å¤‡ä»½æ–‡ä»¶ä¸­ï¼Œåˆ™åˆ—å‡ºåç§°</li><li>-W :æ˜¾ç¤ºéœ€è¦å¤‡ä»½çš„æ–‡ä»¶åŠå…¶æœ€åä¸€æ¬¡å¤‡ä»½çš„å±‚çº§ï¼Œæ—¶é—´ï¼Œæ—¥æœŸã€‚</li><li>-wä¸-Wç±»ä¼¼ï¼Œä½†ä»…æ˜¾ç¤ºéœ€è¦å¤‡ä»½çš„æ–‡ä»¶ã€‚</li></ul></li></ul></li></ul></blockquote><h3 id="3-dumpæ¡ˆä¾‹"><a href="#3-dumpæ¡ˆä¾‹" class="headerlink" title="3.dumpæ¡ˆä¾‹"></a>3.dumpæ¡ˆä¾‹</h3><h4 id="1-dumpå¤‡ä»½åˆ†åŒº"><a href="#1-dumpå¤‡ä»½åˆ†åŒº" class="headerlink" title="1.dumpå¤‡ä»½åˆ†åŒº"></a>1.dumpå¤‡ä»½åˆ†åŒº</h4><blockquote><p>1.dumpåº”ç”¨æ¡ˆä¾‹1</p><ul><li>å°†&#x2F;boot ç›®å½•(åˆ†åŒº)æ‰€æœ‰å†…å®¹å¤‡ä»½åˆ°&#x2F;opt&#x2F;boot.bak0.bz2 æ–‡ä»¶ä¸­ï¼Œå¤‡ä»½å±‚çº§ä¸ºâ€œ0â€<ul><li><code>dump -0uj -f /opt/boot.bak0.bz2 /boot</code></li></ul></li></ul><p>2.dumpåº”ç”¨æ¡ˆä¾‹2</p><ul><li>åœ¨&#x2F;bootç›®å½•ä¸‹å¢åŠ ä¸€ä¸ªæ–‡ä»¶ï¼Œå¤‡ä»½å±‚çº§ä¸ºâ€œ1â€  (åªå¤‡ä»½ä¸Šæ¬¡ä½¿ç”¨å±‚æ¬¡â€œ0â€å¤‡ä»½åå‘ç”Ÿè¿‡æ”¹å˜çš„æ•°æ®)ï¼Œ<strong>æ³¨æ„æ¯”è¾ƒçœ‹è¿™æ¬¡ç”Ÿæˆçš„å¤‡ä»½æ–‡ä»¶ boot1.bak æœ‰å¤šå¤§</strong><ul><li><code>dump -1uj -f /opt/boot.bak1.bz2 /boot</code></li></ul></li></ul><blockquote><p><strong>æé†’:</strong> é€šè¿‡dumpå‘½ä»¤åœ¨é…åˆcrontab å¯ä»¥å®ç°æ— äººå€¼å®ˆå¤‡ä»½</p></blockquote><p>3.æ¡ˆä¾‹ï¼š</p><ul><li><p>dump -W</p><ul><li>æ˜¾ç¤ºéœ€è¦å¤‡ä»½çš„æ–‡ä»¶åŠå…¶æœ€åä¸€æ¬¡å¤‡ä»½çš„å±‚çº§ï¼Œæ—¶é—´ï¼Œæ—¥æœŸ</li></ul><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240913104606755.png" class title="image-20240913104606755"></li><li><p>æŸ¥çœ‹å¤‡ä»½æ—¶é—´æ–‡ä»¶</p><ul><li><code>cat /etc/dumpdates</code></li></ul><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240913104634872.png" class title="image-20240913104634872"></li></ul></blockquote><h4 id="2-dumpå¤‡ä»½ç›®å½•"><a href="#2-dumpå¤‡ä»½ç›®å½•" class="headerlink" title="2.dumpå¤‡ä»½ç›®å½•"></a>2.dumpå¤‡ä»½ç›®å½•</h4><blockquote><ul><li>dump å¤‡ä»½æ–‡ä»¶æˆ–è€…ç›®å½•</li><li>å‰é¢æˆ‘ä»¬åœ¨<strong>å¤‡ä»½åˆ†åŒºæ—¶ï¼Œæ˜¯å¯ä»¥æ”¯æŒå¢é‡å¤‡ä»½çš„</strong>ï¼Œå¦‚æœå¤‡ä»½<strong>æ–‡ä»¶æˆ–è€…ç›®å½•ï¼Œä¸å†æ”¯æŒå¢é‡å¤‡ä»½</strong>ï¼Œå³åªèƒ½ä½¿ç”¨0çº§åˆ«å¤‡ä»½</li><li>æ¡ˆä¾‹ ï¼Œä½¿ç”¨dump å¤‡ä»½&#x2F;etc æ•´ä¸ªç›®å½•<ul><li><code>dump -0j -f /opt/etc.bak.bz2 /etc</code></li></ul></li><li>#ä¸‹é¢è¿™æ¡è¯­å¥ä¼šæŠ¥é”™,æç¤º DUMP: Only level 0 dumps are allowed on a subdirectory ï¼Œå‚æ•°<code>-u</code>ä¹Ÿä¸æ”¯æŒ<ul><li><code>dump -1j -f /opt/etc.bak.bz2 /etc/</code></li></ul></li><li><strong>æé†’ï¼š</strong>å¦‚æœæ˜¯é‡è¦çš„å¤‡ä»½æ–‡ä»¶ ï¼Œæ¯”å¦‚æ•°æ®åŒºï¼Œå»ºè®®å°†æ–‡ä»¶ä¸Šä¼ åˆ°å…¶å®ƒæœåŠ¡å™¨ä¿å­˜ï¼Œ<strong>ä¸è¦å°†é¸¡è›‹æ”¾åœ¨åŒä¸€ä¸ªç¯®å­ã€‚</strong></li></ul></blockquote><h2 id="3-restoreå®Œæˆæ¢å¤è¯´æ˜"><a href="#3-restoreå®Œæˆæ¢å¤è¯´æ˜" class="headerlink" title="3.restoreå®Œæˆæ¢å¤è¯´æ˜"></a>3.restoreå®Œæˆæ¢å¤è¯´æ˜</h2><h3 id="1-ä»‹ç»-6"><a href="#1-ä»‹ç»-6" class="headerlink" title="1.ä»‹ç»"></a>1.ä»‹ç»</h3><blockquote><p>åŸºæœ¬ä»‹ç»</p><blockquote><p>restore å‘½ä»¤ç”¨æ¥æ¢å¤å·²å¤‡ä»½çš„æ–‡ä»¶ï¼Œå¯ä»¥ä»dump ç”Ÿæˆçš„å¤‡ä»½æ–‡ä»¶ä¸­æ¢å¤åŸæ–‡ä»¶</p></blockquote></blockquote><h3 id="2-restoreåŸºæœ¬è¯­æ³•"><a href="#2-restoreåŸºæœ¬è¯­æ³•" class="headerlink" title="2.restoreåŸºæœ¬è¯­æ³•"></a>2.restoreåŸºæœ¬è¯­æ³•</h3><blockquote><p>restoreåŸºæœ¬è¯­æ³•</p><ul><li>restore [æ¨¡å¼é€‰é¡¹] [é€‰é¡¹]</li></ul><blockquote><p><strong>è¯´æ˜ï¼šä¸‹é¢å››ä¸ªæ¨¡å¼ï¼Œä¸èƒ½æ··ç”¨ï¼Œåœ¨ä¸€æ¬¡å‘½ä»¤ä¸­ï¼Œåªèƒ½æŒ‡å®šä¸€ç§</strong></p></blockquote><ul><li><p>æ¨¡å¼</p></li><li><p>-C : ä½¿ç”¨å¯¹æ¯”æ¨¡å¼ï¼Œå°†å¤‡ä»½çš„æ–‡ä»¶ä¸å·²å­˜åœ¨çš„æ–‡ä»¶ç›¸äº’å¯¹æ¯”ã€‚</p></li><li><p>-i : ä½¿ç”¨äº¤äº’æ¨¡å¼ï¼Œåœ¨è¿›è¡Œè¿˜åŸæ“ä½œæ—¶ï¼ŒrestorsæŒ‡ä»¤å°†ä¾åºè¯¢é—®ç”¨æˆ·</p></li><li><p>-r:  è¿›è¡Œè¿˜åŸæ¨¡å¼ï¼ˆæœ€å¤šï¼‰</p></li><li><p>-t : æŸ¥çœ‹æ¨¡å¼ï¼Œçœ‹å¤‡ä»½æ–‡ä»¶æœ‰å“ªäº›æ–‡ä»¶</p></li><li><p>é€‰é¡¹</p></li><li><p>-f &lt;å¤‡ä»½è®¾å¤‡&gt;:ä»æŒ‡å®šçš„æ–‡ä»¶ä¸­è¯»å–å¤‡ä»½æ•°æ®ï¼Œè¿›è¡Œè¿˜åŸæ“ä½œ</p></li></ul></blockquote><h3 id="3-æ¡ˆä¾‹"><a href="#3-æ¡ˆä¾‹" class="headerlink" title="3.æ¡ˆä¾‹"></a>3.æ¡ˆä¾‹</h3><h4 id="æ¡ˆä¾‹ä¸€ï¼ˆæ¯”è¾ƒï¼‰"><a href="#æ¡ˆä¾‹ä¸€ï¼ˆæ¯”è¾ƒï¼‰" class="headerlink" title="æ¡ˆä¾‹ä¸€ï¼ˆæ¯”è¾ƒï¼‰"></a>æ¡ˆä¾‹ä¸€ï¼ˆæ¯”è¾ƒï¼‰</h4><blockquote><blockquote><p>restore å‘½ä»¤æ¯”è¾ƒæ¨¡å¼ï¼Œå°±æ˜¯æ¯”è¾ƒå¤‡ä»½æ–‡ä»¶å’ŒåŸæ–‡ä»¶çš„åŒºåˆ«</p></blockquote><ul><li><p><code>mv /boot/hello.java /boot/hello100.java</code>  &#x2F;&#x2F;ç»™åŸç›®å½•ä¸­çš„æ–‡ä»¶æ”¹åï¼Œå†æ¯”è¾ƒ</p></li><li><p><code>restore -C -f boot.bak1.bz2</code>     &#x2F;&#x2F;æ³¨æ„å’Œ æœ€æ–°çš„æ–‡ä»¶æ¯”è¾ƒ</p></li></ul><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240913110519363.png" class title="image-20240913110519363"></blockquote><h4 id="æ¡ˆä¾‹äºŒï¼ˆæŸ¥çœ‹ï¼‰"><a href="#æ¡ˆä¾‹äºŒï¼ˆæŸ¥çœ‹ï¼‰" class="headerlink" title="æ¡ˆä¾‹äºŒï¼ˆæŸ¥çœ‹ï¼‰"></a>æ¡ˆä¾‹äºŒï¼ˆæŸ¥çœ‹ï¼‰</h4><blockquote><blockquote><p>restoreå‘½ä»¤æŸ¥çœ‹æ¨¡å¼ï¼Œçœ‹å¤‡ä»½æ–‡ä»¶æœ‰å“ªäº›æ•°æ®&#x2F;æ–‡ä»¶</p></blockquote><p>æµ‹è¯•</p><ul><li><code>restore -t -f boot.bak0.hz2</code></li></ul></blockquote><h4 id="æ¡ˆä¾‹3-è¿˜åŸæ–‡ä»¶"><a href="#æ¡ˆä¾‹3-è¿˜åŸæ–‡ä»¶" class="headerlink" title="æ¡ˆä¾‹3 (è¿˜åŸæ–‡ä»¶)"></a>æ¡ˆä¾‹3 (è¿˜åŸæ–‡ä»¶)</h4><blockquote><blockquote><p>restore å‘½ä»¤è¿˜åŸæ¨¡å¼ï¼Œ<strong>æ³¨æ„ç»†èŠ‚ï¼š</strong>å¦‚æœä½ æœ‰å¢é‡å¤‡ä»½ï¼Œéœ€è¦æŠŠå¢é‡å¤‡ä»½æ–‡ä»¶ä¹Ÿè¿›è¡Œæ¢å¤ï¼Œæœ‰å‡ ä¸ªå¢é‡å¤‡ä»½æ–‡ä»¶å°±è¦æ¢å¤å‡ ä¸ªï¼Œ<strong>æŒ‰é¡ºåºæ¥æ¢å¤</strong>å³å¯</p></blockquote><p>æµ‹è¯•</p><ul><li><p><code>mkdir /opt/boottmp</code></p></li><li><p><code>cd /opt/boottmp</code></p></li><li><p><code>restore -r -f /opt/boot.bak0.bz2</code> &#x2F;&#x2F;æ¢å¤åˆ°ç¬¬1æ¬¡å®Œå…¨å¤‡ä»½çŠ¶æ€</p></li><li><p><code>restore -r -f /opt/boot.bak1.bz2</code> &#x2F;&#x2F;æ¢å¤åˆ°ç¬¬2æ¬¡å¢é‡å¤‡ä»½çŠ¶æ€</p></li></ul><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240913111056752.png" class title="image-20240913111056752"></blockquote><h4 id="æ¡ˆä¾‹4ï¼ˆæ¢å¤ç›®å½•ï¼‰"><a href="#æ¡ˆä¾‹4ï¼ˆæ¢å¤ç›®å½•ï¼‰" class="headerlink" title="æ¡ˆä¾‹4ï¼ˆæ¢å¤ç›®å½•ï¼‰"></a>æ¡ˆä¾‹4ï¼ˆæ¢å¤ç›®å½•ï¼‰</h4><blockquote><p>restore å‘½ä»¤æ¢å¤å¤‡ä»½çš„æ–‡ä»¶ï¼Œæˆ–è€…æ•´ä¸ªç›®å½•çš„æ–‡ä»¶</p><p>åŸºæœ¬è¯­æ³•:</p><p><code>restore -r -f å¤‡ä»½å¥½çš„æ–‡ä»¶</code></p><p>æµ‹è¯•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">mkdir -p /opt/etctmp<br><br>cd /opt/etctmp/<br><br>restore -r -f/opt/etc.bak0.bz2<br></code></pre></td></tr></table></figure></blockquote><h1 id="webmin"><a href="#webmin" class="headerlink" title="webmin"></a>webmin</h1><h2 id="1-åŸºæœ¬ä»‹ç»"><a href="#1-åŸºæœ¬ä»‹ç»" class="headerlink" title="1.åŸºæœ¬ä»‹ç»"></a>1.åŸºæœ¬ä»‹ç»</h2><blockquote><blockquote><p>Webminæ˜¯åŠŸèƒ½å¼ºå¤§çš„åŸºäºWebçš„Unix&#x2F;linuxç³»ç»Ÿç®¡ç†å·¥å…·ã€‚ç®¡ç†å‘˜é€šè¿‡æµè§ˆå™¨è®¿é—®Webminçš„å„ç§ç®¡ç†åŠŸèƒ½å¹¶å®Œæˆç›¸åº”çš„ç®¡ç†æ“ä½œã€‚é™¤äº†å„ç‰ˆæœ¬çš„linuxä»¥å¤–è¿˜å¯ç”¨äº:AIXã€HPUXã€Solarisã€Unixwareã€Irixå’ŒFreeBSDç­‰ç³»ç»Ÿ</p></blockquote></blockquote><h2 id="2-å®‰è£…"><a href="#2-å®‰è£…" class="headerlink" title="2.å®‰è£…"></a>2.å®‰è£…</h2><blockquote><p>å®‰è£…webmin&amp;é…ç½®</p><p>1.ä¸‹è½½åœ°å€ :<a href="http://download.webmin.com/download/yum/%EF%BC%8C%E7%94%A8%E4%B8%8B%E8%BD%BD%E5%B7%A5%E5%85%B7%E4%B8%8B%E8%BD%BD%E5%8D%B3%E5%8F%AF">http://download.webmin.com/download/yum/ï¼Œç”¨ä¸‹è½½å·¥å…·ä¸‹è½½å³å¯</a></p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240913140037374.png" class title="image-20240913140037374"><blockquote><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ wget <a href="http://downlobmi.com/download/yum/webmin-1.700..noarch.rom">http://downlobmi.com/download/yum/webmin-1.700..noarch.rom</a></p></blockquote><p>2.å®‰è£…:</p><ul><li><code>rpm -ivh webmin-1.700-1.noarch.rpm</code></li></ul><p>3.é‡ç½®å¯†ç </p><ul><li><code>/usr/libexec/webmin/changepass.pl /etc/webmin root test</code></li></ul><blockquote><p><code>root</code>æ˜¯webminçš„ç”¨æˆ·åï¼Œä¸æ˜¯OSçš„ï¼Œè¿™é‡Œå°±æ˜¯æŠŠ webmin çš„root ç”¨æˆ·å¯†ç æ”¹æˆäº† <code>test</code></p></blockquote><p>4.ä¿®æ”¹webminæœåŠ¡çš„ç«¯å£å·(é»˜è®¤æ˜¯10000 å‡ºäºå®‰å…¨ç›®çš„)</p><ul><li><code>vim/etc/webmin/miniserv.conf</code> #ä¿®æ”¹ç«¯å£<ul><li>å°†<code>port=10000</code>ä¿®æ”¹ä¸ºå…¶ä»–ç«¯å£å·ï¼Œå¦‚port&#x3D;6666</li><li>å°†<code>listen=10000</code>ä¿®æ”¹ä¸º6666</li></ul></li></ul><p>5.é‡å¯webmin</p><ul><li><p><code>/etc/webmin/restart</code>  #é‡å¯</p></li><li><p><code>/etc/webmin/start</code>  #å¯åŠ¨</p></li><li><p><code>/etc/webmin/stop</code> #åœæ­¢</p></li></ul><p>6.é˜²ç«å¢™æ”¾å¼€6666ç«¯å£</p><ul><li><p><code>firewall-cmd --zone=public --add-port=6666/tcp --permanent</code> # é…ç½®é˜²ç«å¢™å¼€æ”¾6666ç«¯å£</p></li><li><p><code>firewall-cmd --reload</code>  # æ›´æ–°é˜²ç«å¢™é…ç½®</p></li><li><p><code>firewall-cmd --zone=public --list-ports</code> #æŸ¥çœ‹å·²ç»å¼€æ”¾çš„ç«¯å›—å·</p></li></ul><p>7.ç™»å½•webmin</p><ul><li><p><a href="http://ip:6666/">http://ip:6666</a> å¯ä»¥è®¿é—®äº†</p><ul><li>ç”¨rootè´¦å·å’Œé‡ç½®çš„æ–°å¯†ç test</li></ul><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240913142437221.png" class title="image-20240913142437221"></li></ul></blockquote><h2 id="3-åŠŸèƒ½å±•ç¤º"><a href="#3-åŠŸèƒ½å±•ç¤º" class="headerlink" title="3.åŠŸèƒ½å±•ç¤º"></a>3.åŠŸèƒ½å±•ç¤º</h2><h3 id="1-ç®€å•å±•ç¤º"><a href="#1-ç®€å•å±•ç¤º" class="headerlink" title="1.ç®€å•å±•ç¤º"></a>1.ç®€å•å±•ç¤º</h3><blockquote><p>æ¯”å¦‚ä¿®æ”¹ è¯­è¨€è®¾ç½®ï¼ŒIPè®¿é—®æ§åˆ¶ï¼ŒæŸ¥çœ‹è¿›ç¨‹,ä¿®æ”¹å¯†ç ï¼Œä»»åŠ¡è°ƒåº¦ï¼Œmysql ç­‰</p></blockquote><p>1.è¯­è¨€è®¾ç½®ï¼š</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240913143924263.png" class title="image-20240913143924263"><p>2.ä¿®æ”¹å¯†ç </p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240913143935880.png" class title="image-20240913143935880"><p>3.ä»»åŠ¡è°ƒåº¦</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240913143906895.png" class title="image-20240913143906895"><p>4.ä»»åŠ¡ç®¡ç†å™¨</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240913143849727.png" class title="image-20240913143849727"><p>5.mysqlæœåŠ¡ç®¡ç†</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240913144029502.png" class title="image-20240913144029502"><p>6.shellæ§åˆ¶å°</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240913144202314.png" class title="image-20240913144202314"><p>7.ipè®¿é—®</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240913144234567.png" class title="image-20240913144234567"><h1 id="å®å¡”bt"><a href="#å®å¡”bt" class="headerlink" title="å®å¡”bt"></a>å®å¡”bt</h1><h2 id="1-åŸºæœ¬ä»‹ç»-1"><a href="#1-åŸºæœ¬ä»‹ç»-1" class="headerlink" title="1.åŸºæœ¬ä»‹ç»"></a>1.åŸºæœ¬ä»‹ç»</h2><blockquote><p>btå®å¡”Linuxé¢æ¿æ˜¯æå‡è¿ç»´æ•ˆç‡çš„æœåŠ¡å™¨ç®¡ç†è½¯ä»¶ï¼Œæ”¯æŒä¸€é”®LAMP&#x2F;LNMP&#x2F;é›†ç¾¤&#x2F;ç›‘æ§&#x2F;ç½‘ç«™&#x2F;FTP&#x2F;æ•°æ®åº“&#x2F;JAVAç­‰å¤šé¡¹æœåŠ¡å™¨ç®¡ç†åŠŸèƒ½ã€‚</p></blockquote><h2 id="2-å®‰è£…å’Œä½¿ç”¨"><a href="#2-å®‰è£…å’Œä½¿ç”¨" class="headerlink" title="2.å®‰è£…å’Œä½¿ç”¨"></a>2.å®‰è£…å’Œä½¿ç”¨</h2><blockquote><p>å®‰è£…:</p><ul><li><p><code> yum install -y wget</code> </p></li><li><p><code>wget -0 install.sh http://download.bt.cn/install/install 6.0.sh </code></p></li><li><p><code> sh install.sh</code></p></li></ul><p>å®‰è£…æˆåŠŸåæ§åˆ¶å°ä¼šæ˜¾ç¤ºç™»å½•åœ°å€ï¼Œè´¦æˆ·å¯†ç ï¼Œå¤åˆ¶æµè§ˆå™¨æ‰“å¼€ç™»å½•</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240913152419655.png" class title="image-20240913152419655"></blockquote><h2 id="3-å®ä¾‹"><a href="#3-å®ä¾‹" class="headerlink" title="3.å®ä¾‹"></a>3.å®ä¾‹</h2><blockquote><p>ä½¿ç”¨ä»‹ç»ï¼Œæ¯”å¦‚å¯ä»¥ç™»å½•ç»ˆç«¯,é…ç½®ï¼Œå¿«æ·å®‰è£…è¿è¡Œç¯å¢ƒå’Œç³»ç»Ÿå·¥å…·,æ·»åŠ è®¡åˆ’ä»»åŠ¡è„šæœ¬</p><p><a href="http://ip:8888/d3076f56/">http://ip:8888/d3076f56/</a></p></blockquote><h2 id="4-å¿˜è®°å¯†ç "><a href="#4-å¿˜è®°å¯†ç " class="headerlink" title="4.å¿˜è®°å¯†ç "></a>4.å¿˜è®°å¯†ç </h2><blockquote><p>å¦‚æœbtçš„ç”¨æˆ·åï¼Œå¯†ç å¿˜è®°äº†ï¼Œä½¿ç”¨<code>bt default</code>å¯ä»¥æŸ¥çœ‹</p></blockquote><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240913154646107.png" class title="image-20240913154646107"><h1 id="linuxé¢è¯•é¢˜"><a href="#linuxé¢è¯•é¢˜" class="headerlink" title="linuxé¢è¯•é¢˜"></a>linuxé¢è¯•é¢˜</h1><p>1.é—®é¢˜ï¼šåˆ†ææ—¥å¿—t.log(è®¿é—®é‡)ï¼Œå°†å„ä¸ªipåœ°å€æˆªå–ï¼Œå¹¶ç»Ÿè®¡å‡ºç°æ¬¡æ•°,å¹¶æŒ‰ä»å¤§åˆ°å°æ’åº(è…¾è®¯)</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs text">http://192.168.200.10/index1.html<br>http://192.168.200.10/index2.html<br>http://192.168.200.20/index1.html<br>http://192.168.200.30/index1.html<br>http://192.168.200.40/index1.html<br>http://192.168.200.30/order.html<br>http://192.168.200.10/order.html<br></code></pre></td></tr></table></figure><p>ç­”æ¡ˆï¼š</p><blockquote><p><code>cat t.txt | cut -d &#39;/&#39; -f 3 | sort | uniq -c | sort -nr</code> </p><p>è§£é‡Šï¼š</p><ul><li>cut ç±»ä¼¼äºJavaä¸­çš„åˆ‡å‰²å­—ç¬¦ä¸²</li><li>sort æ’åº<ul><li>-nr  ååº</li></ul></li><li>uniq ç»Ÿè®¡ç›¸é‚»çš„é‡å¤æƒ…å†µ  æ‰€ä»¥å…ˆæ’åºå†ç»Ÿè®¡</li></ul></blockquote><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240913155749647.png" class title="image-20240913155749647"><p>2.é—®é¢˜ï¼šç»Ÿè®¡è¿æ¥åˆ°æœåŠ¡å™¨çš„å„ä¸ªipæƒ…å†µï¼Œå¹¶æŒ‰è¿æ¥æ•°ä»å¤§åˆ°å°æ’åº(è…¾è®¯)</p><p>ç­”æ¡ˆï¼š</p><blockquote><ul><li><code>netstat -an |grep ESTABLISHED | awk -F &quot; &quot; &#39;&#123;print $5&#125;&#39; | awk -F &quot;:&quot; &#39;&#123;print $1&#125;&#39; | sort | uniq -c | sort -nr</code></li></ul><p>æˆ–è€…</p><ul><li><code>netstat -an |grep ESTABLISHED | awk -F &quot; &quot; &#39;&#123;print $5&#125;&#39; | cut -d &quot;:&quot; -f 1 | sort | uniq -c | sort -nr</code></li></ul><p>è§£é‡Šï¼š</p><ul><li><code>awk -F &quot; &quot; &#39;&#123;print $1&#125;&#39;  </code> åˆ†å‰²å­—ç¬¦ä¸²ï¼Œå¯ä»¥åˆ†å‰²ç©ºæ ¼ï¼Œ<code>cut</code>ç®€å•çš„å¯ä»¥åˆ†å‰²ï¼Œç©ºæ ¼ä¸èƒ½åˆ†å‰²</li></ul></blockquote><p>3.é—®é¢˜ï¼šå¦‚å¿˜è®°äº†mysql5.7æ•°æ®åº“çš„ROOTç”¨æˆ·çš„å¯†ç ï¼Œå¦‚ä½•æ‰¾å›?(æ»´æ»´)</p><ul><li><code>vim /etc/my.cnf</code>  </li><li>æ·»åŠ ä¸€è¡Œ<code>skip-grant-tables</code>(è·³è¿‡æƒé™)</li><li>é‡å¯mysqldæœåŠ¡<code>service mysqld restart</code></li><li><code>mysql -u root -p</code> ç©ºå¯†ç è¿›å…¥</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> databases;<br><span class="hljs-keyword">user</span> mysql;<br><span class="hljs-keyword">show</span> tables;<br><span class="hljs-keyword">desc</span> <span class="hljs-keyword">user</span>;<br><span class="hljs-keyword">update</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">set</span> authentication_string<span class="hljs-operator">=</span>password(&quot;123456&quot;) <span class="hljs-keyword">where</span> <span class="hljs-keyword">user</span><span class="hljs-operator">=</span><span class="hljs-string">&#x27;root&#x27;</span>;<br>flush privileges;<br>exit<br></code></pre></td></tr></table></figure><ul><li><code>vim /etc/my.cnf</code>  </li><li>æ³¨é‡Š<code>skip-grant-tables</code>(è·³è¿‡æƒé™)</li></ul><p>4.é—®é¢˜ï¼šå†™å‡ºæŒ‡ä»¤:ç»Ÿè®¡ipè®¿é—®æƒ…å†µï¼Œè¦æ±‚åˆ†ænginxè®¿é—®æ—¥å¿—(access.log)ï¼Œæ‰¾å‡ºè®¿é—®é¡µé¢æ•°é‡åœ¨å‰åä½çš„ip(ç¾å›¢)</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs text">192J168.130.21 aaa.html<br>192.168.130.20 aaa.html<br>192.168.130.20 aaa.html<br>192.168.130.20 aaa.htm]<br>192.168.130.23 aaa.html<br>192.168.130.20 aaa.html<br>192.168.130.25 aaa.html<br>192.168.130.20 aaa.html<br>192.168.130.20 aaa.html<br>192.168.130.25 aaa.html<br>192.168.130.20 aaa.html<br></code></pre></td></tr></table></figure><p>ç­”æ¡ˆï¼š</p><ul><li><code>cat access.log | awk -F &quot; &quot; &#39;&#123;print $1&#125;&#39; | sort | uniq -c | sort -nr | head -2 </code><ul><li><code>head -2</code>  å–å‰ä¸¤æ¡</li></ul></li></ul><p>5.é—®é¢˜ï¼šä½¿ç”¨tcpdumpç›‘å¬æœ¬æœº,å°†æ¥è‡ªip 192.168.200.1ï¼Œtcpç«¯å£ä¸º22çš„æ•°æ®ï¼Œä¿å­˜è¾“å‡ºåˆ°tcpdump.logï¼Œç”¨åšå°†æ¥æ•°æ®åˆ†æ(ç¾å›¢)</p><p>ç­”æ¡ˆï¼š</p><ul><li><code>tcpdump</code>  #éªŒè¯è£…æ²¡è£…</li><li><code>tcpdump -i ens33 host 192.168.200.1 and port 22 &gt;&gt; /opt/interview/tcpdump.log</code></li></ul><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240914090501116.png" class title="image-20240914090501116"><p>6.å¸¸ç”¨çš„Nginxæ¨¡å—ï¼Œç”¨æ¥åšä»€ä¹ˆ(å¤´æ¡)</p><p>ç­”æ¡ˆï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs text">rewriteæ¨¡å—ï¼Œå®ç°é‡å†™åŠŸèƒ½<br>accessæ¨¡å—:æ¥æºæ§åˆ¶<br>ssIæ¨¡å—:å®‰å…¨åŠ å¯†<br>ngx_http_gzip_module:ç½‘ç»œä¼ è¾“å‹ç¼©æ¨¡å—<br>ngx_http_proxy_module æ¨¡å—å®ç°ä»£ç†<br>ngx_http_upstream_module<br>æ¨¡å—å®ç°å®šä¹‰åç«¯æœåŠ¡å™¨åˆ—è¡¨<br>ngx_cache_purgeå®ç°ç¼“å­˜æ¸…é™¤åŠŸèƒ½<br>...è¿˜æœ‰å¾ˆå¤š<br></code></pre></td></tr></table></figure><p>7.å¦‚æœä½ æ˜¯ç³»ç»Ÿç®¡ç†å‘˜ï¼Œåœ¨è¿›è¡ŒLinuxç³»ç»Ÿæƒé™åˆ’åˆ†æ—¶,åº”è€ƒè™‘å“ªäº›å› ç´ ?(è…¾è®¯)</p><p>ç¬¬ä¸€ï¼šé¦–å…ˆé˜è¿°Linuxæƒé™çš„ä¸»è¦å¯¹è±¡</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240914091004808.png" class title="image-20240914091004808"><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240914090951770.png" class title="image-20240914090951770"><p>ç¬¬äºŒï¼šæ ¹æ®è‡ªå·±å®é™…ç»éªŒè°ˆè€ƒè™‘å› ç´ </p><blockquote><ul><li><p>1.æ³¨æ„æƒé™åˆ†ç¦»ï¼Œæ¯”å¦‚: å·¥ä½œä¸­ï¼ŒLinuxç³»ç»Ÿæƒé™å’Œæ•°æ®åº“æƒé™ä¸è¦åœ¨åŒä¸€ä¸ªéƒ¨é—¨</p></li><li><p>2.æƒé™æœ€å°åŸåˆ™(å³:åœ¨æ»¡è¶³ä½¿ç”¨çš„æƒ…å†µä¸‹æœ€å°‘ä¼˜å…ˆ)</p></li><li><p>3.å‡å°‘ä½¿ç”¨<code>rootç”¨æˆ·</code>ï¼Œå°½é‡ç”¨<code>æ™®é€šç”¨æˆ·+sudo</code>ææƒè¿›è¡Œæ—¥å¸¸æ“ä½œã€‚</p></li><li><p>4.é‡è¦çš„ç³»ç»Ÿæ–‡ä»¶ï¼Œæ¯”å¦‚<code>/etc/passwd,/etc/shadow etc/fstabï¼Œ/etc/sudoers</code> ç­‰,æ—¥å¸¸å»ºè®®ä½¿ç”¨<code>chattr</code> (change attributeçš„ç¼©å†™)é”å®šï¼Œéœ€è¦æ“ä½œæ—¶å†æ‰“å¼€ã€‚ã€æ¼”ç¤º æ¯”å¦‚: é”å®š&#x2F;etc&#x2F;password è®©ä»»ä½•ç”¨æˆ·éƒ½ä¸èƒ½éšæ„<code>useradd</code>ï¼Œé™¤éè§£é™¤é”å®šã€‘</p><ul><li>â€‹<code>chattr +i /etc/passwd </code> #é”å®šè¿™ä¸ªæ–‡ä»¶å æ‰€æœ‰ç”¨æˆ·éƒ½ä¸èƒ½<code>useradd myuser</code></li><li>é˜²æ­¢é»‘å®¢æ‰§è¡Œ<code>chattr</code>å‘½ä»¤ï¼Œå°†<code>chattr</code>å‘½ä»¤è—èµ·æ¥ï¼š<ul><li><code>which chattr</code>  #æ‰¾åˆ°è¿™ä¸ªå‘½ä»¤çš„ä½ç½®</li><li><code>mv /usr/bin/chattr /opt</code>  #å°†è¿™ä¸ªå‘½ä»¤è½¬ç§»ï¼Œè¿™æ ·å°±ä¸èƒ½ç›´æ¥ä½¿ç”¨è¿™ä¸ªå‘½ä»¤äº†</li><li><code>mv /opt/chattr /opt/h</code>   #æ€•é»‘å®¢ä½¿ç”¨<code>find / -name chattr</code>æ‰¾åˆ° åˆ™ä¿®æ”¹è¿™ä¸ªå‘½ä»¤çš„åå­—</li></ul></li><li>è§£é”çš„è¿‡ç¨‹æ˜¯é˜²é»‘å®¢çš„é€†æ“ä½œ<ul><li><code>mv /opt/h /opt/chattr</code></li><li><code>mv /opt/chattr /usr/bin/</code></li><li><code>chattr -i /etc/passwd</code>  #å‘½ä»¤è¿˜åŸåè§£é”</li></ul></li></ul></li><li><p>5.ä½¿ç”¨<code>SUID, SGID, Sticky</code> è®¾ç½®ç‰¹æ®Šæƒé™ã€‚</p></li><li><p>6.å¯ä»¥åˆ©ç”¨å·¥å…·ï¼Œæ¯”å¦‚<code>chkrootkit</code> æˆ–è€…<code>rootkit hunter </code>æ£€æµ‹rootkitè„šæœ¬(rootkitæ˜¯å…¥ä¾µè€…ä½¿ç”¨å·¥å…·,åœ¨ä¸å¯Ÿè§‰çš„å»ºç«‹äº†å…¥ä¾µç³»ç»Ÿé€”å¾„)[æ¼”ç¤ºä½¿ç”¨ <code>wget ftp://ftp.pangeia.com.br/pub/seg/pac/chkrootkit.tar.gz</code>]</p><ul><li>ä¸‹è½½åï¼Œæ‰§è¡Œ<code>./chrootkit</code> æ‰«æ  ï¼ˆè§£å‹åå¯ä»¥<code>gcc</code>è¿›è¡Œç¼–è¯‘ï¼ˆå¯é€‰ï¼‰ï¼‰</li></ul></li><li><p>7.åˆ©ç”¨å·¥å…·<code>Tripwire</code> æ£€æµ‹æ–‡ä»¶ç³»ç»Ÿå®Œæ•´æ€§</p></li></ul></blockquote><p>8.æƒé™æ€è€ƒ</p><blockquote><p>æƒé™æ“ä½œæ€è€ƒé¢˜</p><p>1.ç”¨æˆ·tom å¯¹ç›®å½•<code>/home/test</code>æœ‰æ‰§è¡Œå’Œè¯»å†™æƒé™ï¼Œ<code>/home/test/hello.java</code> æ˜¯åªè¯»æ–‡ä»¶ï¼Œé—®tomå¯¹<code>hello.java</code>æ–‡ä»¶èƒ½è¯»å—ï¼Ÿèƒ½ä¿®æ”¹å—ï¼Ÿèƒ½åˆ é™¤å—ï¼Ÿ</p><ul><li>èƒ½è¯»ï¼Œä¸èƒ½ä¿®æ”¹ï¼Œèƒ½åˆ é™¤</li></ul><p>2.ç”¨æˆ·tom å¯¹ç›®å½• &#x2F;home&#x2F;test åªæœ‰è¯»å†™æƒé™ï¼Œ&#x2F;home&#x2F;test&#x2F;hello.java æ˜¯åªè¯»æ–‡ä»¶,é—®tomå¯¹ hello.javaæ–‡ä»¶èƒ½è¯»å—?èƒ½ä¿®æ”¹å—?èƒ½åˆ é™¤å—?</p><p>ä¸èƒ½ï¼Œä¸èƒ½ï¼Œä¸èƒ½</p><p>3.ç”¨æˆ·tom å¯¹ç›®å½• &#x2F;home&#x2F;test åªæœ‰æ‰§è¡Œæƒé™,&#x2F;home&#x2F;test&#x2F;hello.java æ˜¯åªè¯»æ–‡ä»¶,é—®tomå¯¹ hello.javaæ–‡ä»¶èƒ½è¯»å—?èƒ½ä¿®æ”¹å— ?èƒ½åˆ é™¤å—?</p><p>èƒ½ï¼Œä¸èƒ½ï¼Œä¸èƒ½</p><p>4.ç”¨æˆ·tom å¯¹ç›®å½• &#x2F;home&#x2F;test åªæœ‰æ‰§è¡Œå’Œå†™æƒé™ï¼Œ&#x2F;home&#x2F;test&#x2F;hello.java æ˜¯åªè¯»æ–‡ä»¶ï¼Œé—®tomå¯¹hello.javaæ–‡ä»¶èƒ½è¯»å—?èƒ½ä¿®æ”¹å—?èƒ½åˆ é™¤å—?</p><p>èƒ½ï¼Œä¸èƒ½ï¼Œèƒ½</p></blockquote><p>9.è¯´æ˜Centos7å¯åŠ¨æµç¨‹ï¼Œå¹¶è¯´æ˜å’ŒCentOs6ç›¸åŒå’Œä¸åŒçš„åœ°æ–¹(è…¾è®¯)</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240914134312443.png" class title="image-20240914134312443"><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240914134328917.png" class title="image-20240914134328917"><p>æµç¨‹å›¾</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240914134452700.png" class title="image-20240914134452700"><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240914134526830.png" class title="image-20240914134526830"><p>ç»“åˆä¸¤å›¾è®²è§£ï¼š</p><blockquote><p>ç¬¬ä¸€æ­¥ã€ç¡¬ä»¶å¯åŠ¨é˜¶æ®µ</p><ul><li>è¿™ä¸€æ­¥å’Œ Centos6 å·®ä¸å¤šï¼Œè¯¦ç»†è¯·çœ‹å›¾</li></ul><p>ç¬¬äºŒæ­¥ã€GRUB2å¼•å¯¼é˜¶æ®µ</p><ul><li><p>ä»è¿™ä¸€æ­¥å¼€å§‹,CentOs6å’Œ Centos7 çš„å¯åŠ¨æµç¨‹åŒºåˆ«å¼€å§‹å±•ç°å‡ºæ¥äº†ã€‚Cent0s7çš„ä¸»å¼•å¯¼ç¨‹åºä½¿ç”¨çš„æ˜¯ grub2ã€‚</p></li><li><p>è¿™ä¸€æ­¥çš„æµç¨‹:æ˜¾ç¤ºåŠ è½½ä¸¤ä¸ªé•œåƒï¼Œå†åŠ è½½MOD æ¨¡å—æ–‡ä»¶ï¼ŒæŠŠ grub2 ç¨‹åºåŠ è½½æ‰§è¡Œï¼Œæ¥ç€è§£æé…ç½®æ–‡ä»¶&#x2F;boot&#x2F;grub2&#x2F;grub.cgï¼Œæ ¹æ®é…ç½®æ–‡ä»¶åŠ è½½å†…æ ¸é•œåƒåˆ°å†…å­˜ï¼Œä¹‹åæ„å»ºè™šæ‹Ÿæ ¹æ–‡ä»¶ç³»ç»Ÿï¼Œæœ€åè½¬åˆ°å†…æ ¸ã€‚</p></li><li><p>åœ¨è¿™é‡Œ grub.cfg é…ç½®æ–‡ä»¶å·²ç»æ¯”è¾ƒå¤æ‚äº†ï¼Œä½†å¹¶ä¸ç”¨æ‹…å¿ƒï¼Œåˆ°äº† Cent0s7 ä¸­ä¸€èˆ¬æ˜¯ä½¿ç”¨å‘½ä»¤è¿›è¡Œé…ç½®ï¼Œè€Œä¸ç›´æ¥å»ä¿®æ”¹é…ç½®æ–‡ä»¶äº†ã€‚ä¸è¿‡æˆ‘ä»¬å¯ä»¥çœ‹åˆ°grub.cfgé…ç½®æ–‡ä»¶å¼€å¤´æ³¨é‡Šéƒ¨åˆ†è¯´æ˜äº†ç”±&#x2F;etc&#x2F;grub.d&#x2F;ç›®å½•ä¸‹æ–‡ä»¶å’Œ&#x2F;etc&#x2F;default&#x2F;grub æ–‡ä»¶ç»„æˆã€‚</p></li><li><p>ä¸€èˆ¬ä¿®æ”¹å¥½é…ç½®åéƒ½éœ€è¦ä½¿ç”¨å‘½ä»¤grub2-mkconfig:o&#x2F;boot&#x2F;grub2&#x2F;grub.cfgï¼Œå°†é…ç½®æ–‡ä»¶é‡æ–°ç”Ÿæˆã€‚</p></li></ul><p>ç¬¬ä¸‰æ­¥ã€å†…æ ¸å¼•å¯¼é˜¶æ®µ</p><ul><li>è¿™ä¸€æ­¥ä¸ CentOs6 ä¹Ÿå·®ä¸å¤šï¼ŒåŠ è½½é©±åŠ¨ï¼Œåˆ‡æ¢åˆ°çœŸæ­£çš„æ ¹æ–‡ä»¶ç³»ç»Ÿï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯æ‰§è¡Œçš„åˆå§‹åŒ–ç¨‹åºå˜æˆäº†&#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;systemd</li></ul><p>ç¬¬å››æ­¥ã€systemedåˆå§‹åŒ–é˜¶æ®µ(åˆå«ç³»ç»Ÿåˆå§‹åŒ–é˜¶æ®µ)</p><ul><li><p>Cent0s7 ä¸­æˆ‘ä»¬çš„åˆå§‹åŒ–è¿›ç¨‹å˜ä¸ºäº†systemd,æ‰§è¡Œé»˜è®¤target é…æ–‡ä»¶<code>/etc/systemd/system/default.target</code>(è¿™æ˜¯ä¸€ä¸ªè½¯é“¾æ¥ï¼Œä¸é»˜è®¤è¿è¡Œçº§åˆ«æœ‰å…³)ã€‚ç„¶åæ‰§è¡Œ<code>sysinit.target </code>æ¥åˆå§‹åŒ–ç³»ç»Ÿå’Œ <code>basic.target</code> æ¥å‡†å¤‡æ“ä½œç³»ç»Ÿã€‚æ¥ç€å¯åŠ¨ <code>multi-user.target</code>ä¸‹çš„æœ¬æœºä¸æœåŠ¡å™¨æœåŠ¡ï¼Œå¹¶æ£€æŸ»<code>/etc/rc.d/rc.local</code>æ–‡ä»¶æ˜¯å¦æœ‰<strong>ç”¨æˆ·è‡ªå®šä¹‰è„šæœ¬</strong>éœ€è¦å¯åŠ¨ã€‚æœ€åæ‰§è¡Œ<code>multi-user</code>ä¸‹çš„ <code>getty.target </code>åŠç™»å½•æœåŠ¡ï¼Œæ£€æŸ¥ <code>default.target </code>æ˜¯å¦æœ‰å…¶ä»–çš„æœåŠ¡éœ€è¦å¯åŠ¨ã€‚</p></li><li><p>æ³¨æ„:<code>/etc/systemd/system/defaulttarget</code>æŒ‡å‘äº†<code>/lib/systemd/system/</code>ç›®å½•ä¸‹çš„<code>graphical.target</code> æˆ–<code>multiuser.target</code>ã€‚è€Œ<code>graphical.target </code>ä¾èµ–<code>multiuser.target</code>, <code>multiuser.target</code> ä¾èµ– <code>basic.target</code>ï¼Œ <code>basic.target</code> ä¾èµ–<code>sysinit.target</code>ï¼Œæ‰€ä»¥å€’è¿‡æ¥æ‰§è¡Œã€‚</p></li><li><p>System æ¦‚è¿°(äº†è§£):<code>systemd</code> å³ä¸º<code>system daemon</code>ï¼Œæ˜¯Linux ä¸‹çš„ä¸€ç§<code>init </code>è½¯ä»¶ï¼Œå¼€å‘ç›®æ ‡æ˜¯æä¾›æ›´ä¼˜ç§€çš„æ¡†æ¶ä»¥è¡¨ç¤ºç³»ç»ŸæœåŠ¡é—´çš„ä»¥æ¥å…³ç³»ï¼Œå¹¶ä¾æ­¤å®ç°ç³»ç»Ÿåˆå§‹åŒ–æ—¶æœåŠ¡çš„å¹¶è¡Œå¯åŠ¨ï¼ŒåŒæ—¶è¾¾åˆ°é™ä½<code>shell</code>ç³»ç»Ÿå¼€é”€çš„æ•ˆæœï¼Œæœ€ç»ˆä»£æ›¿ç°åœ¨å¸¸ç”¨çš„<code>System V</code>ä¸ <code>BSD </code>é£æ ¼çš„<code>init</code> ç¨‹åºã€‚</p></li><li><p>ä¸å¤šæ•°å‘è¡Œç‰ˆä½¿ç”¨çš„ <code>System V</code>é£æ ¼çš„<code>init</code>ç›¸æ¯”ï¼Œ<code>systemd</code>é‡‡ç”¨äº†ä»¥ä¸‹çš„æ–°æŠ€æœ¯:A.é‡‡ç”¨ <code>Socket</code>æ¿€æ´»å¼ä¸æ€»çº¿æ¿€æ´»å¼æœåŠ¡ï¼Œä»¥æé«˜ç›¸äº’ä¾èµ–çš„å„æœåŠ¡çš„å¹¶è¡Œè¿è¡Œæ€§èƒ½ï¼›B.ç”¨<code>Cgroup</code>ä»£æ›¿<code>PID</code>æ¥è¿½è¸ªè¿›ç¨‹ï¼Œå³ä½¿æ˜¯ä¸¤æ¬¡ <code>fork</code>ä¹‹åç”Ÿæˆçš„å®ˆæŠ¤è¿›ç¨‹ä¹Ÿä¸ä¼šè„±ç¦» <code>systemd</code> çš„æ§åˆ¶ã€‚</p></li><li><p>unit å¯¹è±¡:<code>unit </code>è¡¨ç¤ºä¸åŒç±»å‹çš„<code>systemd</code> å¯¹è±¡ï¼Œé€šè¿‡é…ç½®æ–‡ä»¶è¿›è¡Œæ ‡è¯†å’Œé…ç½®;æ–‡ä»¶ä¸­ä¸»è¦åŒ…å«äº†ç³»ç»ŸæœåŠ¡ã€ç›‘å¬ socketã€ä¿å­˜çš„ç³»ç»Ÿå¿«ç…§ä»¥åŠå…¶ä»–ä¸ init ç›¸å…³çš„ä¿¡æ¯ã€‚(ä¹Ÿå°±æ˜¯CentOs6ä¸­çš„æœåŠ¡å™¨å¯åŠ¨è„šæœ¬)</p><ul><li><p>(1).<code>/etc/systemd/system/default.target</code>  è¿™æ˜¯ä¸€ä¸ªè½¯é“¾æ¥ï¼Œå’Œé»˜è®¤è¿è¡Œçº§åˆ«ç›¸å…³</p><ul><li><p>æˆ‘ä»¬å¯ä»¥åˆ°è¿™ä¸ªç›®å½•ä¸‹çœ‹ä¸€ä¸‹ <code>cd /lib/systemd/system/ &amp;&amp; ls *.target</code>  </p></li><li><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240914135904070.png" class title="image-20240914135904070"></li></ul></li><li><p>è¿™é‡Œå¯ä»¥çœ‹åˆ°runlevelå¼€å¤´çš„targetæ–‡ä»¶ï¼Œå¯¹åº”ç€Centos6 çš„å¯åŠ¨çº§åˆ«ï¼Œä¸è¿‡ä¸€æ ·æ˜¯è½¯é“¾æ¥ï¼ŒæŒ‡å‘äº†åŒç›®å½•ä¸‹çš„å…¶ä»–æ–‡ä»¶ï¼Œä¹Ÿç®—ä¸€ç§å‘ä¸‹å…¼å®¹å§</p><ul><li><p><code>ll runlevel*.target</code></p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240914140029729.png" class title="image-20240914140029729"></li><li><p>å¯ä»¥çœ‹åˆ°æˆ‘çš„ default.target ä¸ runlevel5.targetæŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªæ–‡ä»¶ï¼Œå¯ä»¥çœ‹å‡ºæˆ‘çš„é»˜è®¤è¿è¡Œçº§åˆ«æ˜¯ 5ã€‚</p></li></ul></li><li><p>(2).<code>/usr/lib/systemd/system/</code></p><ul><li>è¿™ä¸ªç›®å½•å­˜å‚¨æ¯ä¸ªæœåŠ¡çš„è„šæœ¬ï¼Œç±»ä¼¼CentOs6 çš„<code>/etc/init.d/</code></li></ul></li><li><p>(3).<code>/run/systemd/system/</code></p><ul><li>ç³»ç»Ÿæ‰§è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„è„šæœ¬ã€‚</li></ul></li><li><p>(4).<code>/etc/systemd/system/</code></p><ul><li>ç±»ä¼¼äº CentOs6 çš„&#x2F;etc&#x2F;rc.d&#x2F;rc#.d&#x2F;sxxç±»æ–‡ä»¶çš„åŠŸèƒ½ï¼Œç®¡ç†å‘˜å»ºç«‹çš„æ‰§è¡Œè„šæœ¬ï¼Œå¤§éƒ¨åˆ†æ˜¯è½¯é“¾æ¥</li></ul></li></ul></li></ul></blockquote><p>10.é—®é¢˜:åˆ—ä¸¾ Linuxé«˜çº§å‘½ä»¤ï¼Œè‡³å°‘6ä¸ª(ç™¾åº¦)</p><p>ç­”æ¡ˆï¼š</p><blockquote><p>-<br>  netstat &#x2F;&#x2F;ç½‘ç»œçŠ¶æ€ç›‘æ§</p><ul><li><p>top &#x2F;&#x2F;ç³»ç»Ÿè¿è¡ŒçŠ¶æ€</p></li><li><p>lsblk &#x2F;&#x2F;æŸ¥ç€ç¡¬ç›˜åˆ†åŒº</p></li><li><p>find</p></li><li><p>ps -aux &#x2F;&#x2F;æŸ¥çœ‹è¿è¡Œè¿›ç¨‹</p></li><li><p>chkconfig &#x2F;&#x2F;æŸ¥çœ‹æœåŠ¡å¯åŠ¨çŠ¶æ€</p></li><li><p>systemctl &#x2F;&#x2F;ç®¡ç†ç³»ç»ŸæœåŠ¡å™¨</p></li></ul></blockquote><p>11.é—®é¢˜:LinuxæŸ¥çœ‹å†…å­˜ã€io è¯»å†™ã€ç£ç›˜å­˜å‚¨ã€ç«¯å£å ç”¨ã€è¿›ç¨‹æŸ¥çœ‹å‘½ä»¤æ˜¯ä»€ä¹ˆ?(ç“œå­)</p><p>ç­”æ¡ˆï¼š</p><blockquote><p>1.<code>top</code> å†…å­˜</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240914141325361.png" class title="image-20240914141325361"><p>2.<code>yum install iotop</code> å®‰è£…ioæŸ¥è¯¢</p><p><code> iotop</code></p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240914141644228.png" class title="image-20240914141644228"><p>3.df -lh  </p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240914141717646.png" class title="image-20240914141717646"><p>4.<code>netstat -tunlp</code>  åªæŸ¥è¯¢ç«¯å£å ç”¨æƒ…å†µ</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240914141758657.png" class title="image-20240914141758657"><p>5.<code>ps -aux | grep sshd</code> è¿›ç¨‹æŸ¥çœ‹æƒ…å†µ</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240914141936826.png" class title="image-20240914141936826"></blockquote><p>12.ä½¿ç”¨Linuxå‘½ä»¤è®¡ç®—t2.txt ç¬¬äºŒåˆ—çš„å’Œå¹¶è¾“å‡º(ç¾å›¢)</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">å¼ ä¸‰ 40<br>æå›› 50<br>ç‹äº” 60<br></code></pre></td></tr></table></figure><p>ç­”æ¡ˆï¼š</p><p><code>cat t2.txt | awk -F &quot; &quot; &#39;&#123;sum+=$2&#125; END &#123;print sum&#125;&#39; </code></p><p>13.Shellè„šæœ¬é‡Œå¦‚ä½•æ£€æŸ¥ä¸€ä¸ªæ–‡ä»¶æ˜¯å¦å­˜åœ¨?å¹¶ç»™å‡ºæç¤º(ç™¾åº¦)</p><p>ç­”æ¡ˆï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">if [ -f æ–‡ä»¶å ]<br>then <br>echo &quot;å­˜åœ¨&quot;<br>else echo â€œä¸å­˜åœ¨â€<br>fi<br></code></pre></td></tr></table></figure><p>14.ç”¨shellå†™ä¸€ä¸ªè„šæœ¬ï¼Œå¯¹æ–‡æœ¬t3.txt ä¸­æ— åºçš„ä¸€åˆ—æ•°å­—æ’åº,å¹¶å°†æ€»å’Œè¾“å‡º(ç™¾åº¦)</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs text">9<br>8<br>7<br>6<br>5<br>4<br>3<br>2<br>10<br></code></pre></td></tr></table></figure><p>ç­”æ¡ˆï¼š<code>sort -n t3.txt | awk &#39;&#123;sum+=$0; print $0&#125; END &#123;print &quot;å’Œ=&quot;sum&#125;&#39;</code></p><p>15.è¯·ç”¨æŒ‡ä»¤å†™å‡ºæŸ¥æ‰¾å½“å‰æ–‡ä»¶å¤¹(&#x2F;home)ä¸‹æ‰€æœ‰çš„æ–‡æœ¬æ–‡ä»¶å†…å®¹ä¸­åŒ…å«æœ‰å­—ç¬¦<code>cat</code>çš„æ–‡ä»¶åç§°(é‡‘å±±)</p><p>ç­”æ¡ˆï¼š</p><p><code>grep -r &quot;cat&quot; /home | cut -d &quot;:&quot; -f 1 </code></p><p>16.è¯·å†™å‡ºç»Ÿè®¡&#x2F;homeç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ä¸ªæ•°å’Œæ‰€æœ‰æ–‡ä»¶æ€»è¡Œæ•°çš„æŒ‡ä»¤(åœ¨é‡‘å±±é¢è¯•é¢˜æ‰©å±•)</p><p>ç­”æ¡ˆï¼š</p><p><code>find /home/test -name &quot;*.*&quot; | wc -l</code>    #ç»Ÿè®¡&#x2F;homeç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ä¸ªæ•°</p><p><code>find /home/test -name &quot;*.*&quot; | xargs wc -l</code>  # ç»Ÿè®¡&#x2F;homeç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶æ€»è¡Œæ•°çš„æŒ‡ä»¤</p><p>17.åˆ—å‡ºä½ äº†è§£çš„webæœåŠ¡å™¨è´Ÿè½½æ¶æ„(æ»´æ»´)</p><p>ç­”æ¡ˆï¼š</p><blockquote><p>Nginx</p><p>Haproxy</p><p>Keepalived</p><p>LVS</p></blockquote><p>18.æ¯å¤©æ™šä¸Š 10 ç‚¹30åˆ†ï¼Œæ‰“åŒ…ç«™ç‚¹ç›®å½•&#x2F;var&#x2F;spool&#x2F;mail å¤‡ä»½åˆ°&#x2F;home ç›®å½•ä¸‹(æ¯æ¬¡å¤‡ä»½æŒ‰æ—¶é—´ç”Ÿæˆä¸åŒçš„å¤‡ä»½åŒ…ï¼Œæ¯”å¦‚æŒ‰ç…§ å¹´æœˆæ—¥æ—¶åˆ†ç§’)(æ»´æ»´)</p><p>ç­”æ¡ˆï¼š</p><blockquote><ul><li>åœ¨&#x2F;rootä¸­å†™è„šæœ¬</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br>cd /var/spool/ &amp;&amp; /bin/tar zcf /home/mail-`date +%Y-%m-%d_%H%M%S`.tar.gz mail/<br></code></pre></td></tr></table></figure><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240914152057752.png" class title="image-20240914152057752"><ul><li>å†™å®šæ—¶å™¨</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">crontab -e<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">mail.shæ²¡æœ‰æ‰§è¡Œæƒé™è¿™æ ·å†™ï¼ˆ30 20 * * * /bin/sh /root/mail.shï¼‰ï¼Œæœ‰æ‰§è¡Œæƒé™åˆ™å¦‚ä¸‹</span><br>30 20 * * * /root/mail.sh<br><br>crontab -i<br></code></pre></td></tr></table></figure></blockquote><p>19.å¦‚ä½•ä¼˜åŒ–Linuxç³»ç»Ÿï¼Œè¯´å‡ºä½ çš„æ–¹æ³•(ç“œå­)</p><blockquote><p>1.æ¶æ„å±‚æ¬¡</p><img src="/2024/09/12/Linux%E5%85%A5%E9%97%A8/image-20240914153120348.png" class title="image-20240914153120348"><p>2.å¯¹linuxæœ¬èº«çš„ä¼˜åŒ–</p><blockquote><p>(1)ä¸ç”¨root,ä½¿ç”¨sudoæç¤ºæƒé™</p><p>(2)å®šæ—¶çš„è‡ªåŠ¨æ›´æ–°æœåŠ¡æ—¶é—´,ä½¿ç”¨<code>ntpdate ntp1.aliyun.com</code>ï¼Œè®©<code>crond </code>å®šæ—¶æ›´æ–°</p><ul><li>ntpdateå·²ç»ä¸å»ºè®®ä½¿ç”¨ï¼Œæ–°ç³»ç»Ÿä½¿ç”¨ntpsec-ntpdateã€‚</li></ul><p>(3)é…ç½®yumæºï¼ŒæŒ‡å‘å›½å†…é•œåƒ(æ¸…åï¼Œ163)</p><p>(4)é…ç½®åˆç†çš„é˜²ç«å¢™ç­–ç•¥,æ‰“å¼€å¿…è¦çš„ç«¯å£ï¼Œå…³é—­ä¸å¿…è¦çš„ç«¯å£</p><p>(5)æ‰“å¼€æœ€å¤§æ–‡ä»¶æ•°(ä¸“ä¸šæœ¯è¯­ï¼šè°ƒæ•´æ–‡ä»¶çš„æè¿°çš„æ•°é‡) åœ¨<code>vim /etc/profile</code> æ–‡ä»¶ä¸­æ·»åŠ <code> ulimit -SHn 65535</code></p><p>(6)é…ç½®åˆç†çš„ç›‘æ§ç­–ç•¥</p><p>(7)é…ç½®åˆç†çš„ç³»ç»Ÿé‡è¦æ–‡ä»¶çš„å¤‡ä»½ç­–ç•¥</p><p>(8)å¯¹å®‰è£…çš„è½¯ä»¶è¿›è¡Œä¼˜åŒ–ï¼Œæ¯”å¦‚<code>nginx</code>,<code>apache</code></p><p>(9)å†…æ ¸å‚æ•°è¿›è¡Œä¼˜åŒ–<code>/etc/sysctl.conf</code></p><p>(10)é”å®šä¸€äº›é‡è¦çš„ç³»ç»Ÿæ–‡ä»¶ <code>chattr </code>  ï¼Œä¾‹å¦‚é”å®šè¿™äº›æ–‡ä»¶ <code>/etc/passwd</code> <code>/ect/shadow </code> <code>/etc/inittab</code></p><p>(11)ç¦ç”¨ä¸å¿…è¦çš„æœåŠ¡ <code>setup</code>æˆ– <code>ntsysv</code></p></blockquote></blockquote><h1 id="è¡¥å……å‘½ä»¤"><a href="#è¡¥å……å‘½ä»¤" class="headerlink" title="è¡¥å……å‘½ä»¤"></a>è¡¥å……å‘½ä»¤</h1><p>1.scpå‘½ä»¤</p><blockquote><blockquote><p>è·¨æœåŠ¡å¤åˆ¶:  <code>scp</code>&#x3D;<code>ssh cp</code></p></blockquote><p>è¯­æ³•ï¼š</p><ul><li>scp [-r] å‚æ•°1 å‚æ•°2<ul><li><code>-r</code> é€‰é¡¹ç”¨äºå¤åˆ¶æ–‡ä»¶å¤¹ä½¿ç”¨ï¼Œå¦‚æœå¤åˆ¶æ–‡ä»¶æ¥ï¼Œå¿…é¡»ä½¿ç”¨-r</li><li>å‚æ•°1:æœ¬æœºè·¯å¾„ æˆ– è¿œç¨‹ç›®æ ‡è·¯å¾„</li><li>å‚æ•°2:è¿œç¨‹ç›®æ ‡è·¯å¾„ æˆ– æœ¬æœºè·¯å¾„</li></ul></li><li>æ¡ˆä¾‹ï¼š<ul><li>å¦‚:<code>scp -r /export/server/jdk root@node2:/export/server/</code>å°†æœ¬æœºä¸Šçš„jdkæ–‡ä»¶æ¥ï¼Œä»¥rootçš„èº«ä»½å¤åˆ¶åˆ°node2çš„&#x2F;export&#x2F;server&#x2F;å†…åŒSSHç™»é™†ä¸€æ ·ï¼Œè´¦æˆ·åå¯ä»¥çœç•¥(ä½¿ç”¨æœ¬æœºå½“å‰çš„åŒåè´¦æˆ·ç™»é™†)</li><li>å¦‚:<code>scp -r node2:/export/server/idk /export/server/</code>å°†è¿œç¨‹node2çš„jdkæ–‡ä»¶å¤¹ï¼Œå¤åˆ¶åˆ°æœ¬æœºçš„&#x2F;export&#x2F;server&#x2F;å†…</li><li>#scpå‘½ä»¤çš„é«˜çº§ç”¨æ³•<ul><li><code>cd /export/server</code></li><li>scp -r jdk node2:`pmd`  #å°†æœ¬æœºå½“å‰è·¯å¾„çš„jdkæ–‡ä»¶å¤¹ï¼Œå¤åˆ¶åˆ°node2æœåŠ¡å™¨çš„åŒåè·¯å¾„ä¸‹</li><li>&#x2F;scp -r jdk node2:$PWD  #å°†æœ¬æœºå½“å‰è·¯å¾„çš„jdkæ–‡ä»¶å¤¹ï¼Œå¤åˆ¶åˆ°node2æœåŠ¡å™¨çš„åŒåè·¯å¾„ä¸‹</li></ul></li></ul></li></ul></blockquote><p>2.env å‘½ä»¤</p><blockquote><p><code>env</code> æŸ¥çœ‹æ‰€æœ‰çš„ç¯å¢ƒå˜é‡ï¼Œé…åˆ<code>$</code> å¦‚ï¼š<code>$pwd</code></p></blockquote>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
